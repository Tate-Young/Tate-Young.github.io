
<!DOCTYPE>
<html lang="zh-cn" data-scribe-reduced-action-queue="true">
<head>
    <meta content='Vuex ç®€ä»‹ - Tate & Snow' name='title' />
    <meta content='Vuex ç®€ä»‹ - Tate & Snow' name='og:title' />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.css">
    <script src="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.js"></script>
    <title>Vuex ç®€ä»‹ - Tate & Snow</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<title>Vuex ç®€ä»‹ - Tate & Snow</title>
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Vuex ç®€ä»‹ - Tate & Snow">
<meta name="twitter:keywords" content="Vuex ç®€ä»‹ - Tate & Snow" property='og:description' />
<meta property="og:type" content="article">
<meta property="og:title" content="Vuex ç®€ä»‹ - Tate & Snow">
<meta name="og:keywords" content="Vuex ç®€ä»‹ - Tate & Snow|Vuex ç®€ä»‹Vuexå¯¹äºçŠ¶æ€ç®¡ç†å®¹å™¨ï¼Œå‰é¢è®²äº†å¾ˆå¤šï¼Œç±»ä¼¼ Mobx å’Œ Reduxã€‚è¿™æ¬¡çœ‹çœ‹ Vue åº”ç”¨ä¸­å¦‚ä½•è¿ç”¨ Vuex æ¥å®ç°çŠ¶æ€ç®¡ç†ã€‚Vuex çš„æ ¸å¿ƒæ€æƒ³æ˜¯æä¾›ä¸€ä¸ªå…¨å±€çš„å•ä¾‹ç»Ÿä¸€è¿›è¡Œç®¡ç†çŠ¶æ€ï¼Œå¹¶ä¸”å®šä¹‰å’Œéš”ç¦»çŠ¶æ€ç®¡ç†ä¸­çš„å„ç§..."
  property='og:description' />
<link rel="icon" type="image/png" href="http://localhost:2333/style/favicons/favicon.ico" />
<link href="http://localhost:2333/style/favicons/favicon.ico" rel="shortcut icon" type="image/png">
<link rel="canonical" href="http://localhost:2333/">
<link rel="alternate" type="application/rss+xml" title="Liberxue" href="http://localhost:2333/feed.xml">
<meta charset="UTF-8">
<link rel="manifest" href="/manifest.json">
<link rel="shortcut icon" href="http://localhost:2333/style/favicons/favicon.ico" type="image/x-icon">
<meta name="keywords" content="Vuex ç®€ä»‹Vuexå¯¹äºçŠ¶æ€ç®¡ç†å®¹å™¨ï¼Œå‰é¢è®²äº†å¾ˆå¤šï¼Œç±»ä¼¼ Mobx å’Œ Reduxã€‚è¿™æ¬¡çœ‹çœ‹ Vue åº”ç”¨ä¸­å¦‚ä½•è¿ç”¨ Vuex æ¥å®ç°çŠ¶æ€ç®¡ç†ã€‚Vuex çš„æ ¸å¿ƒæ€æƒ³æ˜¯æä¾›ä¸€ä¸ªå…¨å±€çš„å•ä¾‹ç»Ÿä¸€è¿›è¡Œç®¡ç†çŠ¶æ€ï¼Œå¹¶ä¸”å®šä¹‰å’Œéš”ç¦»çŠ¶æ€ç®¡ç†ä¸­çš„å„ç§..." property='og:description'
/>
<meta name="description" content="Tate & Snow's Github blog" />
<link href="https://cdn.bootcss.com/highlight.js/9.10.0/styles/xcode.min.css" rel="stylesheet">
<link href="http://localhost:2333/style/theme.css" rel="stylesheet"> 
<meta content='http://localhost:2333/2019/08/06/vuex-profile.html' property='og:url' />
<meta content="http://localhost:2333/2019/08/06/vuex-profile.html|Vuex ç®€ä»‹Vuexå¯¹äºçŠ¶æ€ç®¡ç†å®¹å™¨ï¼Œå‰é¢è®²äº†å¾ˆå¤šï¼Œç±»ä¼¼ Mobx å’Œ Reduxã€‚è¿™æ¬¡çœ‹çœ‹ Vue åº”ç”¨ä¸­å¦‚ä½•è¿ç”¨ Vuex æ¥å®ç°çŠ¶æ€ç®¡ç†ã€‚Vuex çš„æ ¸å¿ƒæ€æƒ³æ˜¯æä¾›ä¸€ä¸ªå…¨å±€çš„å•ä¾‹ç»Ÿä¸€è¿›è¡Œç®¡ç†çŠ¶æ€ï¼Œå¹¶ä¸”å®šä¹‰å’Œéš”ç¦»çŠ¶æ€ç®¡ç†ä¸­çš„å„ç§..." property='og:description'
/>
<meta content="article" property="og:type" /> 

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-136311746-1"></script>
<!-- <script async src="https://cdn.jsdelivr.net/npm/jquery/dist/jquery.min.js"></script> -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome/css/font-awesome.min.css"/>
<script>
  window.dataLayer = window.dataLayer || [];
  window.GA_TRACKING_ID = 'UA-136311746-1'
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('set', {
    'country': 'US',
    'currency': 'USD',
    'description': 'fuck',
  });
  gtag('config', GA_TRACKING_ID, {
    'custom_map': {
      'dimension1': 'post_title',
    },
    'post_title': 'test',
  });
</script>
<meta content="" property="fb:app_id" />
<!-- Begin Jekyll SEO tag v2.6.1 -->
<title>Vuex ç®€ä»‹ | Tate &amp; Snow</title>
<meta name="generator" content="Jekyll v3.8.7" />
<meta property="og:title" content="Vuex ç®€ä»‹" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Vuex ç®€ä»‹" />
<meta property="og:description" content="Vuex ç®€ä»‹" />
<link rel="canonical" href="http://localhost:2333/2019/08/06/vuex-profile.html" />
<meta property="og:url" content="http://localhost:2333/2019/08/06/vuex-profile.html" />
<meta property="og:site_name" content="Tate &amp; Snow" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2019-08-06T16:08:00+08:00" />
<script type="application/ld+json">
{"description":"Vuex ç®€ä»‹","mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:2333/2019/08/06/vuex-profile.html"},"@type":"BlogPosting","url":"http://localhost:2333/2019/08/06/vuex-profile.html","headline":"Vuex ç®€ä»‹","dateModified":"2019-08-06T16:08:00+08:00","datePublished":"2019-08-06T16:08:00+08:00","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->

<script>
  (function (d, s, id) {
    var js, fjs = d.getElementsByTagName(s)[0];
    if (d.getElementById(id)) return;
    js = d.createElement(s);
    js.id = id;
    js.src = "//connect.facebook.net/en_GB/all.js#xfbml=1&appId=";
    fjs.parentNode.insertBefore(js, fjs);
  }(document, 'script', 'facebook-jssdk'));
</script>

</head>

<body class="dark-theme" gtools_scp_screen_capture_injected="true">
    <header id="header" class="header bg-white">
        <div class="navbar-container">
            <a href="Javascript:;" onclick="onClickLogo()" title="è®¿é—® Tate & Snow" class="navbar-logo menu-logo">
                <img src="http://localhost:2333/style/images/tate.png" alt="Tate & Snow"> </a>
            <!-- <a href="/?tate" title="è®¿é—® Tate & Snow" class="navbar-logo">Tate & Snow</a>   -->
            <div class="navbar-menu">
                
                  <a class=" menu-item-categories " href="Javascript:;" onclick="onClickMenu('é¦–é¡µ', '/')" title="è®¿é—® é¦–é¡µ" data-hover="é¦–é¡µ">é¦–é¡µ</a>
                
                  <a class=" menu-item-categories " href="Javascript:;" onclick="onClickMenu('å‰ç«¯', '/front')" title="è®¿é—® å‰ç«¯" data-hover="å‰ç«¯">å‰ç«¯</a>
                
                  <a class=" menu-item-categories " href="Javascript:;" onclick="onClickMenu('å†å²', '/history')" title="è®¿é—® å†å²" data-hover="å†å²">å†å²</a>
                
                  <a class=" menu-item-categories " href="Javascript:;" onclick="onClickMenu('å…¶ä»–', '/other')" title="è®¿é—® å…¶ä»–" data-hover="å…¶ä»–">å…¶ä»–</a>
                
                  <a class=" menu-item-categories " href="Javascript:;" onclick="onClickMenu('æ ‡ç­¾', '/tags')" title="è®¿é—® æ ‡ç­¾" data-hover="æ ‡ç­¾">æ ‡ç­¾</a>
                
                  <a class=" menu-item-about " href="Javascript:;" onclick="onClickMenu('å…³äº', '/README')" title="è®¿é—® å…³äº" data-hover="å…³äº">å…³äº</a>
                
            </div>
            <!-- <div class="navbar-menu">
                
                <a href="http://localhost:2333/">é¦–é¡µ</a>
                
                <a href="http://localhost:2333/front">å‰ç«¯</a>
                
                <a href="http://localhost:2333/history">å†å²</a>
                
                <a href="http://localhost:2333/other">å…¶ä»–</a>
                
                <a href="http://localhost:2333/tags">æ ‡ç­¾</a>
                
                <a href="http://localhost:2333/README">å…³äº</a>
                
            </div> -->
            <div class="navbar-search menu-item-search" onclick="onClickSearch()">
                <span class="icon-search"></span>
                <form id="cb-search-btn" role="search">
                    <span class="search-box">
                        <input type="text" class="input" id="cb-search-content" required="true" placeholder="æ ‡é¢˜ æ ‡ç­¾..." maxlength="30" autocomplete="off">
                    </span>
                </form>
            </div>
            <div class="navbar-mobile-menu" onclick="">
                <span class="icon-menu cross">
                    <span class="middle"></span>
                </span>
                <ul>
                    
                    <li>
                        <a class="menu-item-categories" href="Javascript:;" onclick="onClickMenu('é¦–é¡µ', 'http://localhost:2333/')">é¦–é¡µ</a>
                    </li>
                    
                    <li>
                        <a class="menu-item-categories" href="Javascript:;" onclick="onClickMenu('å‰ç«¯', 'http://localhost:2333/front')">å‰ç«¯</a>
                    </li>
                    
                    <li>
                        <a class="menu-item-categories" href="Javascript:;" onclick="onClickMenu('å†å²', 'http://localhost:2333/history')">å†å²</a>
                    </li>
                    
                    <li>
                        <a class="menu-item-categories" href="Javascript:;" onclick="onClickMenu('å…¶ä»–', 'http://localhost:2333/other')">å…¶ä»–</a>
                    </li>
                    
                    <li>
                        <a class="menu-item-categories" href="Javascript:;" onclick="onClickMenu('æ ‡ç­¾', 'http://localhost:2333/tags')">æ ‡ç­¾</a>
                    </li>
                    
                    <li>
                        <a class="menu-item-categories" href="Javascript:;" onclick="onClickMenu('å…³äº', 'http://localhost:2333/README')">å…³äº</a>
                    </li>
                    
                </ul>
            </div>
        </div>
    </header>
    <a href="#header" class="back-to-top" onclick="onClickTop('Vuex ç®€ä»‹')">â¤´Topâ¤´</a>
    <div class="post-header-thumb bg-white}">
        <div class="post-header-thumb-op"></div>
        <div class="post-header-thumb">
            <div class="post-header-thumb-container">
                <h1 class="post-title" itemprop="name headline">
                    Vuex ç®€ä»‹</h1>
                <div class="post-data">
                    <time datetime="2019-08-06 16:08:00" itemprop="datePublished">
                      å‘å¸ƒæ—¶é—´ï¼š2019-08-06 16:08:00
                      &nbsp;&nbsp;&nbsp;
                      
                        ä¿®æ”¹æ—¶é—´ï¼š2019-08-06 17:19:00
                      
                    </time>
                    <a onclick="onClickCategory('å‰ç«¯')" href="Javascript:;" title="è®¿é—® å‰ç«¯" data-hover="åšå®¢åˆ†ç±»: å‰ç«¯">åšå®¢åˆ†ç±»: å‰ç«¯</a>
                    <!-- <a href="#read"> é˜…è¯»æ¬¡æ•°: comments</a>  -->
                </div>
                <div class="post-tags">
                       
                    <a class="menu-item-tags" href="Javascript:;" onclick="onClickTag('Vue')" title="è®¿é—®Vue" data-hover="Vue">
                        Vue
                        <span>(5)</span>
                        
                    </a>
                       
                </div>
            </div>
        </div>
    </div>
    <article class="main-content post-page" itemscope itemtype="http://schema.org/Article">
        <div class="post-header">
            <h1 class="post-title" itemprop="name headline">
                Vuex ç®€ä»‹</h1>
            <div class="post-data">
                <time datetime="2019-08-06 16:08:00" itemprop="datePublished">2019-08-06 16:08:00</time>
            </div>
        </div>
        <div id="post-content" class="post-content" itemprop="articleBody">
            <p class="post-tags">
                   
                <a href="Javascript:;" onclick="onClickTag('Vue')" title="è®¿é—®Vue" data-hover="Vue">
                    Vue
                    <span>(5)</span>
                    </a>
                   
            </p>
            <h1 id="vuex-ç®€ä»‹">Vuex ç®€ä»‹</h1>

<h2 id="vuex">Vuex</h2>

<p>å¯¹äºçŠ¶æ€ç®¡ç†å®¹å™¨ï¼Œå‰é¢è®²äº†å¾ˆå¤šï¼Œç±»ä¼¼ Mobx å’Œ Reduxã€‚è¿™æ¬¡çœ‹çœ‹ Vue åº”ç”¨ä¸­å¦‚ä½•è¿ç”¨ <strong>Vuex</strong> æ¥å®ç°çŠ¶æ€ç®¡ç†ã€‚Vuex çš„æ ¸å¿ƒæ€æƒ³æ˜¯æä¾›ä¸€ä¸ªå…¨å±€çš„å•ä¾‹ç»Ÿä¸€è¿›è¡Œç®¡ç†çŠ¶æ€ï¼Œå¹¶ä¸”å®šä¹‰å’Œéš”ç¦»çŠ¶æ€ç®¡ç†ä¸­çš„å„ç§çŠ¶æ€ï¼Œå¼ºåˆ¶è¦æ±‚éµå¾ªçº¦å®šæ¥ç¼–å†™ä»£ç ï¼Œè€Œè¿™å¸¦æ¥çš„å¥½å¤„ä¾¿æ˜¯ä»£ç ä¼šæ›´åŠ çš„ç»“æ„åŒ–å’Œå®¹æ˜“ç»´æŠ¤ã€‚</p>

<p><img src="https://vuex.vuejs.org/vuex.png" alt="Vuex" /></p>

<h2 id="ä»“åº“-store">ä»“åº“ store</h2>

<p>æ¯ä¸€ä¸ª Vuex åº”ç”¨çš„æ ¸å¿ƒå°±æ˜¯ <strong>storeï¼ˆä»“åº“ï¼‰</strong>ã€‚store åŸºæœ¬ä¸Šå°±æ˜¯ä¸€ä¸ªå®¹å™¨ï¼Œå®ƒåŒ…å«ç€ä½ çš„åº”ç”¨ä¸­å¤§éƒ¨åˆ†çš„<strong>çŠ¶æ€ (state)</strong>ã€‚Vuex å’Œå…¨å±€å¯¹è±¡çš„åŒºåˆ«åœ¨äº:</p>

<ol>
  <li>Vuex çš„çŠ¶æ€å­˜å‚¨æ˜¯å“åº”å¼çš„ã€‚å½“ Vue ç»„ä»¶ä» store ä¸­è¯»å–çŠ¶æ€çš„æ—¶å€™ï¼Œè‹¥ store ä¸­çš„çŠ¶æ€å‘ç”Ÿå˜åŒ–ï¼Œé‚£ä¹ˆç›¸åº”çš„ç»„ä»¶ä¹Ÿä¼šç›¸åº”åœ°å¾—åˆ°é«˜æ•ˆæ›´æ–°</li>
  <li>ä¸èƒ½å¤Ÿç›´æ¥æ”¹å˜ store é‡Œçš„çŠ¶æ€ï¼Œè€Œæ˜¯åº”è¯¥æ˜¾ç¤ºåœ°æäº¤(commit) mutationsã€‚æ–¹ä¾¿è¿½è¸ªå˜æ›´</li>
</ol>

<p>åˆ›å»ºä¸€ä¸ª store çš„æ–¹æ³•å¦‚ä¸‹:</p>

<pre><code class="language-JS">// å¦‚æœåœ¨æ¨¡å—åŒ–æ„å»ºç³»ç»Ÿä¸­ï¼Œè¯·ç¡®ä¿åœ¨å¼€å¤´è°ƒç”¨äº† Vue.use(Vuex)
import Vue from 'vue'
import Vuex from 'vuex'

Vue.use(Vuex)

const store = new Vuex.Store({
  state: {
    count: 0
  },
  mutations: {
    increment (state) {
      state.count++
    }
  }
})
</code></pre>

<p>ç°åœ¨ï¼Œä½ å¯ä»¥é€šè¿‡ <code class="highlighter-rouge">store.state</code> æ¥è·å–çŠ¶æ€å¯¹è±¡ï¼Œä»¥åŠé€šè¿‡ <code class="highlighter-rouge">store.commit</code> æ–¹æ³•è§¦å‘çŠ¶æ€å˜æ›´:</p>

<pre><code class="language-JS">store.commit('increment')

console.log(store.state.count) // -&gt; 1
</code></pre>

<blockquote>
  <p>ç”±äº store ä¸­çš„çŠ¶æ€æ˜¯å“åº”å¼çš„ï¼Œåœ¨ç»„ä»¶ä¸­è°ƒç”¨ store ä¸­çš„çŠ¶æ€ç®€å•åˆ°ä»…éœ€è¦åœ¨è®¡ç®—å±æ€§(computed)ä¸­è¿”å›å³å¯</p>
</blockquote>

<h2 id="çŠ¶æ€-state">çŠ¶æ€ state</h2>

<p>æ¯ä¸ªåº”ç”¨å°†ä»…ä»…åŒ…å«ä¸€ä¸ª store å®ä¾‹ã€‚<strong>å•ä¸€çŠ¶æ€æ ‘</strong>è®©æˆ‘ä»¬èƒ½å¤Ÿç›´æ¥åœ°å®šä½ä»»ä¸€ç‰¹å®šçš„çŠ¶æ€ç‰‡æ®µï¼Œåœ¨è°ƒè¯•çš„è¿‡ç¨‹ä¸­ä¹Ÿèƒ½è½»æ˜“åœ°å–å¾—æ•´ä¸ªå½“å‰åº”ç”¨çŠ¶æ€çš„å¿«ç…§ã€‚é‚£ä¹ˆæˆ‘ä»¬å¦‚ä½•åœ¨ Vue ç»„ä»¶ä¸­å±•ç¤ºçŠ¶æ€å‘¢ï¼Ÿç”±äº Vuex çš„çŠ¶æ€å­˜å‚¨æ˜¯å“åº”å¼çš„ï¼Œä» store å®ä¾‹ä¸­è¯»å–çŠ¶æ€æœ€ç®€å•çš„æ–¹æ³•å°±æ˜¯åœ¨è®¡ç®—å±æ€§ä¸­è¿”å›æŸä¸ªçŠ¶æ€:</p>

<pre><code class="language-JS">// åˆ›å»ºä¸€ä¸ª Counter ç»„ä»¶
const Counter = {
  template: `&lt;div&gt;8&lt;/div&gt;`,
  computed: {
    count () {
      return store.state.count
    }
  }
}
</code></pre>

<p>ç„¶è€Œï¼Œè¿™ç§æ¨¡å¼å¯¼è‡´ç»„ä»¶ä¾èµ–å…¨å±€çŠ¶æ€å•ä¾‹ storeã€‚åœ¨æ¨¡å—åŒ–çš„æ„å»ºç³»ç»Ÿä¸­ï¼Œåœ¨æ¯ä¸ªéœ€è¦ä½¿ç”¨ state çš„ç»„ä»¶ä¸­éœ€è¦é¢‘ç¹åœ°å¯¼å…¥ï¼Œå¹¶ä¸”åœ¨æµ‹è¯•ç»„ä»¶æ—¶éœ€è¦æ¨¡æ‹ŸçŠ¶æ€ã€‚å› æ­¤ Vuex é€šè¿‡ store é€‰é¡¹ï¼Œæä¾›äº†ä¸€ç§æœºåˆ¶å°†çŠ¶æ€ä»æ ¹ç»„ä»¶â€œæ³¨å…¥â€åˆ°æ¯ä¸€ä¸ªå­ç»„ä»¶ä¸­:</p>

<pre><code class="language-JS">const app = new Vue({
  el: '#app',
  // æŠŠ store å¯¹è±¡æä¾›ç»™ â€œstoreâ€ é€‰é¡¹ï¼Œè¿™å¯ä»¥æŠŠ store çš„å®ä¾‹æ³¨å…¥æ‰€æœ‰çš„å­ç»„ä»¶
  store,
  components: { Counter },
  template: `
    &lt;div class="app"&gt;
      &lt;counter&gt;&lt;/counter&gt;
    &lt;/div&gt;
  `
})
</code></pre>

<p>é€šè¿‡åœ¨æ ¹å®ä¾‹ä¸­æ³¨å†Œ store é€‰é¡¹ï¼Œè¯¥ store å®ä¾‹ä¼šæ³¨å…¥åˆ°æ ¹ç»„ä»¶ä¸‹çš„æ‰€æœ‰å­ç»„ä»¶ä¸­ï¼Œä¸”å­ç»„ä»¶èƒ½é€šè¿‡ <code class="highlighter-rouge">this.$store</code> è®¿é—®åˆ°ã€‚è®©æˆ‘ä»¬æ›´æ–°ä¸‹ Counter çš„å®ç°:</p>

<pre><code class="language-JS">const Counter = {
  template: `&lt;div&gt;8&lt;/div&gt;`,
  computed: {
    count () {
      return this.$store.state.count // modify this line
    }
  }
}
</code></pre>

<h3 id="mapstate">mapState</h3>

<p>å½“ä¸€ä¸ªç»„ä»¶éœ€è¦è·å–å¤šä¸ªçŠ¶æ€æ—¶å€™ï¼Œå°†è¿™äº›çŠ¶æ€éƒ½å£°æ˜ä¸ºè®¡ç®—å±æ€§ä¼šæœ‰äº›é‡å¤å’Œå†—ä½™ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ <strong>mapState</strong> è¾…åŠ©å‡½æ•°å¸®åŠ©æˆ‘ä»¬ç”Ÿæˆè®¡ç®—å±æ€§:</p>

<pre><code class="language-JS">import { mapState } from 'vuex'

export default {
  // ...
  computed: mapState({
    // ç®­å¤´å‡½æ•°å¯ä½¿ä»£ç æ›´ç®€ç»ƒ
    count: state =&gt; state.count,

    // ä¼ å­—ç¬¦ä¸²å‚æ•° 'count' ç­‰åŒäº `state =&gt; state.count`
    countAlias: 'count',

    // ä¸ºäº†èƒ½å¤Ÿä½¿ç”¨ `this` è·å–å±€éƒ¨çŠ¶æ€ï¼Œå¿…é¡»ä½¿ç”¨å¸¸è§„å‡½æ•°
    countPlusLocalState (state) {
      return state.count + this.localCount
    }
  })
}
</code></pre>

<p>è¿˜å¯ä»¥åˆ©ç”¨å¯¹è±¡å±•å¼€è¿ç®—ç¬¦ç®€åŒ–å†™æ³•:</p>

<pre><code class="language-JS">computed: {
  localComputed () { /* ... */ },
  // ä½¿ç”¨å¯¹è±¡å±•å¼€è¿ç®—ç¬¦å°†æ­¤å¯¹è±¡æ··å…¥åˆ°å¤–éƒ¨å¯¹è±¡ä¸­
  ...mapState({
    // ...
    // æ˜ å°„ this.count ä¸º store.state.count
    'count'
  })
}
</code></pre>

<h2 id="getters">Getters</h2>

<p>æœ‰æ—¶å€™æˆ‘ä»¬éœ€è¦ä» store ä¸­çš„ state ä¸­æ´¾ç”Ÿå‡ºä¸€äº›çŠ¶æ€ï¼Œä¾‹å¦‚å¯¹åˆ—è¡¨è¿›è¡Œè¿‡æ»¤å¹¶è®¡æ•°:</p>

<pre><code class="language-JS">computed: {
  doneTodosCount () {
    return this.$store.state.todos.filter(todo =&gt; todo.done).length
  }
}
</code></pre>

<p>å¦‚æœæœ‰å¤šä¸ªç»„ä»¶éœ€è¦ç”¨åˆ°æ­¤å±æ€§ï¼Œæˆ‘ä»¬è¦ä¹ˆå¤åˆ¶è¿™ä¸ªå‡½æ•°ï¼Œæˆ–è€…æŠ½å–åˆ°ä¸€ä¸ªå…±äº«å‡½æ•°ç„¶ååœ¨å¤šå¤„å¯¼å…¥å®ƒâ€”â€”æ— è®ºå“ªç§æ–¹å¼éƒ½ä¸æ˜¯å¾ˆç†æƒ³ã€‚Vuex å…è®¸æˆ‘ä»¬åœ¨ store <strong>ä¸­å®šä¹‰getter</strong>ï¼ˆå¯ä»¥è®¤ä¸ºæ˜¯ store çš„è®¡ç®—å±æ€§ï¼‰ã€‚å°±åƒè®¡ç®—å±æ€§ä¸€æ ·ï¼Œgetter çš„è¿”å›å€¼ä¼šæ ¹æ®å®ƒçš„ä¾èµ–è¢«ç¼“å­˜èµ·æ¥ï¼Œä¸”åªæœ‰å½“å®ƒçš„ä¾èµ–å€¼å‘ç”Ÿäº†æ”¹å˜æ‰ä¼šè¢«é‡æ–°è®¡ç®—:</p>

<pre><code class="language-JS">const store = new Vuex.Store({
  state: {
    todos: [
      { id: 1, text: '...', done: true },
      { id: 2, text: '...', done: false }
    ]
  },
  getters: {
    doneTodos: state =&gt; { // æ¥å— state ä½œä¸ºå…¶ç¬¬ä¸€ä¸ªå‚æ•°
      return state.todos.filter(todo =&gt; todo.done)
    }
  }
})
</code></pre>

<p>åŒæ—¶ Getter ä¼šæš´éœ²ä¸º <code class="highlighter-rouge">store.getters</code> å¯¹è±¡ï¼Œä½ å¯ä»¥ä»¥å±æ€§çš„å½¢å¼è®¿é—®è¿™äº›å€¼:</p>

<pre><code class="language-JS">store.getters.doneTodos // -&gt; [{ id: 1, text: '...', done: true }]
</code></pre>

<p>Getter ä¹Ÿå¯ä»¥æ¥å—å…¶ä»– getter ä½œä¸ºç¬¬äºŒä¸ªå‚æ•°:</p>

<pre><code class="language-JS">getters: {
  // ...
  doneTodosCount: (state, getters) =&gt; {
    return getters.doneTodos.length
  }
}

store.getters.doneTodosCount // -&gt; 1
</code></pre>

<p>å› æ­¤æˆ‘ä»¬æœ€åæ”¹é€ ä¸º:</p>

<pre><code class="language-JS">computed: {
  doneTodosCount () {
    return this.$store.getters.doneTodosCount
  }
}
</code></pre>

<p>å¦å¤–ï¼Œä½ ä¹Ÿå¯ä»¥é€šè¿‡è®© getter è¿”å›ä¸€ä¸ªå‡½æ•°ï¼Œæ¥å®ç°ç»™ getter ä¼ å‚ã€‚åœ¨ä½ å¯¹ store é‡Œçš„æ•°ç»„è¿›è¡ŒæŸ¥è¯¢æ—¶éå¸¸æœ‰ç”¨:</p>

<pre><code class="language-JS">getters: {
  // ...
  getTodoById: (state) =&gt; (id) =&gt; {
    return state.todos.find(todo =&gt; todo.id === id)
  }
}

store.getters.getTodoById(2) // -&gt; { id: 2, text: '...', done: false }
</code></pre>

<blockquote>
  <p>æ³¨æ„ï¼Œgetter åœ¨é€šè¿‡æ–¹æ³•è®¿é—®æ—¶ï¼Œæ¯æ¬¡éƒ½ä¼šå»è¿›è¡Œè°ƒç”¨ï¼Œè€Œä¸ä¼šç¼“å­˜ç»“æœ</p>
</blockquote>

<h3 id="mapgetters">mapGetters</h3>

<p><strong>mapGetters</strong> è¾…åŠ©å‡½æ•°ä»…ä»…æ˜¯å°† store ä¸­çš„ getter æ˜ å°„åˆ°å±€éƒ¨è®¡ç®—å±æ€§:</p>

<pre><code class="language-JS">import { mapGetters } from 'vuex'

export default {
  // ...
  computed: {
  // ä½¿ç”¨å¯¹è±¡å±•å¼€è¿ç®—ç¬¦å°† getter æ··å…¥ computed å¯¹è±¡ä¸­
    ...mapGetters([
      'doneTodosCount',
      'anotherGetter',
      // ...
    ])
  }
}
</code></pre>

<p>å¦‚æœä½ æƒ³å°†ä¸€ä¸ª getter å±æ€§å¦å–ä¸€ä¸ªåå­—ï¼Œä½¿ç”¨å¯¹è±¡å½¢å¼:</p>

<pre><code class="language-JS">mapGetters({
  // æŠŠ `this.doneCount` æ˜ å°„ä¸º `this.$store.getters.doneTodosCount`
  doneCount: 'doneTodosCount'
})
</code></pre>

<h2 id="mutations">Mutations</h2>

<p>æ›´æ”¹ Vuex çš„ store ä¸­çš„çŠ¶æ€çš„å”¯ä¸€æ–¹æ³•æ˜¯æäº¤ <strong>mutation</strong>ã€‚Vuex ä¸­çš„ mutation éå¸¸ç±»ä¼¼äºäº‹ä»¶ï¼šæ¯ä¸ª mutation éƒ½æœ‰ä¸€ä¸ªå­—ç¬¦ä¸²çš„ <strong>äº‹ä»¶ç±»å‹ (type)</strong> å’Œ ä¸€ä¸ª <strong>å›è°ƒå‡½æ•° (handler)</strong>ã€‚è¿™ä¸ªå›è°ƒå‡½æ•°å°±æ˜¯æˆ‘ä»¬å®é™…è¿›è¡ŒçŠ¶æ€æ›´æ”¹çš„åœ°æ–¹ï¼Œå¹¶ä¸”å®ƒä¼šæ¥å— state ä½œä¸ºç¬¬ä¸€ä¸ªå‚æ•°ï¼Œä½ å¯ä»¥å‘ <code class="highlighter-rouge">store.commit</code> ä¼ å…¥é¢å¤–çš„å‚æ•°ï¼Œå³ mutation çš„ <strong>è½½è·ï¼ˆpayloadï¼‰</strong>:</p>

<pre><code class="language-JS">// ...
// ...
mutations: {
  increment (state, payload) {
    state.count += payload.amount
  }
}

store.commit('increment', {
  amount: 10
})

// ä¹Ÿå¯é‡‡ç”¨å¯¹è±¡é£æ ¼çš„æäº¤æ–¹å¼ï¼Œæ­¤æ—¶æ•´ä¸ªå¯¹è±¡éƒ½ä½œä¸ºè½½è·ä¼ ç»™ mutation å‡½æ•°
store.commit({
  type: 'increment',
  amount: 10
})
</code></pre>

<p>å¦å¤–éœ€è¦æ³¨æ„çš„æ˜¯ Mutation å¿…é¡»æ˜¯åŒæ­¥å‡½æ•°ï¼Œæ¯”å¦‚ä¸‹é¢è¿™ç§ï¼Œä½¿å¾—çŠ¶æ€å˜å¾—æ— æ³•è¿½è¸ª:</p>

<pre><code class="language-JS">mutations: {
  someMutation (state) {
    api.callAsyncMethod(() =&gt; {
      state.count++
    })
  }
}
</code></pre>

<h3 id="mapmutations">mapMutations</h3>

<p><strong>mapMutations</strong> è¾…åŠ©å‡½æ•°å°†ç»„ä»¶ä¸­çš„ methods æ˜ å°„ä¸º <code class="highlighter-rouge">store.commit</code> è°ƒç”¨:</p>

<pre><code class="language-JS">import { mapMutations } from 'vuex'

export default {
  // ...
  methods: {
    ...mapMutations([
      'increment', // å°† `this.increment()` æ˜ å°„ä¸º `this.$store.commit('increment')`

      // `mapMutations` ä¹Ÿæ”¯æŒè½½è·ï¼š
      'incrementBy' // å°† `this.incrementBy(amount)` æ˜ å°„ä¸º `this.$store.commit('incrementBy', amount)`
    ]),
    ...mapMutations({
      add: 'increment' // å°† `this.add()` æ˜ å°„ä¸º `this.$store.commit('increment')`
    })
  }
}
</code></pre>

<blockquote>
  <p>mutation éƒ½æ˜¯åŒæ­¥äº‹åŠ¡ï¼Œä¸ºäº†å¤„ç†å¼‚æ­¥æ“ä½œï¼Œè®©æˆ‘ä»¬æ¥çœ‹ä¸€çœ‹ Action</p>
</blockquote>

<h2 id="action">Action</h2>

<p><strong>Action</strong> ç±»ä¼¼äº mutationï¼Œä¸åŒåœ¨äº:</p>

<ol>
  <li>Action æäº¤çš„æ˜¯ mutationï¼Œè€Œä¸æ˜¯ç›´æ¥å˜æ›´çŠ¶æ€ã€‚</li>
  <li>Action å¯ä»¥åŒ…å«ä»»æ„å¼‚æ­¥æ“ä½œã€‚</li>
</ol>

<p>è®©æˆ‘ä»¬æ¥æ³¨å†Œä¸€ä¸ªç®€å•çš„ action:</p>

<pre><code class="language-JS">const store = new Vuex.Store({
  state: {
    count: 0
  },
  mutations: {
    increment (state) {
      state.count++
    }
  },
  actions: {
    increment (context) {
      context.commit('increment')
    }
  }
})
</code></pre>

<p>Action å‡½æ•°æ¥å—ä¸€ä¸ªä¸ store å®ä¾‹å…·æœ‰ç›¸åŒæ–¹æ³•å’Œå±æ€§çš„ <strong>context</strong> å¯¹è±¡(å¹¶ä¸æ˜¯ store å®ä¾‹æœ¬èº«)ï¼Œå› æ­¤ä½ å¯ä»¥è°ƒç”¨ <code class="highlighter-rouge">context.commit</code> æäº¤ä¸€ä¸ª mutationï¼Œæˆ–è€…é€šè¿‡ <code class="highlighter-rouge">context.state</code> å’Œ <code class="highlighter-rouge">context.getters</code> æ¥è·å– state å’Œ gettersã€‚Action é€šè¿‡ <code class="highlighter-rouge">store.dispatch</code> æ–¹æ³•è§¦å‘:</p>

<pre><code class="language-JS">store.dispatch('increment')
</code></pre>

<p>ä¹ä¸€çœ¼çœ‹ä¸Šå»æ„Ÿè§‰å¤šæ­¤ä¸€ä¸¾ï¼Œæˆ‘ä»¬ç›´æ¥åˆ†å‘ mutation å²‚ä¸æ›´æ–¹ä¾¿ï¼Ÿå®é™…ä¸Šå¹¶éå¦‚æ­¤ï¼Œè¿˜è®°å¾— mutation å¿…é¡»åŒæ­¥æ‰§è¡Œè¿™ä¸ªé™åˆ¶ä¹ˆï¼ŸAction å°±ä¸å—çº¦æŸï¼æˆ‘ä»¬å¯ä»¥åœ¨ action å†…éƒ¨æ‰§è¡Œå¼‚æ­¥æ“ä½œ:</p>

<pre><code class="language-JS">actions: {
  incrementAsync ({ commit }) {
    setTimeout(() =&gt; {
      commit('increment')
    }, 1000)
  }
}

// ä»¥è½½è·å½¢å¼åˆ†å‘
store.dispatch('incrementAsync', {
  amount: 10
})

// ä»¥å¯¹è±¡å½¢å¼åˆ†å‘
store.dispatch({
  type: 'incrementAsync',
  amount: 10
})
</code></pre>

<p>Action é€šå¸¸æ˜¯å¼‚æ­¥çš„ï¼Œé‚£ä¹ˆå¦‚ä½•çŸ¥é“ action ä»€ä¹ˆæ—¶å€™ç»“æŸå‘¢ï¼Ÿé¦–å…ˆï¼Œä½ éœ€è¦æ˜ç™½ store.dispatch å¯ä»¥å¤„ç†è¢«è§¦å‘çš„ action çš„å¤„ç†å‡½æ•°è¿”å›çš„ Promiseï¼Œå¹¶ä¸” store.dispatch ä»æ—§è¿”å› Promise:</p>

<pre><code class="language-JS">actions: {
  actionA ({ commit }) {
    return new Promise((resolve, reject) =&gt; {
      setTimeout(() =&gt; {
        commit('someMutation')
        resolve()
      }, 1000)
    })
  }
}

store.dispatch('actionA').then(() =&gt; {
  // ...
})
</code></pre>

<p>åˆ©ç”¨ async/await æˆ‘ä»¬å†çœ‹ä¸ªç»„åˆæ —å­:</p>

<pre><code class="language-JS">// å‡è®¾ getData() å’Œ getOtherData() è¿”å›çš„æ˜¯ Promise

actions: {
  async actionA ({ commit }) {
    commit('gotData', await getData())
  },
  async actionB ({ dispatch, commit }) {
    await dispatch('actionA') // ç­‰å¾… actionA å®Œæˆ
    commit('gotOtherData', await getOtherData())
  }
}
</code></pre>

<h3 id="mapactions">mapActions</h3>

<p><strong>mapActions</strong> è¾…åŠ©å‡½æ•°å°†ç»„ä»¶çš„ methods æ˜ å°„ä¸º <code class="highlighter-rouge">store.dispatch</code> è°ƒç”¨:</p>

<pre><code class="language-JS">import { mapActions } from 'vuex'

export default {
  // ...
  methods: {
    ...mapActions([
      'increment', // å°† `this.increment()` æ˜ å°„ä¸º `this.$store.dispatch('increment')`

      // `mapActions` ä¹Ÿæ”¯æŒè½½è·ï¼š
      'incrementBy' // å°† `this.incrementBy(amount)` æ˜ å°„ä¸º `this.$store.dispatch('incrementBy', amount)`
    ]),
    ...mapActions({
      add: 'increment' // å°† `this.add()` æ˜ å°„ä¸º `this.$store.dispatch('increment')`
    })
  }
}
</code></pre>

<h2 id="module">Module</h2>

<h3 id="modules-åˆ†å‰²">modules åˆ†å‰²</h3>

<p>ç”±äºä½¿ç”¨å•ä¸€çŠ¶æ€æ ‘ï¼Œåº”ç”¨çš„æ‰€æœ‰çŠ¶æ€ä¼šé›†ä¸­åˆ°ä¸€ä¸ªæ¯”è¾ƒå¤§çš„å¯¹è±¡ã€‚å½“åº”ç”¨å˜å¾—éå¸¸å¤æ‚æ—¶ï¼Œstore å¯¹è±¡å°±æœ‰å¯èƒ½å˜å¾—ç›¸å½“è‡ƒè‚¿ã€‚Vuex å…è®¸æˆ‘ä»¬å°† store åˆ†å‰²æˆ<strong>æ¨¡å—ï¼ˆmoduleï¼‰</strong>ã€‚æ¯ä¸ªæ¨¡å—æ‹¥æœ‰è‡ªå·±çš„ <code class="highlighter-rouge">stateã€mutationã€actionã€getter</code>ï¼Œç”šè‡³æ˜¯åµŒå¥—å­æ¨¡å—â€”â€”ä»ä¸Šè‡³ä¸‹è¿›è¡ŒåŒæ ·æ–¹å¼çš„åˆ†å‰²:</p>

<pre><code class="language-JS">const moduleA = {
  state: { ... },
  mutations: { ... },
  actions: { ... },
  getters: { ... }
}

const moduleB = {
  state: { ... },
  mutations: { ... },
  actions: { ... }
}

const store = new Vuex.Store({
  modules: {
    a: moduleA,
    b: moduleB
  }
})

store.state.a // -&gt; moduleA çš„çŠ¶æ€
store.state.b // -&gt; moduleB çš„çŠ¶æ€
</code></pre>

<p>å¯¹äºæ¨¡å—å†…éƒ¨çš„ actionï¼Œå±€éƒ¨çŠ¶æ€é€šè¿‡ <code class="highlighter-rouge">context.state</code> æš´éœ²å‡ºæ¥ï¼Œæ ¹èŠ‚ç‚¹çŠ¶æ€åˆ™ä¸º <code class="highlighter-rouge">context.rootState</code>:</p>

<pre><code class="language-JS">const moduleA = {
  // ...
  actions: {
    incrementIfOddOnRootSum ({ state, commit, rootState }) {
      if ((state.count + rootState.count) % 2 === 1) {
        commit('increment')
      }
    }
  }
}
</code></pre>

<p>å¯¹äºæ¨¡å—å†…éƒ¨çš„ getterï¼Œæ ¹èŠ‚ç‚¹çŠ¶æ€ä¼šä½œä¸ºç¬¬ä¸‰ä¸ªå‚æ•°æš´éœ²å‡ºæ¥:</p>

<pre><code class="language-JS">const moduleA = {
  // ...
  getters: {
    sumWithRootCount (state, getters, rootState) {
      return state.count + rootState.count
    }
  }
}
</code></pre>

<h3 id="å‘½åç©ºé—´-namespace">å‘½åç©ºé—´ namespace</h3>

<p>é»˜è®¤æƒ…å†µä¸‹ï¼Œæ¨¡å—å†…éƒ¨çš„ actionã€mutation å’Œ getter æ˜¯æ³¨å†Œåœ¨å…¨å±€å‘½åç©ºé—´çš„â€”â€”è¿™æ ·ä½¿å¾—å¤šä¸ªæ¨¡å—èƒ½å¤Ÿå¯¹åŒä¸€ mutation æˆ– action ä½œå‡ºå“åº”ã€‚å¦‚æœå¸Œæœ›ä½ çš„æ¨¡å—å…·æœ‰æ›´é«˜çš„å°è£…åº¦å’Œå¤ç”¨æ€§ï¼Œä½ å¯ä»¥é€šè¿‡æ·»åŠ  <code class="highlighter-rouge">namespaced: true</code> çš„æ–¹å¼ä½¿å…¶æˆä¸ºå¸¦å‘½åç©ºé—´çš„æ¨¡å—ã€‚å½“æ¨¡å—è¢«æ³¨å†Œåï¼Œå®ƒçš„æ‰€æœ‰ getterã€action åŠ mutation éƒ½ä¼šè‡ªåŠ¨æ ¹æ®æ¨¡å—æ³¨å†Œçš„è·¯å¾„è°ƒæ•´å‘½åã€‚ä¾‹å¦‚:</p>

<pre><code class="language-JS">const store = new Vuex.Store({
  modules: {
    account: {
      namespaced: true,

      // æ¨¡å—å†…å®¹ï¼ˆmodule assetsï¼‰
      state: { ... }, // æ¨¡å—å†…çš„çŠ¶æ€å·²ç»æ˜¯åµŒå¥—çš„äº†ï¼Œä½¿ç”¨ `namespaced` å±æ€§ä¸ä¼šå¯¹å…¶äº§ç”Ÿå½±å“
      getters: {
        isAdmin () { ... } // -&gt; getters['account/isAdmin']
      },
      actions: {
        login () { ... } // -&gt; dispatch('account/login')
      },
      mutations: {
        login () { ... } // -&gt; commit('account/login')
      },

      // åµŒå¥—æ¨¡å—
      modules: {
        // ç»§æ‰¿çˆ¶æ¨¡å—çš„å‘½åç©ºé—´
        myPage: {
          state: { ... },
          getters: {
            profile () { ... } // -&gt; getters['account/profile']
          }
        },

        // è¿›ä¸€æ­¥åµŒå¥—å‘½åç©ºé—´
        posts: {
          namespaced: true,

          state: { ... },
          getters: {
            popular () { ... } // -&gt; getters['account/posts/popular']
          }
        }
      }
    }
  }
})
</code></pre>

<h3 id="rootstate--rootgetter">rootState / rootGetter</h3>

<p>å¦‚æœä½ å¸Œæœ›ä½¿ç”¨å…¨å±€ state å’Œ getterï¼Œ<strong>rootState</strong> å’Œ <strong>rootGetter</strong> ä¼šä½œä¸ºç¬¬ä¸‰å’Œç¬¬å››å‚æ•°ä¼ å…¥ getterï¼Œä¹Ÿä¼šé€šè¿‡ context å¯¹è±¡çš„å±æ€§ä¼ å…¥ actionã€‚
è‹¥éœ€è¦åœ¨å…¨å±€å‘½åç©ºé—´å†…åˆ†å‘ action æˆ–æäº¤ mutationï¼Œå°† <code class="highlighter-rouge">{ root: true }</code> ä½œä¸ºç¬¬ä¸‰å‚æ•°ä¼ ç»™ dispatch æˆ– commit å³å¯:</p>

<pre><code class="language-JS">modules: {
  foo: {
    namespaced: true,

    getters: {
      // åœ¨è¿™ä¸ªæ¨¡å—çš„ getter ä¸­ï¼Œ`getters` è¢«å±€éƒ¨åŒ–äº†
      // ä½ å¯ä»¥ä½¿ç”¨ getter çš„ç¬¬å››ä¸ªå‚æ•°æ¥è°ƒç”¨ `rootGetters`
      someGetter (state, getters, rootState, rootGetters) {
        getters.someOtherGetter // -&gt; 'foo/someOtherGetter'
        rootGetters.someOtherGetter // -&gt; 'someOtherGetter'
      },
      someOtherGetter: state =&gt; { ... }
    },

    actions: {
      // åœ¨è¿™ä¸ªæ¨¡å—ä¸­ï¼Œ dispatch å’Œ commit ä¹Ÿè¢«å±€éƒ¨åŒ–äº†
      // ä»–ä»¬å¯ä»¥æ¥å— `root` å±æ€§ä»¥è®¿é—®æ ¹ dispatch æˆ– commit
      someAction ({ dispatch, commit, getters, rootGetters }) {
        getters.someGetter // -&gt; 'foo/someGetter'
        rootGetters.someGetter // -&gt; 'someGetter'

        dispatch('someOtherAction') // -&gt; 'foo/someOtherAction'
        dispatch('someOtherAction', null, { root: true }) // -&gt; 'someOtherAction'

        commit('someMutation') // -&gt; 'foo/someMutation'
        commit('someMutation', null, { root: true }) // -&gt; 'someMutation'
      },
      someOtherAction (ctx, payload) { ... }
    }
  }
}
</code></pre>

<p>è‹¥éœ€è¦åœ¨å¸¦å‘½åç©ºé—´çš„æ¨¡å—æ³¨å†Œå…¨å±€ actionï¼Œä½ å¯æ·»åŠ  <code class="highlighter-rouge">root: true</code>ï¼Œå¹¶å°†è¿™ä¸ª action çš„å®šä¹‰æ”¾åœ¨å‡½æ•° <code class="highlighter-rouge">handler</code> ä¸­ã€‚ä¾‹å¦‚:</p>

<pre><code class="language-JS">{
  actions: {
    someOtherAction ({dispatch}) {
      dispatch('someAction')
    }
  },
  modules: {
    foo: {
      namespaced: true,

      actions: {
        someAction: {
          root: true,
          handler (namespacedContext, payload) { ... } // -&gt; 'someAction'
        }
      }
    }
  }
}
</code></pre>

<h3 id="createnamespacedhelpers">createNamespacedHelpers</h3>

<p>å½“ä½¿ç”¨ <code class="highlighter-rouge">mapStateã€mapGettersã€mapActionsã€mapMutations</code> è¿™äº›å‡½æ•°æ¥ç»‘å®šå¸¦å‘½åç©ºé—´çš„æ¨¡å—æ—¶ï¼Œå†™èµ·æ¥å¯èƒ½æ¯”è¾ƒç¹ç:</p>

<pre><code class="language-JS">computed: {
  ...mapState({
    a: state =&gt; state.some.nested.module.a,
    b: state =&gt; state.some.nested.module.b
  })
},
methods: {
  ...mapActions([
    'some/nested/module/foo', // -&gt; this['some/nested/module/foo']()
    'some/nested/module/bar' // -&gt; this['some/nested/module/bar']()
  ])
}
</code></pre>

<p>å¯¹äºè¿™ç§æƒ…å†µï¼Œä½ å¯ä»¥å°†æ¨¡å—çš„ç©ºé—´åç§°å­—ç¬¦ä¸²ä½œä¸ºç¬¬ä¸€ä¸ªå‚æ•°ä¼ é€’ç»™ä¸Šè¿°å‡½æ•°ï¼Œè¿™æ ·æ‰€æœ‰ç»‘å®šéƒ½ä¼šè‡ªåŠ¨å°†è¯¥æ¨¡å—ä½œä¸ºä¸Šä¸‹æ–‡ã€‚äºæ˜¯ä¸Šé¢çš„ä¾‹å­å¯ä»¥ç®€åŒ–ä¸º:</p>

<pre><code class="language-JS">computed: {
  ...mapState('some/nested/module', {
    a: state =&gt; state.a,
    b: state =&gt; state.b
  })
},
methods: {
  ...mapActions('some/nested/module', [
    'foo', // -&gt; this.foo()
    'bar' // -&gt; this.bar()
  ])
}
</code></pre>

<p>è€Œä¸”ï¼Œä½ å¯ä»¥é€šè¿‡ä½¿ç”¨ <strong>createNamespacedHelpers</strong> åˆ›å»ºåŸºäºæŸä¸ªå‘½åç©ºé—´è¾…åŠ©å‡½æ•°ã€‚å®ƒè¿”å›ä¸€ä¸ªå¯¹è±¡ï¼Œå¯¹è±¡é‡Œæœ‰æ–°çš„ç»‘å®šåœ¨ç»™å®šå‘½åç©ºé—´å€¼ä¸Šçš„ç»„ä»¶ç»‘å®šè¾…åŠ©å‡½æ•°:</p>

<pre><code class="language-JS">import { createNamespacedHelpers } from 'vuex'

const { mapState, mapActions } = createNamespacedHelpers('some/nested/module')

export default {
  computed: {
    // åœ¨ `some/nested/module` ä¸­æŸ¥æ‰¾
    ...mapState({
      a: state =&gt; state.a,
      b: state =&gt; state.b
    })
  },
  methods: {
    // åœ¨ `some/nested/module` ä¸­æŸ¥æ‰¾
    ...mapActions([
      'foo',
      'bar'
    ])
  }
}
</code></pre>

<h3 id="åŠ¨æ€æ³¨å†Œ-registermodule">åŠ¨æ€æ³¨å†Œ registerModule</h3>

<p>åœ¨ store åˆ›å»ºä¹‹åï¼Œä½ å¯ä»¥ä½¿ç”¨ <code class="highlighter-rouge">store.registerModule</code> æ–¹æ³•æ³¨å†Œæ¨¡å—:</p>

<pre><code class="language-JS">// æ³¨å†Œæ¨¡å— `myModule`
store.registerModule('myModule', {
  // ...
})
// æ³¨å†ŒåµŒå¥—æ¨¡å— `nested/myModule`
store.registerModule(['nested', 'myModule'], {
  // ...
})
// ä¹‹åå°±å¯ä»¥é€šè¿‡ store.state.myModule å’Œ store.state.nested.myModule è®¿é—®æ¨¡å—çš„çŠ¶æ€
</code></pre>

<p>æ¨¡å—åŠ¨æ€æ³¨å†ŒåŠŸèƒ½ä½¿å¾—å…¶ä»– Vue æ’ä»¶å¯ä»¥é€šè¿‡åœ¨ store ä¸­é™„åŠ æ–°æ¨¡å—çš„æ–¹å¼æ¥ä½¿ç”¨ Vuex ç®¡ç†çŠ¶æ€ã€‚ä¾‹å¦‚ï¼Œ<code class="highlighter-rouge">vuex-router-sync</code> æ’ä»¶å°±æ˜¯é€šè¿‡åŠ¨æ€æ³¨å†Œæ¨¡å—å°† vue-router å’Œ vuex ç»“åˆåœ¨ä¸€èµ·ï¼Œå®ç°åº”ç”¨çš„è·¯ç”±çŠ¶æ€ç®¡ç†ã€‚</p>

<p>åœ¨æ³¨å†Œä¸€ä¸ªæ–° module æ—¶ï¼Œä½ å¾ˆæœ‰å¯èƒ½æƒ³ä¿ç•™è¿‡å»çš„ stateï¼Œä¾‹å¦‚ä»ä¸€ä¸ªæœåŠ¡ç«¯æ¸²æŸ“çš„åº”ç”¨ä¿ç•™ stateã€‚ä½ å¯ä»¥é€šè¿‡ <strong>preserveState</strong> é€‰é¡¹å°†å…¶å½’æ¡£:</p>

<pre><code class="language-JS">store.registerModule('a', module, { preserveState: true })
</code></pre>

<p>å½“ä½ è®¾ç½® <code class="highlighter-rouge">preserveState: true</code> æ—¶ï¼Œè¯¥æ¨¡å—ä¼šè¢«æ³¨å†Œï¼Œactionã€mutation å’Œ getter ä¼šè¢«æ·»åŠ åˆ° store ä¸­ï¼Œä½†æ˜¯ state ä¸ä¼šã€‚è¿™é‡Œå‡è®¾ store çš„ state å·²ç»åŒ…å«äº†è¿™ä¸ª module çš„ state å¹¶ä¸”ä½ ä¸å¸Œæœ›å°†å…¶è¦†å†™ã€‚</p>

<blockquote>
  <p>ä¹Ÿå¯ä»¥ä½¿ç”¨ <code class="highlighter-rouge">store.unregisterModule(moduleName)</code> æ¥åŠ¨æ€å¸è½½æ¨¡å—ã€‚æ³¨æ„ï¼Œä½ ä¸èƒ½ä½¿ç”¨æ­¤æ–¹æ³•å¸è½½é™æ€æ¨¡å—ï¼ˆå³åˆ›å»º store æ—¶å£°æ˜çš„æ¨¡å—ï¼‰</p>
</blockquote>

<p>å¯¹äºå¤§å‹åº”ç”¨ï¼Œæˆ‘ä»¬ä¼šå¸Œæœ›æŠŠ Vuex ç›¸å…³ä»£ç åˆ†å‰²åˆ°æ¨¡å—ä¸­ã€‚ä¸‹é¢æ˜¯é¡¹ç›®ç»“æ„ç¤ºä¾‹:</p>

<pre><code class="language-TEXT">â”œâ”€â”€ index.html
â”œâ”€â”€ main.js
â”œâ”€â”€ api
â”‚   â””â”€â”€ ... # æŠ½å–å‡ºAPIè¯·æ±‚
â”œâ”€â”€ components
â”‚   â”œâ”€â”€ App.vue
â”‚   â””â”€â”€ ...
â””â”€â”€ store
    â”œâ”€â”€ index.js          # æˆ‘ä»¬ç»„è£…æ¨¡å—å¹¶å¯¼å‡º store çš„åœ°æ–¹
    â”œâ”€â”€ actions.js        # æ ¹çº§åˆ«çš„ action
    â”œâ”€â”€ mutations.js      # æ ¹çº§åˆ«çš„ mutation
    â””â”€â”€ modules
        â”œâ”€â”€ cart.js       # è´­ç‰©è½¦æ¨¡å—
        â””â”€â”€ products.js   # äº§å“æ¨¡å—
</code></pre>

<blockquote>
  <p>ä»¥ä¸Šç¤ºä¾‹å¯ä»¥ç›´æ¥å‚è€ƒå®˜æ–¹ <a href="https://github.com/vuejs/vuex/tree/dev/examples">github examples</a> ğŸ‘ˆ</p>
</blockquote>

<h2 id="æ’ä»¶-plugins">æ’ä»¶ plugins</h2>

<p>Vuex çš„ store æ¥å— <strong>plugins</strong> é€‰é¡¹ï¼Œè¿™ä¸ªé€‰é¡¹æš´éœ²å‡ºæ¯æ¬¡ mutation çš„é’©å­ã€‚Vuex æ’ä»¶å°±æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå®ƒæ¥æ”¶ store ä½œä¸ºå”¯ä¸€å‚æ•°:</p>

<pre><code class="language-JS">const myPlugin = store =&gt; {
  // å½“ store åˆå§‹åŒ–åè°ƒç”¨
  store.subscribe((mutation, state) =&gt; {
    // æ¯æ¬¡ mutation ä¹‹åè°ƒç”¨
    // mutation çš„æ ¼å¼ä¸º { type, payload }
  })
}
</code></pre>

<p>æ¯”å¦‚å†…ç½®çš„æ‰“å°æ—¥å¿—æ’ä»¶ <code class="highlighter-rouge">createLogger</code>:</p>

<pre><code class="language-JS">// åœ¨ä¸¥æ ¼æ¨¡å¼ä¸‹ï¼Œæ— è®ºä½•æ—¶å‘ç”Ÿäº†çŠ¶æ€å˜æ›´ä¸”ä¸æ˜¯ç”± mutation å‡½æ•°å¼•èµ·çš„ï¼Œå°†ä¼šæŠ›å‡ºé”™è¯¯ã€‚è¿™èƒ½ä¿è¯æ‰€æœ‰çš„çŠ¶æ€å˜æ›´éƒ½èƒ½è¢«è°ƒè¯•å·¥å…·è·Ÿè¸ªåˆ°
// ä¸¥æ ¼æ¨¡å¼ä¼šæ·±åº¦ç›‘æµ‹çŠ¶æ€æ ‘æ¥æ£€æµ‹ä¸åˆè§„çš„çŠ¶æ€å˜æ›´ï¼Œè¯·ç¡®ä¿åœ¨å‘å¸ƒç¯å¢ƒä¸‹å…³é—­ä¸¥æ ¼æ¨¡å¼ï¼Œä»¥é¿å…æ€§èƒ½æŸå¤±
import createLogger from 'vuex/dist/logger'

const debug = process.env.NODE_ENV !== 'production'

export default new Vuex.Store({
  modules: {
    cart
  },
  strict: debug,
  plugins: debug ? [createLogger()] : []
})
</code></pre>

<p>createLogger è¿˜æ”¯æŒä¸€äº›è‡ªå®šä¹‰å±æ€§:</p>

<pre><code class="language-JS">const logger = createLogger({
  collapsed: false, // è‡ªåŠ¨å±•å¼€è®°å½•çš„ mutation
  filter (mutation, stateBefore, stateAfter) {
    // è‹¥ mutation éœ€è¦è¢«è®°å½•ï¼Œå°±è®©å®ƒè¿”å› true å³å¯
    // é¡ºä¾¿ï¼Œ`mutation` æ˜¯ä¸ª { type, payload } å¯¹è±¡
    return mutation.type !== "aBlacklistedMutation"
  },
  transformer (state) {
    // åœ¨å¼€å§‹è®°å½•ä¹‹å‰è½¬æ¢çŠ¶æ€
    // ä¾‹å¦‚ï¼Œåªè¿”å›æŒ‡å®šçš„å­æ ‘
    return state.subTree
  },
  mutationTransformer (mutation) {
    // mutation æŒ‰ç…§ { type, payload } æ ¼å¼è®°å½•
    // æˆ‘ä»¬å¯ä»¥æŒ‰ä»»æ„æ–¹å¼æ ¼å¼åŒ–
    return mutation.type
  },
  logger: console, // è‡ªå®šä¹‰ console å®ç°ï¼Œé»˜è®¤ä¸º `console`
})
</code></pre>

<h2 id="çƒ­é‡è½½">çƒ­é‡è½½</h2>

<p>å¯¹äº mutation å’Œæ¨¡å—ï¼Œä½ éœ€è¦ä½¿ç”¨ <code class="highlighter-rouge">store.hotUpdate()</code> æ–¹æ³•:</p>

<pre><code class="language-JS">// store.js
import Vue from 'vue'
import Vuex from 'vuex'
import mutations from './mutations'
import moduleA from './modules/a'

Vue.use(Vuex)

const state = { ... }

const store = new Vuex.Store({
  state,
  mutations,
  modules: {
    a: moduleA
  }
})

if (module.hot) {
  // ä½¿ action å’Œ mutation æˆä¸ºå¯çƒ­é‡è½½æ¨¡å—
  module.hot.accept(['./mutations', './modules/a'], () =&gt; {
    // è·å–æ›´æ–°åçš„æ¨¡å—
    // å› ä¸º babel 6 çš„æ¨¡å—ç¼–è¯‘æ ¼å¼é—®é¢˜ï¼Œè¿™é‡Œéœ€è¦åŠ ä¸Š `.default`
    const newMutations = require('./mutations').default
    const newModuleA = require('./modules/a').default
    // åŠ è½½æ–°æ¨¡å—
    store.hotUpdate({
      mutations: newMutations,
      modules: {
        a: newModuleA
      }
    })
  })
}
</code></pre>

<h2 id="å‚è€ƒé“¾æ¥">å‚è€ƒé“¾æ¥</h2>

<ol>
  <li><a href="https://vuex.vuejs.org/zh/guide/">Vuex å®˜æ–¹æ–‡æ¡£</a></li>
</ol>
 
<div id="gitalk-container"></div>
<script>
    var gitalk = new Gitalk({
      enable: true,
      clientID: '020f142489f80c92b097',
      clientSecret: '1fa083372b44031cf1b8249251515c4e3d54c69d',
      repo: 'tate-young.github.io',
      owner: 'Tate-Young',
      admin: ['Tate-Young'],
      id: location.pathname,      // Ensure uniqueness and length less than 50
      distractionFreeMode: false  // Facebook-like distraction free mode
    })

    gitalk.render('gitalk-container')
</script>
<!-- disqus -->
<!-- <div id="disqus_thread"></div>
<script>
    /**
     *  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
     *  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables
     */

    var disqus_config = function () {
        this.page.url = 'https://tate-young.github.io/2019/08/06/vuex-profile.html';
        this.page.identifier = '/2019/08/06/vuex-profile';
        this.page.title = 'Vuex ç®€ä»‹';
    };

    (function () { // REQUIRED CONFIGURATION VARIABLE: EDIT THE SHORTNAME BELOW
        var d = document,
            s = d.createElement('script');

        s.src = '//tate.disqus.com/embed.js'; // IMPORTANT: Replace EXAMPLE with your forum shortname!

        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the
    <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a>
</noscript> -->


            <!-- <p class="post-info">
			æœ¬æ–‡ç”± <a href="/">liberxue</a> åˆ›ä½œï¼Œé‡‡ç”¨ <a href="https://creativecommons.org/licenses/by/4.0/" target="_blank" rel="external nofollow">çŸ¥è¯†å…±äº«ç½²å4.0</a> å›½é™…è®¸å¯åè®®è¿›è¡Œè®¸å¯<br>æœ¬ç«™æ–‡ç« é™¤æ³¨æ˜è½¬è½½/å‡ºå¤„å¤–ï¼Œå‡ä¸ºæœ¬ç«™åŸåˆ›æˆ–ç¿»è¯‘ï¼Œè½¬è½½å‰è¯·åŠ¡å¿…ç½²å<br>æœ€åç¼–è¾‘æ—¶é—´ä¸º:2019-08-06 16:08:00</p> -->
        </div>
    </article>

    <!-- <div class="related-post-lists">
	<div class="post-lists">
		<div class="post-lists-body">
					<div class="post-list-item">
				<div class="post-list-item-container">
					<div class="item-label">
						<div class="item-title"><a href="induction.html">å½’çº³çš„éšæƒ³</a></div>
						<div class="item-meta clearfix">
														<div class="item-meta-ico bg-ico-image" style="background: url('../usr/themes/pinghsu/images/bg-ico.png') no-repeat;background-size: 40px auto;"></div>
	                        							<div class="item-meta-cat"><a href="../category/thoughts/index.html">Thoughts</a></div>
						</div>
					</div>
				</div>
			</div>
				</div>
	</div>
</div> -->

    <!-- <footer class="footer bg-white">
	<div class="footer-social">
		<div class="footer-container clearfix">
			<div class="social-list">
	 <a class="social segmentfault" target="blank" href="https://segmentfault.com/u/liberxue" title="è®¿é—® LiberXue_Twitter" data-hover="Segmentfault">Segmentfault</a>
    <a class="social github" target="blank" href="https://github.com/liberxue" title="è®¿é—® LiberXue_Twitter" data-hover="GitHub">GitHub</a>
    <a class="social twitter" target="blank" href="http://twitter.com/liberxue" title="è®¿é—® LiberXue_Twitter" data-hover="Twitter">Twitter</a>
     <a class="social stackoverflow" target="blank" href="https://stackoverflow.com/users/6902190/liberxue" title="è®¿é—® LiberXue_stackoverflow" data-hover="StackOverflow">StackOverflow</a>
          <a class="social oschina" target="blank" href="https://my.oschina.net/bolanzw" title="è®¿é—® LiberXue_Oschina" data-hover="Oschina">Oschina</a>
     <a class="social rss" target="blank" href="/feed.xml"title="è®¿é—® LiberXue_RSS" data-hover="RSS">RSS</a>
	</div>
		</div>
	</div>
	<div class="footer-meta">
        <div class="footer-container">
            <div class="meta-item meta-copyright">
                <div class="meta-copyright-info">
                    <a href="/" class="info-logo">
                         <img src="http://localhost:2333/style/images/logo-liberxue.png"   title="è®¿é—® LiberXue_blog" data-hover="LiberXue_blog" alt="LiberXue_blog" /> </a>
                    <div class="info-text">
                        <p>Theme is <a href="http://www.liberxue.com/2017/08/03/Jekyllthemes.html" title="è®¿é—® Jekyll liberxueä¸»é¢˜"  data-hover="Jekyll liberxue"target="_blank">Jekyll liberxue</a> by <a href="http://www.liberxue.com/about" target="_blank">liberxue</a></p>
                        <p>Powered by <a href="http://localhost:2333/tags/#Jekyll" title="Jekyll" data-hover="Jekyll" target="_blank" rel="nofollow">Jekyll</a></p>
                        <p>&copy; 2017 <a href="/feed.xml"  title="è®¿é—® liberxue blog RSS" data-hover="liberxue blog RSS">liberxue blog RSS</a></p>
                        <p>æ€»è®¡æ–‡ç« ï¼šç¯‡</p>
                      <p>æœ¬blogå·²å¼€æºç‚¹å‡»Fork</p><iframe src="http://ghbtns.com/github-btn.html?user=liberxue&repo=liberxue.github.io&type=fork&count=true" allowtransparency="true" frameborder="0" scrolling="0" width="95" height="20"></iframe>
                    </div>
                </div>
            </div>
            <div class="meta-item meta-posts">
                <h3 class="meta-title">ç½®é¡¶æ–‡ç« </h3>
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
            </div>
            <div class="meta-item meta-comments">
                <h3 class="meta-title">æœ€æ–°æ–‡ç« </h3>
  
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
</div>
		</div>
    </div>
</footer> -->
<script src="//cdn.bootcss.com/jquery/2.2.2/jquery.min.js"></script>
<script src="//cdn.bootcss.com/bootstrap-3-typeahead/4.0.2/bootstrap3-typeahead.js"></script>
<script async src="/search/js/520.js"></script>
<script async src="/search/js/gtag.js"></script>
<script async src="/search/live2d/autoload.js"></script>
<!-- <script src="/search/js/canvas.js"></script> -->

<script>
    $(function () {
        setTimeout(function () {
            $('code').removeClass('hljs');
            $('code').removeClass('language');
        }, 90);
    });
    (function () {
        var bp = document.createElement('script');
        var curProtocol = window.location.protocol.split(':')[0];
        if (curProtocol === 'https') {
            bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
        } else {
            bp.src = 'http://push.zhanzhang.baidu.com/push.js';
        }
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(bp, s);
    })();
</script>

    <!--liberxueconnnet-menu-->
    <div id="directory-content" class="directory-content">
        <div id="directory"></div>
    </div>
    <!--liberxueconnnet-menu-->
    <script>
      const directoryContainer = document.getElementById('directory')
      const postTitle = document.getElementsByClassName('post-title')[0]
      var postDirectoryBuild = function () {
        var postChildren = function children(childNodes, reg) {
          var result = [],
              isReg = typeof reg === 'object',
              isStr = typeof reg === 'string',
              node, i, len;
          for (i = 0, len = childNodes.length; i < len; i++) {
            node = childNodes[i];
            if ((node.nodeType === 1 || node.nodeType === 9) &&
              (!reg ||
                  isReg && reg.test(node.tagName.toLowerCase()) ||
                  isStr && node.tagName.toLowerCase() === reg)) {
                result.push(node);
              }
            }
            return result;
          },
          createPostDirectory = function (article, directory, isDirNum) {
            var contentArr = [],
                titleId = [],
                levelArr, root, level,
                currentList, list, li, link, i, len;
            levelArr = (function (article, contentArr, titleId) {
                  var titleElem = postChildren(article.childNodes, /^h\d$/),
                      levelArr = [],
                      lastNum = 1,
                      lastRevNum = 1,
                      count = 0,
                      guid = 1,
                      id = 'directory' + (Math.random() + '').replace(/\D/, ''),
                      lastRevNum, num, elem;
                  while (titleElem.length) {
                      elem = titleElem.shift();
                      contentArr.push(elem.innerHTML);
                      num = +elem.tagName.match(/\d/)[0];
                      if (num > lastNum) {
                          levelArr.push(1);
                          lastRevNum += 1;
                      } else if (num === lastRevNum ||
                          num > lastRevNum && num <= lastNum) {
                          levelArr.push(0);
                          lastRevNum = lastRevNum;
                      } else if (num < lastRevNum) {
                          levelArr.push(num - lastRevNum);
                          lastRevNum = num;
                      }
                      count += levelArr[levelArr.length - 1];
                      lastNum = num;
                      elem.id = elem.id || (id + guid++);
                      titleId.push(elem.id);
                  }
                  if (count !== 0 && levelArr[0] === 1) levelArr[0] = 0;

                  return levelArr;
              })(article, contentArr, titleId);
              currentList = root = document.createElement('ul');
              dirNum = [0];
              for (i = 0, len = levelArr.length; i < len; i++) {
                  level = levelArr[i];
                  if (level === 1) {
                      list = document.createElement('ul');
                      if (!currentList.lastElementChild) {
                          currentList.appendChild(document.createElement('li'));
                      }
                      currentList.lastElementChild.appendChild(list);
                      currentList = list;
                      dirNum.push(0);
                  } else if (level < 0) {
                      level *= 2;
                      while (level++) {
                          if (level % 2) dirNum.pop();
                          currentList = currentList.parentNode;
                      }
                  }
                  dirNum[dirNum.length - 1]++;
                  li = document.createElement('li');
                  link = document.createElement('a');
                  link.name = '#' + titleId[i];
                  link.href = 'Javascript:;'
                  link.className = "post-aside-anchor"
                  link.title = 'è®¿é—®' + titleId[i];
                  link.innerHTML = !isDirNum ? contentArr[i] :
                      dirNum.join('.') + ' ' + contentArr[i];
                  li.appendChild(link);
                  currentList.appendChild(li);
              }
            directory.appendChild(root);
          };
        createPostDirectory(document.getElementById('post-content'), directoryContainer, true);
      };
      postDirectoryBuild();
    </script>
    <script>
      // gtag('config', GA_TRACKING_ID, {
      //   'page_title' : 'Blog',
      //   'page_path': window.location.pathname,
      //   'post_title': 'watttsdfasdf',
      // });

    </script>
    <script src="//cdn.bootcss.com/highlight.js/9.12.0/highlight.min.js"></script>
    <script>
        lang = hljs.initHighlightingOnLoad();
    </script>
</body>

</html>
