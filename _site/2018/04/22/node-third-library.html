
<!DOCTYPE>
<html lang="zh-cn" data-scribe-reduced-action-queue="true">
<head>
    <meta content='Node å¸¸ç”¨åº“ - Tate & Snow' name='title' />
    <meta content='Node å¸¸ç”¨åº“ - Tate & Snow' name='og:title' />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.css">
    <script src="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.js"></script>
    <title>Node å¸¸ç”¨åº“ - Tate & Snow</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<title>Node å¸¸ç”¨åº“ - Tate & Snow</title>
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Node å¸¸ç”¨åº“ - Tate & Snow">
<meta name="twitter:keywords" content="Node å¸¸ç”¨åº“ - Tate & Snow" property='og:description' />
<meta property="og:type" content="article">
<meta property="og:title" content="Node å¸¸ç”¨åº“ - Tate & Snow">
<meta name="og:keywords" content="Node å¸¸ç”¨åº“ - Tate & Snow|Node å¸¸ç”¨åº“å¸¸ç”¨åº“ç»Ÿè®¡æœ¬æ–‡ä¸»è¦æ”¶é›† Node ä¸­å¥½ç”¨çš„åº“ï¼Œä¹Ÿæœ‰åŒ…å« Express æ¡†æ¶çš„ä¸­é—´ä»¶ç­‰ï¼Œæ²¡æœ‰å±€é™æ€§:            Node      æè¿°      æ —å­                  cheerio  ..."
  property='og:description' />
<link rel="icon" type="image/png" href="http://localhost:2333/style/favicons/favicon.ico" />
<link href="http://localhost:2333/style/favicons/favicon.ico" rel="shortcut icon" type="image/png">
<link rel="canonical" href="http://localhost:2333/">
<link rel="alternate" type="application/rss+xml" title="Liberxue" href="http://localhost:2333/feed.xml">
<meta charset="UTF-8">
<link rel="manifest" href="/manifest.json">
<link rel="shortcut icon" href="http://localhost:2333/style/favicons/favicon.ico" type="image/x-icon">
<meta name="keywords" content="Node å¸¸ç”¨åº“å¸¸ç”¨åº“ç»Ÿè®¡æœ¬æ–‡ä¸»è¦æ”¶é›† Node ä¸­å¥½ç”¨çš„åº“ï¼Œä¹Ÿæœ‰åŒ…å« Express æ¡†æ¶çš„ä¸­é—´ä»¶ç­‰ï¼Œæ²¡æœ‰å±€é™æ€§:            Node      æè¿°      æ —å­                  cheerio  ..." property='og:description'
/>
<meta name="description" content="Tate & Snow's Github blog" />
<link href="https://cdn.bootcss.com/highlight.js/9.10.0/styles/xcode.min.css" rel="stylesheet">
<link href="http://localhost:2333/style/theme.css" rel="stylesheet"> 
<meta content='http://localhost:2333/2018/04/22/node-third-library.html' property='og:url' />
<meta content="http://localhost:2333/2018/04/22/node-third-library.html|Node å¸¸ç”¨åº“å¸¸ç”¨åº“ç»Ÿè®¡æœ¬æ–‡ä¸»è¦æ”¶é›† Node ä¸­å¥½ç”¨çš„åº“ï¼Œä¹Ÿæœ‰åŒ…å« Express æ¡†æ¶çš„ä¸­é—´ä»¶ç­‰ï¼Œæ²¡æœ‰å±€é™æ€§:            Node      æè¿°      æ —å­                  cheerio  ..." property='og:description'
/>
<meta content="article" property="og:type" /> 

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-136311746-1"></script>
<!-- <script async src="https://cdn.jsdelivr.net/npm/jquery/dist/jquery.min.js"></script> -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome/css/font-awesome.min.css"/>
<script>
  window.dataLayer = window.dataLayer || [];
  window.GA_TRACKING_ID = 'UA-136311746-1'
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('set', {
    'country': 'US',
    'currency': 'USD',
    'description': 'fuck',
  });
  gtag('config', GA_TRACKING_ID, {
    'custom_map': {
      'dimension1': 'post_title',
    },
    'post_title': 'test',
  });
</script>
<meta content="" property="fb:app_id" />
<!-- Begin Jekyll SEO tag v2.6.1 -->
<title>Node å¸¸ç”¨åº“ | Tate &amp; Snow</title>
<meta name="generator" content="Jekyll v3.8.7" />
<meta property="og:title" content="Node å¸¸ç”¨åº“" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Node å¸¸ç”¨åº“" />
<meta property="og:description" content="Node å¸¸ç”¨åº“" />
<link rel="canonical" href="http://localhost:2333/2018/04/22/node-third-library.html" />
<meta property="og:url" content="http://localhost:2333/2018/04/22/node-third-library.html" />
<meta property="og:site_name" content="Tate &amp; Snow" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2018-04-22T15:14:00+08:00" />
<script type="application/ld+json">
{"description":"Node å¸¸ç”¨åº“","mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:2333/2018/04/22/node-third-library.html"},"@type":"BlogPosting","url":"http://localhost:2333/2018/04/22/node-third-library.html","headline":"Node å¸¸ç”¨åº“","dateModified":"2018-04-22T15:14:00+08:00","datePublished":"2018-04-22T15:14:00+08:00","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->

<script>
  (function (d, s, id) {
    var js, fjs = d.getElementsByTagName(s)[0];
    if (d.getElementById(id)) return;
    js = d.createElement(s);
    js.id = id;
    js.src = "//connect.facebook.net/en_GB/all.js#xfbml=1&appId=";
    fjs.parentNode.insertBefore(js, fjs);
  }(document, 'script', 'facebook-jssdk'));
</script>

</head>

<body class="dark-theme" gtools_scp_screen_capture_injected="true">
    <header id="header" class="header bg-white">
        <div class="navbar-container">
            <a href="Javascript:;" onclick="onClickLogo()" title="è®¿é—® Tate & Snow" class="navbar-logo menu-logo">
                <img src="http://localhost:2333/style/images/tate.png" alt="Tate & Snow"> </a>
            <!-- <a href="/?tate" title="è®¿é—® Tate & Snow" class="navbar-logo">Tate & Snow</a>   -->
            <div class="navbar-menu">
                
                  <a class=" menu-item-categories " href="Javascript:;" onclick="onClickMenu('é¦–é¡µ', '/')" title="è®¿é—® é¦–é¡µ" data-hover="é¦–é¡µ">é¦–é¡µ</a>
                
                  <a class=" menu-item-categories " href="Javascript:;" onclick="onClickMenu('å‰ç«¯', '/front')" title="è®¿é—® å‰ç«¯" data-hover="å‰ç«¯">å‰ç«¯</a>
                
                  <a class=" menu-item-categories " href="Javascript:;" onclick="onClickMenu('å†å²', '/history')" title="è®¿é—® å†å²" data-hover="å†å²">å†å²</a>
                
                  <a class=" menu-item-categories " href="Javascript:;" onclick="onClickMenu('å…¶ä»–', '/other')" title="è®¿é—® å…¶ä»–" data-hover="å…¶ä»–">å…¶ä»–</a>
                
                  <a class=" menu-item-categories " href="Javascript:;" onclick="onClickMenu('æ ‡ç­¾', '/tags')" title="è®¿é—® æ ‡ç­¾" data-hover="æ ‡ç­¾">æ ‡ç­¾</a>
                
                  <a class=" menu-item-about " href="Javascript:;" onclick="onClickMenu('å…³äº', '/README')" title="è®¿é—® å…³äº" data-hover="å…³äº">å…³äº</a>
                
            </div>
            <!-- <div class="navbar-menu">
                
                <a href="http://localhost:2333/">é¦–é¡µ</a>
                
                <a href="http://localhost:2333/front">å‰ç«¯</a>
                
                <a href="http://localhost:2333/history">å†å²</a>
                
                <a href="http://localhost:2333/other">å…¶ä»–</a>
                
                <a href="http://localhost:2333/tags">æ ‡ç­¾</a>
                
                <a href="http://localhost:2333/README">å…³äº</a>
                
            </div> -->
            <div class="navbar-search menu-item-search" onclick="onClickSearch()">
                <span class="icon-search"></span>
                <form id="cb-search-btn" role="search">
                    <span class="search-box">
                        <input type="text" class="input" id="cb-search-content" required="true" placeholder="æ ‡é¢˜ æ ‡ç­¾..." maxlength="30" autocomplete="off">
                    </span>
                </form>
            </div>
            <div class="navbar-mobile-menu" onclick="">
                <span class="icon-menu cross">
                    <span class="middle"></span>
                </span>
                <ul>
                    
                    <li>
                        <a class="menu-item-categories" href="Javascript:;" onclick="onClickMenu('é¦–é¡µ', 'http://localhost:2333/')">é¦–é¡µ</a>
                    </li>
                    
                    <li>
                        <a class="menu-item-categories" href="Javascript:;" onclick="onClickMenu('å‰ç«¯', 'http://localhost:2333/front')">å‰ç«¯</a>
                    </li>
                    
                    <li>
                        <a class="menu-item-categories" href="Javascript:;" onclick="onClickMenu('å†å²', 'http://localhost:2333/history')">å†å²</a>
                    </li>
                    
                    <li>
                        <a class="menu-item-categories" href="Javascript:;" onclick="onClickMenu('å…¶ä»–', 'http://localhost:2333/other')">å…¶ä»–</a>
                    </li>
                    
                    <li>
                        <a class="menu-item-categories" href="Javascript:;" onclick="onClickMenu('æ ‡ç­¾', 'http://localhost:2333/tags')">æ ‡ç­¾</a>
                    </li>
                    
                    <li>
                        <a class="menu-item-categories" href="Javascript:;" onclick="onClickMenu('å…³äº', 'http://localhost:2333/README')">å…³äº</a>
                    </li>
                    
                </ul>
            </div>
        </div>
    </header>
    <a href="#header" class="back-to-top" onclick="onClickTop('Node å¸¸ç”¨åº“')">â¤´Topâ¤´</a>
    <div class="post-header-thumb bg-white}">
        <div class="post-header-thumb-op"></div>
        <div class="post-header-thumb">
            <div class="post-header-thumb-container">
                <h1 class="post-title" itemprop="name headline">
                    Node å¸¸ç”¨åº“</h1>
                <div class="post-data">
                    <time datetime="2018-04-22 15:14:00" itemprop="datePublished">
                      å‘å¸ƒæ—¶é—´ï¼š2018-04-22 15:14:00
                      &nbsp;&nbsp;&nbsp;
                      
                    </time>
                    <a onclick="onClickCategory('åç«¯')" href="Javascript:;" title="è®¿é—® åç«¯" data-hover="åšå®¢åˆ†ç±»: åç«¯">åšå®¢åˆ†ç±»: åç«¯</a>
                    <!-- <a href="#read"> é˜…è¯»æ¬¡æ•°: comments</a>  -->
                </div>
                
                <div class="post-tags">
                       
                    <a class="menu-item-tags" href="Javascript:;" onclick="onClickTag('Node')" title="è®¿é—®Node" data-hover="Node">
                        Node
                        <span>(10)</span>
                        
                    </a>
                       
                </div>
            </div>
        </div>
    </div>
    <article class="main-content post-page" itemscope itemtype="http://schema.org/Article">
        <div class="post-header">
            <h1 class="post-title" itemprop="name headline">
                Node å¸¸ç”¨åº“</h1>
            <div class="post-data">
                <time datetime="2018-04-22 15:14:00" itemprop="datePublished">2018-04-22 15:14:00</time>
            </div>
        </div>
        <div id="post-content" class="post-content" itemprop="articleBody">
            <p class="post-tags">
                   
                <a href="Javascript:;" onclick="onClickTag('Node')" title="è®¿é—®Node" data-hover="Node">
                    Node
                    <span>(10)</span>
                    </a>
                   
            </p>
            <h1 id="node-å¸¸ç”¨åº“">Node å¸¸ç”¨åº“</h1>

<h2 id="å¸¸ç”¨åº“ç»Ÿè®¡">å¸¸ç”¨åº“ç»Ÿè®¡</h2>

<p>æœ¬æ–‡ä¸»è¦æ”¶é›† Node ä¸­å¥½ç”¨çš„åº“ï¼Œä¹Ÿæœ‰åŒ…å« Express æ¡†æ¶çš„ä¸­é—´ä»¶ç­‰ï¼Œæ²¡æœ‰å±€é™æ€§:</p>

<table>
  <thead>
    <tr>
      <th style="text-align: left">Node</th>
      <th style="text-align: left">æè¿°</th>
      <th style="text-align: left">æ —å­</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left"><strong><a href="https://github.com/cheeriojs/cheerio">cheerio</a></strong></td>
      <td style="text-align: left">ä»¥ jQuery ä¸ºæ ¸å¿ƒï¼Œè§£æå’Œæ“ä½œ DOM æ¨¡å‹ï¼Œå¦‚å®ç°ç½‘ç»œçˆ¬è™«</td>
      <td style="text-align: left"><code class="highlighter-rouge">require('cheerio')</code></td>
    </tr>
    <tr>
      <td style="text-align: left"><strong><a href="https://github.com/request/request">request</a></strong></td>
      <td style="text-align: left">ç²¾ç®€çš„ HTTP è¯·æ±‚å®¢æˆ·ç«¯</td>
      <td style="text-align: left"><code class="highlighter-rouge">require('request')</code></td>
    </tr>
    <tr>
      <td style="text-align: left"><strong><a href="https://github.com/markedjs/marked">marked</a></strong></td>
      <td style="text-align: left">è½¬æ¢ Markdown ä¸º Html æ˜¾ç¤º</td>
      <td style="text-align: left"><code class="highlighter-rouge">require('marked')</code></td>
    </tr>
    <tr>
      <td style="text-align: left"><strong><a href="https://github.com/chalk/chalk">chalk</a></strong></td>
      <td style="text-align: left">ä¿®æ”¹ç»ˆç«¯è¾“å‡ºä¿¡æ¯çš„æ ·å¼</td>
      <td style="text-align: left"><code class="highlighter-rouge">require('chalk')</code></td>
    </tr>
    <tr>
      <td style="text-align: left"><strong><a href="https://github.com/shelljs/shelljs">shelljs</a></strong></td>
      <td style="text-align: left">æ‰§è¡Œ shell å‘½ä»¤</td>
      <td style="text-align: left"><code class="highlighter-rouge">require('shelljs')</code></td>
    </tr>
    <tr>
      <td style="text-align: left"><strong><a href="https://github.com/caolan/async">async</a></strong></td>
      <td style="text-align: left">Async utilities</td>
      <td style="text-align: left"><code class="highlighter-rouge">require('async')</code></td>
    </tr>
  </tbody>
</table>

<table>
  <thead>
    <tr>
      <th style="text-align: left">Express</th>
      <th style="text-align: left">æè¿°</th>
      <th style="text-align: left">æ —å­</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left"><strong><a href="https://github.com/expressjs/session">express-session</a></strong></td>
      <td style="text-align: left">session ä¸­é—´ä»¶</td>
      <td style="text-align: left"><code class="highlighter-rouge">require('express-session')</code></td>
    </tr>
    <tr>
      <td style="text-align: left"><strong><a href="https://github.com/jdesboeufs/connect-mongo">connect-mongo</a></strong></td>
      <td style="text-align: left">é€šè¿‡ Mongodb å­˜å‚¨ sessionï¼ŒåŸºäº express-session</td>
      <td style="text-align: left"><code class="highlighter-rouge">require('connect-mongo')(session)</code></td>
    </tr>
    <tr>
      <td style="text-align: left"><strong><a href="https://github.com/jaredhanson/connect-flash">connect-flash</a></strong></td>
      <td style="text-align: left">é¡µé¢é€šçŸ¥ä¸­é—´ä»¶ï¼ŒåŸºäº session å®ç°</td>
      <td style="text-align: left"><code class="highlighter-rouge">require('connect-flash')</code></td>
    </tr>
    <tr>
      <td style="text-align: left"><strong><a href="https://github.com/utatti/express-formidable">express-formidable</a></strong></td>
      <td style="text-align: left">Formidable ä¸­é—´ä»¶ï¼Œè§£æè¡¨å•æ•°æ®</td>
      <td style="text-align: left"><code class="highlighter-rouge">require('express-formidable')</code></td>
    </tr>
    <tr>
      <td style="text-align: left"><strong><a href="https://github.com/Soarez/express-ejs-layouts">express-ejs-layouts</a></strong></td>
      <td style="text-align: left">Layout support for ejs</td>
      <td style="text-align: left"><code class="highlighter-rouge">require('express-ejs-layouts')</code></td>
    </tr>
    <tr>
      <td style="text-align: left"><strong><a href="https://github.com/expressjs/cookie-parser">cookie-parser</a></strong></td>
      <td style="text-align: left">è§£æ cookieï¼Œé€šè¿‡ <code class="highlighter-rouge">req.cookies</code> è®¿é—®</td>
      <td style="text-align: left"><code class="highlighter-rouge">require('cookie-parser')</code></td>
    </tr>
    <tr>
      <td style="text-align: left"><strong><a href="https://github.com/expressjs/body-parser">body-parser</a></strong></td>
      <td style="text-align: left">è§£æ POST è¯·æ±‚çš„è¯·æ±‚ä½“ï¼Œé€šè¿‡ <code class="highlighter-rouge">req.body</code> è®¿é—®</td>
      <td style="text-align: left"><code class="highlighter-rouge">require('body-parser')</code></td>
    </tr>
    <tr>
      <td style="text-align: left"><strong><a href="https://github.com/expressjs/compression">compression</a></strong></td>
      <td style="text-align: left">ä¼šå°è¯•å‹ç¼©æ‰€æœ‰ç»è¿‡æ­¤ä¸­é—´ä»¶çš„å“åº”ä½“</td>
      <td style="text-align: left"><code class="highlighter-rouge">require('compression')</code></td>
    </tr>
  </tbody>
</table>

<h2 id="node-ç¬¬ä¸‰æ–¹åº“">Node ç¬¬ä¸‰æ–¹åº“</h2>

<h3 id="cheerio">cheerio</h3>

<p><strong>cheerio</strong> ä»¥ jQuery ä¸ºæ ¸å¿ƒï¼Œå¯ä»¥è§£æå’Œæ“ä½œ DOM æ¨¡å‹ï¼Œå¦‚å®ç°ç½‘ç»œçˆ¬è™«ï¼Œå¯ä»¥<a href="http://www.cnblogs.com/xiaohuochai/p/6960738.html">å‚è€ƒè¿™é‡Œçš„å®ç°</a>ã€‚</p>

<pre><code class="language-JS">const cheerio = require('cheerio')
const $ = cheerio.load('&lt;h2 class="title"&gt;Hello world&lt;/h2&gt;')

$('h2.title').text('Hello there!')
$('h2').addClass('welcome')

$.html() // =&gt; &lt;h2 class="title welcome"&gt;Hello there!&lt;/h2&gt;
</code></pre>

<h3 id="request">request</h3>

<p><strong>request</strong> æ˜¯ä¸€ä¸ªç²¾ç®€çš„ HTTP å®¢æˆ·ç«¯ï¼Œæ”¯æŒ HTTPS åè®®å’Œé‡å®šå‘ã€‚</p>

<pre><code class="language-JS">const request = require('request');
request('http://www.google.com', function (error, response, body) {
  console.log('error:', error); // Print the error if one occurred
  console.log('statusCode:', response &amp;&amp; response.statusCode); // Print the response status code if a response was received
  console.log('body:', body); // Print the HTML for the Google homepage.
});
</code></pre>

<p>ä»»ä½•å“åº”éƒ½å¯ä»¥è¾“å‡ºåˆ°æ–‡ä»¶æµ:</p>

<pre><code class="language-JS">request('http://google.com/doodle.png').pipe(fs.createWriteStream('doodle.png'))
</code></pre>

<pre><code class="language-JS">http.createServer(function (req, resp) {
  if (req.url === '/doodle.png') {
    if (req.method === 'PUT') {
      req.pipe(request.put('http://mysite.com/doodle.png'))
    } else if (req.method === 'GET' || req.method === 'HEAD') {
      request.get('http://mysite.com/doodle.png').pipe(resp)
    }
  }
})
</code></pre>

<p>ä¸¾ä¸ª post è¯·æ±‚æäº¤ formData çš„æ —å­:</p>

<pre><code class="language-JS">request.post({url:'http://service.com/upload', formData: formData}, optionalCallback);

function optionalCallback(err, httpResponse, body) {
  if (err) {
    return console.error('upload failed:', err);
  }
  console.log('Upload successful!  Server responded with:', body);
};
</code></pre>

<h3 id="marked">marked</h3>

<p><strong>marked</strong> å¯ä»¥å°† Markdown è¯­æ³•è½¬æ¢ä¸º html å¹¶æ˜¾ç¤ºã€‚</p>

<pre><code class="language-JS">document.getElementById('content').innerHTML = marked('# Marked in the browser\n\nRendered by **marked**.');
</code></pre>

<h3 id="chalk">chalk</h3>

<p><strong>chalk</strong> å¯ä»¥ä¿®æ”¹ç»ˆç«¯è¾“å‡ºä¿¡æ¯çš„æ ·å¼:</p>

<pre><code class="language-JS">chalk.&lt;style&gt;[.&lt;style&gt;...](string, [string...])
</code></pre>

<p><img src="https://camo.githubusercontent.com/71d70de9a74293b29dbbcca7ac6cd309948a0f3e/68747470733a2f2f63646e2e7261776769742e636f6d2f6368616c6b2f616e73692d7374796c65732f383236313639376339356266333462366337373637653263626539393431613835316435393338352f73637265656e73686f742e737667" alt="chalk" /></p>

<pre><code class="language-JS">const chalk = require('chalk');
const log = console.log;

// Combine styled and normal strings
log(chalk.blue('Hello') + ' World' + chalk.red('!'));

// Compose multiple styles using the chainable API
log(chalk.blue.bgRed.bold('Hello world!'));

// Pass in multiple arguments
log(chalk.blue('Hello', 'World!', 'Foo', 'bar', 'biz', 'baz'));

// Nest styles
log(chalk.red('Hello', chalk.underline.bgBlue('world') + '!'));
</code></pre>

<p>é™¤äº†å†…ç½®çš„é¢œè‰² API ä»¥å¤–ï¼Œè¿˜æ”¯æŒå…¶ä»–é¢œè‰²è‡ªå®šä¹‰çš„ APIï¼Œå¸¸ç”¨çš„æœ‰:</p>

<ul>
  <li><strong>rgb</strong> - Example: chalk.rgb(255, 136, 0).bold(â€˜Orange!â€™)</li>
  <li><strong>hex</strong> - Example: chalk.hex(â€˜#FF8800â€™).bold(â€˜Orange!â€™)</li>
  <li><strong>keyword</strong> (CSS keywords) - Example: chalk.keyword(â€˜orangeâ€™).bold(â€˜Orange!â€™)</li>
  <li><strong>hsl</strong> - Example: chalk.hsl(32, 100, 50).bold(â€˜Orange!â€™)</li>
</ul>

<h3 id="shelljs">shelljs</h3>

<p><strong>shelljs</strong> å¯ä»¥åœ¨ Node ä¸­è°ƒç”¨ shell å‘½ä»¤ã€‚</p>

<pre><code class="language-JS">var shell = require('shelljs');

if (!shell.which('git')) {
  shell.echo('Sorry, this script requires git');
  shell.exit(1); // Exits the current process with the given exit code.
}

// Copy files to release dir
shell.rm('-rf', 'out/Release');
shell.cp('-R', 'stuff/', 'out/Release');

// Replace macros in each .js file
// sed([options,] search_regex, replacement, file [, file ...])
// or sed([options,] search_regex, replacement, file_array)

shell.cd('lib');
shell.ls('*.js').forEach(function (file) {
  shell.sed('-i', 'BUILD_VERSION', 'v0.1.2', file);
  shell.sed('-i', /^.*REMOVE_THIS_LINE.*$/, '', file);
  shell.sed('-i', /.*REPLACE_LINE_WITH_MACRO.*\n/, shell.cat('macro.js'), file);
});
shell.cd('..');

// Run external tool synchronously
if (shell.exec('git commit -am "Auto-commit"').code !== 0) {
  shell.echo('Error: Git commit failed');
  shell.exit(1);
}
</code></pre>

<blockquote>
  <p>ç°åœ¨ google åˆå‡ºäº†ä¸ª <a href="https://github.com/google/zx">zx</a> ğŸ‘ˆ</p>
</blockquote>

<h3 id="async">async</h3>

<p><strong>async</strong> åº“çš„æ‰€æœ‰æ–¹æ³•å¯ä»¥ä»<a href="https://caolan.github.io/async/docs.html#auto">å®˜æ–¹è¿™é‡ŒæŸ¥çœ‹</a>ï¼Œè¿™é‡Œä»‹ç»ä¸‰ä¸ªæ¯”è¾ƒå¸¸ç”¨çš„æ–¹æ³•:</p>

<ul>
  <li>waterfall - å¼‚æ­¥æ‰§è¡Œ</li>
  <li>parallel - åŒæ­¥æ‰§è¡Œ</li>
  <li>auto - å¯åŒæ­¥å¯å¼‚æ­¥</li>
</ul>

<p>1ã€waterfall</p>

<p>Runs the tasks array of functions in series, each passing their results to the next in the array. However, if any of the tasks pass an error to their own callback, the next function is not executed, and the main callback is immediately called with the error.</p>

<pre><code class="language-JS">import waterfall from 'async/waterfall';

async.waterfall([
  myFirstFunction,
  mySecondFunction,
  myLastFunction,
], function (err, result) {
  // result now equals 'done'
});
function myFirstFunction (callback) {
  callback(null, 'one', 'two');
}
function mySecondFunction (arg1, arg2, callback) {
  // arg1 now equals 'one' and arg2 now equals 'two'
  callback(null, 'three');
}
function myLastFunction (arg1, callback) {
  // arg1 now equals 'three'
  callback(null, 'done');
}
</code></pre>

<p>2ã€parallel</p>

<p>Run the tasks collection of functions in parallel, without waiting until the previous function has completed. If any of the functions pass an error to its callback, the main callback is immediately called with the value of the error. Once the tasks have completed, the results are passed to the final callback as an array</p>

<pre><code class="language-JS">import parallel from 'async/parallel';

async.parallel([
  function (callback) {
    setTimeout(function() {
      callback(null, 'one');
    }, 200);
  },
  function (callback) {
    setTimeout(function() {
      callback(null, 'two');
    }, 100);
  }
],
// optional callback
function(err, results) {
    // the results array will equal ['one','two'] even though the second function had a shorter timeout.
});

// an example using an object instead of an array
async.parallel({
  one: function (callback) {
    setTimeout(function() {
      callback(null, 1);
    }, 200);
  },
  two: function (callback) {
    setTimeout(function() {
      callback(null, 2);
    }, 100);
  }
}, function (err, results) {
  // results is now equals to: {one: 1, two: 2}
});
</code></pre>

<p>3ã€auto</p>

<p>èƒ½å¤ŸåŒæ—¶æ»¡è¶³ä¸Šé¢ä¸¤ç§éœ€æ±‚:</p>

<pre><code class="language-JS">import auto from 'async/auto';

async.auto({
  get_data: function(callback) {
    console.log('in get_data');
    // async code to get some data
    callback(null, 'data', 'converted to array');
  },
  make_folder: function(callback) {
    console.log('in make_folder');
    // async code to create a directory to store a file in,this is run at the same time as getting the data
    callback(null, 'folder');
  },
  write_file: ['get_data', 'make_folder', function(results, callback) {
    console.log('in write_file', JSON.stringify(results));
    // once there is some data and the directory exists,write the data to a file in the directory
    callback(null, 'filename');
  }],
  email_link: ['write_file', function(results, callback) {
    console.log('in email_link', JSON.stringify(results));
    // once the file is written let's email a link to it...,results.write_file contains the filename returned by write_file.
    callback(null, {'file':results.write_file, 'email':'user@example.com'});
  }]
}, function(err, results) {
  console.log('err = ', err);
  console.log('results = ', results);
});
</code></pre>

<h2 id="express-ä¸­é—´ä»¶">Express ä¸­é—´ä»¶</h2>

<h3 id="express-session">express-session</h3>

<p><strong>express-session</strong> ç”¨æ¥æ“ä½œ sessionï¼Œä¿å­˜ä¼šè¯ä¿¡æ¯ï¼Œå¸¸ç”¨äºç™»å½•æ³¨å†Œã€è´­ç‰©è½¦ç­‰ã€‚</p>

<pre><code class="language-JS">// session ä¸­é—´ä»¶
app.use(session({
  name: config.session.key, // è®¾ç½®ä¿å­˜ session id çš„ cookie åç§°
  secret: config.session.secret, // é€šè¿‡è®¾ç½® secret æ¥è®¡ç®— hash å€¼å¹¶æ”¾åœ¨ cookie ä¸­ï¼Œä½¿äº§ç”Ÿçš„ signedCookie é˜²ç¯¡æ”¹
  resave: true, // å¼ºåˆ¶æ›´æ–° session
  saveUninitialized: false, // è®¾ç½®ä¸º falseï¼Œå¼ºåˆ¶åˆ›å»ºä¸€ä¸ª sessionï¼Œå³ä½¿ç”¨æˆ·æœªç™»å½•
  cookie: { // é»˜è®¤å€¼ { path: '/', httpOnly: true, secure: false, maxAge: null }
    maxAge: config.session.maxAge
  },
  store: new MongoStore({ // å°† session å­˜å‚¨åˆ° mongodb
    url: config.mongodb // mongodb åœ°å€
  })
}))
</code></pre>

<p>å¯ä»¥é€šè¿‡ <strong>req.session</strong> æ¥è®¿é—®æˆ–å­˜å‚¨ session:</p>

<pre><code class="language-JS">// Use the session middleware
app.use(session({ secret: 'keyboard cat', cookie: { maxAge: 60000 }}))

// Access the session as req.session
app.get('/', function (req, res, next) {
  if (req.session.views) {
    req.session.views++
    res.setHeader('Content-Type', 'text/html')
    res.write('&lt;p&gt;views: ' + req.session.views + '&lt;/p&gt;')
    res.write('&lt;p&gt;expires in: ' + (req.session.cookie.maxAge / 1000) + 's&lt;/p&gt;')
    res.end()
  } else {
    req.session.views = 1
    res.end('welcome to the session demo. refresh!')
  }
})
</code></pre>

<p>req.session è¿˜æœ‰å…¶ä»–å‡ ä¸ªå±æ€§å’Œæ–¹æ³•:</p>

<ul>
  <li><strong>id</strong> - session idï¼Œä¸ session å”¯ä¸€ç»‘å®šï¼Œä¹Ÿå¯é€šè¿‡ <code class="highlighter-rouge">req.sessionID</code> è®¿é—®ï¼Œä¸å¯ä¿®æ”¹</li>
  <li><strong>cookie</strong> - è®¿é—® session id ç»‘å®šçš„ cookie ä¿¡æ¯</li>
  <li><strong>regenerate()</strong> - é‡æ–°ç”Ÿæˆä¸€ä¸ª session</li>
  <li><strong>destroy()</strong> - é”€æ¯ä¸€ä¸ª session</li>
  <li><strong>reload()</strong> - åˆ·æ–°ä¸€ä¸ª session</li>
  <li><strong>save()</strong> - ä¿å­˜ä¸€ä¸ª sessionï¼Œä¸€èˆ¬åœ¨ session æ”¹å˜åè‡ªåŠ¨è°ƒç”¨ï¼Œè€Œä¸ç”¨æ‰‹åŠ¨å»æ‰§è¡Œ</li>
</ul>

<h3 id="connect-mongo">connect-mongo</h3>

<p><strong>connect-mongo</strong> æ˜¯åŸºäº express-session å®ç°çš„ï¼Œå¯ä»¥é€šè¿‡ Mongodb æ¥å­˜å‚¨ sessionã€‚</p>

<pre><code class="language-JS">const session = require('express-session');
const MongoStore = require('connect-mongo')(session);

app.use(session({
  secret: 'tate',
  store: new MongoStore(options)
}));
</code></pre>

<p>options å¯ä»¥åˆ›å»ºä¸€ä¸ªæ–°çš„è¿æ¥ï¼Œä¹Ÿå¯ä»¥å¤ç”¨ç°æˆçš„è¿æ¥:</p>

<pre><code class="language-JS">// å¤ç”¨ç°æˆçš„è¿æ¥
const mongoose = require('mongoose');

// Basic usage
mongoose.connect(connectionOptions);

app.use(session({
  store: new MongoStore({ mongooseConnection: mongoose.connection })
}));

// Advanced usage
const connection = mongoose.createConnection(connectionOptions);

app.use(session({
  store: new MongoStore({ mongooseConnection: connection })
}));
</code></pre>

<pre><code class="language-JS">// åˆ›å»ºä¸€ä¸ªæ–°çš„è¿æ¥
app.use(session({
  store: new MongoStore({
    url: 'mongodb://localhost/test-app',
    ttl: 14 * 24 * 60 * 60 // = 14 days. Default è®¾ç½® session è¿‡æœŸæ—¶é—´
  })
}));
</code></pre>

<h3 id="connect-flash">connect-flash</h3>

<p><strong>connect-flash</strong> æ˜¯åŸºäº session å®ç°çš„ä¿¡æ¯é€šçŸ¥ä¸­é—´ä»¶ï¼Œå¿…é¡»åœ¨è®¾ç½® session åå†è¿è¡Œã€‚</p>

<pre><code class="language-JS">const flash = require('connect-flash')

// flash ä¸­é—´ä»¶ï¼Œç”¨æ¥æ˜¾ç¤ºé€šçŸ¥
app.use(flash())
</code></pre>

<p>å¯ä»¥é€šè¿‡ <strong>req.flash()</strong> æ¥è®¾ç½®é€šçŸ¥:</p>

<pre><code class="language-JS">app.get('/flash', function (req, res) {
  // Set a flash message by passing the key, followed by the value, to req.flash().
  req.flash('info', 'Flash is back!')
  res.redirect('/');
})

app.get('/', function (req, res) {
  // Get an array of flash messages by passing the key to req.flash()
  res.render('index', { messages: req.flash('info') });
})
</code></pre>

<h3 id="express-formidable">express-formidable</h3>

<p><strong>express-formidable</strong> æ˜¯ Express ä¸ <strong><a href="https://github.com/felixge/node-formidable">Formidable</a></strong> çš„æ¡¥æ¢ï¼Œç”¨æ¥è§£æè¡¨å•æ•°æ®ã€‚</p>

<pre><code class="language-JS">const express = require('express');
const formidable = require('express-formidable');

var app = express();

app.use(formidable(opts));

app.post('/upload', (req, res) =&gt; {
  req.fields; // contains non-file fields
  req.files; // contains files
});
</code></pre>

<p>è¿™é‡Œçš„ opts å¯ä»¥å‚è€ƒ Formidable APIï¼Œä»¥ä¸‹åˆ—å‡ºå¸¸ç”¨çš„å‡ ä¸ª:</p>

<ul>
  <li><strong>encoding</strong> - è®¾ç½®ç¼–ç å½¢å¼</li>
  <li><strong>uploadDir</strong> - è®¾ç½®éœ€è¦ä¸Šä¼ æ–‡ä»¶çš„å­˜æ”¾è·¯å¾„ï¼Œé»˜è®¤æ˜¯ <code class="highlighter-rouge">os.tmpdir()</code></li>
  <li><strong>keepExtensions</strong> - å¸ƒå°”ç±»å‹ï¼Œæ˜¯å¦ä¿æŒåŸå§‹æ–‡ä»¶çš„åç¼€å</li>
  <li><strong>multiples</strong> - å¸ƒå°”ç±»å‹ï¼Œè®¾ç½® true æ—¶ï¼Œå½“è°ƒç”¨ form.parseï¼Œfiles å‚æ•°ä¼šåŒ…å«ä¸Šä¼ æ–‡ä»¶çš„æ•°ç»„</li>
</ul>

<pre><code class="language-JS">app.use(formidable({
  encoding: 'utf-8',
  uploadDir: '/my/dir',
  multiples: true, // req.files to be arrays of files
});
</code></pre>

<h3 id="express-ejs-layouts">express-ejs-layouts</h3>

<p>å¼•ç”¨å®˜æ–¹ demo:</p>

<pre><code class="language-JS">var expressLayouts = require('express-ejs-layouts');

app.set('view engine', 'ejs');
app.use(expressLayouts);
app.get('/', function (req, res) {
  res.locals = {
    title: 'expressLayouts',
    message: 'Tate &amp; Snow'
  };
  res.render('view');
});
</code></pre>

<pre><code class="language-HTML">&lt;!-- layout.ejs --&gt;
&lt;!DOCTYPE html&gt;
&lt;html lang="en"&gt;
&lt;head&gt;
  &lt;meta charset="UTF-8"&gt;
  &lt;title&gt;&lt;%= title %&gt;&lt;/title&gt;

  &lt;% /* Place any styles in the page in this section. */ %&gt;
  &lt;%- style %&gt;
&lt;/head&gt;
&lt;body&gt;
  &lt;header&gt;
    &lt;% /*
    Define an required placeholder for the header.
    If a page doesn't define a header, there will be an error when rendering.
    */ %&gt;
    &lt;%- header %&gt;
  &lt;/header&gt;

  &lt;%- body %&gt;

  &lt;footer&gt;
    &lt;% /*
    Define an optional placeholder for the footer.
    If a page doesn't define a footer, this section will simply be empty.
    */ %&gt;
    &lt;%- defineContent('footer') %&gt;
  &lt;/footer&gt;

  &lt;% /* Place any scripts contained in views at the end of the page. */ %&gt;
  &lt;%- script %&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre>

<pre><code class="language-HTML">&lt;!-- view.ejs --&gt;
&lt;%- contentFor('header') %&gt;
&lt;h1 class="page-title"&gt;&lt;%= title %&gt;&lt;/h1&gt;

&lt;%- contentFor('footer') %&gt;
&lt;h1&gt;This is the footer&lt;/h1&gt;

&lt;% /*
Content for the `body` section should either be the first thing defined
in the view, or it has to be declared just like any other section.
*/ %&gt;
&lt;%- contentFor('body') %&gt;

This is part of the body.

&lt;style&gt;
  .page-message { color: blue }
&lt;/style&gt;

&lt;% /*
Like stylesheets, scripts can also be extracted.
This script block will end up at the end of the HTML document.
*/ %&gt;
&lt;script&gt;
  // Script content!
&lt;/script&gt;

&lt;h1 class="page-message"&gt;&lt;%= message %&gt;&lt;/h1&gt;
</code></pre>

<p>æ¸²æŸ“åé¡µé¢æ˜¾ç¤ºä¸º:</p>

<pre><code class="language-TEXT">expressLayouts
This is part of the body.
Tate &amp; Snow
This is the footer
</code></pre>

<p>è¿˜å¯ä»¥è®¾ç½®é»˜è®¤ layout æ¨¡æ¿:</p>

<pre><code class="language-JS">app.set('layout', 'layouts/layout');

// é€šè¿‡ layout å±æ€§ä½¿ç”¨æŒ‡å®šçš„æ¨¡æ¿è¿›è¡Œæ¸²æŸ“
app.get('/', function(req, res) {
  res.render('the-view', { layout: 'specific-layout' });
);
</code></pre>

<h3 id="cookie-parser">cookie-parser</h3>

<p>è§£æ HTTP è¯·æ±‚ä¸­çš„ cookieã€‚</p>

<pre><code class="language-JS">var cookieParser = require('cookie-parser')

// ä¸ä½¿ç”¨ç­¾å
app.use(cookiePareser())

// ä½¿ç”¨ç­¾åï¼Œéœ€è¦æŒ‡å®šä¸€ä¸ª secret å­—ç¬¦ä¸²ï¼Œå¦è€…ä¼šæŠ¥é”™
// app.use(cookiePareser('Tate'))

app.get('/', function (req, res) {
  // Cookies that have not been signed
  console.log('Cookies: ', req.cookies)

  // Cookies that have been signed
  console.log('Signed Cookies: ', req.signedCookies)
})
</code></pre>

<h3 id="body-parser">body-parser</h3>

<p>è§£æ HTTP POST è¯·æ±‚ä¸­çš„è¯·æ±‚ä½“ï¼Œé€šè¿‡ <code class="highlighter-rouge">req.body</code> è®¿é—®ã€‚</p>

<pre><code class="language-JS">// å¸¸ç”¨çš„è®¾ç½®
app.use(bodyParser.json()) // è§£æ application/json
app.use(bodyParser.urlencoded({ extended: false })) // è§£æ application/x-www-form-urlencoded
</code></pre>

<h3 id="compression">compression</h3>

<p>compression ä¼šå°è¯•å‹ç¼©æ‰€æœ‰ç»è¿‡æ­¤ä¸­é—´ä»¶çš„å“åº”ä½“ã€‚æ”¯æŒä¸¤ç§å‹ç¼©æ¨¡å¼: deflate å’Œ gzipã€‚</p>

<pre><code class="language-JS">var compression = require('compression')
app.use(compression()) // compress all responsesï¼Œå¯ä»¥å¸¦ options å‚æ•°
</code></pre>

<p>è¿˜å¯ä»¥é€šè¿‡ filter æ¥è¿‡æ»¤å“ªäº›ä¸éœ€è¦å‹ç¼©çš„è¯·æ±‚:</p>

<pre><code class="language-JS">app.use(compression({filter: shouldCompress}))

function shouldCompress (req, res) {
  if (req.headers['x-no-compression']) {
    // don't compress responses with this request header
    return false
  }

  // fallback to standard filter function
  return compression.filter(req, res)
}
</code></pre>

<h2 id="å‚è€ƒé“¾æ¥">å‚è€ƒé“¾æ¥</h2>

<ol>
  <li><a href="https://github.com/nswbmw/N-blog/blob/master/book/4.2%20%E5%87%86%E5%A4%87%E5%B7%A5%E4%BD%9C.md">Github - N-Blog</a> By nswbmw</li>
  <li><a href="http://www.cnblogs.com/xiaohuochai/p/6960738.html">nodeJS å®ç°ç®€å•ç½‘é¡µçˆ¬è™«åŠŸèƒ½</a> By å°ç«æŸ´çš„è“è‰²ç†æƒ³</li>
  <li><a href="https://www.jianshu.com/p/25ffa01466f9">Express ä¸­é—´ä»¶â€”-cookie-parser(å…­)</a> By HowardHuang</li>
  <li><a href="https://blog.csdn.net/yanyang1116/article/details/54847560">body-parser Node.js(Express) HTTP è¯·æ±‚ä½“è§£æä¸­é—´ä»¶</a> By yanyang1116</li>
  <li><a href="https://caolan.github.io/async/docs.html">async å®˜æ–¹æ–‡æ¡£</a></li>
</ol>
 
<div id="gitalk-container"></div>
<script>
    var gitalk = new Gitalk({
      enable: true,
      clientID: '020f142489f80c92b097',
      clientSecret: '1fa083372b44031cf1b8249251515c4e3d54c69d',
      repo: 'tate-young.github.io',
      owner: 'Tate-Young',
      admin: ['Tate-Young'],
      id: location.pathname,      // Ensure uniqueness and length less than 50
      distractionFreeMode: false  // Facebook-like distraction free mode
    })

    gitalk.render('gitalk-container')
</script>
<!-- disqus -->
<!-- <div id="disqus_thread"></div>
<script>
    /**
     *  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
     *  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables
     */

    var disqus_config = function () {
        this.page.url = 'https://tate-young.github.io/2018/04/22/node-third-library.html';
        this.page.identifier = '/2018/04/22/node-third-library';
        this.page.title = 'Node å¸¸ç”¨åº“';
    };

    (function () { // REQUIRED CONFIGURATION VARIABLE: EDIT THE SHORTNAME BELOW
        var d = document,
            s = d.createElement('script');

        s.src = '//tate.disqus.com/embed.js'; // IMPORTANT: Replace EXAMPLE with your forum shortname!

        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the
    <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a>
</noscript> -->


            <!-- <p class="post-info">
			æœ¬æ–‡ç”± <a href="/">liberxue</a> åˆ›ä½œï¼Œé‡‡ç”¨ <a href="https://creativecommons.org/licenses/by/4.0/" target="_blank" rel="external nofollow">çŸ¥è¯†å…±äº«ç½²å4.0</a> å›½é™…è®¸å¯åè®®è¿›è¡Œè®¸å¯<br>æœ¬ç«™æ–‡ç« é™¤æ³¨æ˜è½¬è½½/å‡ºå¤„å¤–ï¼Œå‡ä¸ºæœ¬ç«™åŸåˆ›æˆ–ç¿»è¯‘ï¼Œè½¬è½½å‰è¯·åŠ¡å¿…ç½²å<br>æœ€åç¼–è¾‘æ—¶é—´ä¸º:2018-04-22 15:14:00</p> -->
        </div>
    </article>

    <!-- <div class="related-post-lists">
	<div class="post-lists">
		<div class="post-lists-body">
					<div class="post-list-item">
				<div class="post-list-item-container">
					<div class="item-label">
						<div class="item-title"><a href="induction.html">å½’çº³çš„éšæƒ³</a></div>
						<div class="item-meta clearfix">
														<div class="item-meta-ico bg-ico-image" style="background: url('../usr/themes/pinghsu/images/bg-ico.png') no-repeat;background-size: 40px auto;"></div>
	                        							<div class="item-meta-cat"><a href="../category/thoughts/index.html">Thoughts</a></div>
						</div>
					</div>
				</div>
			</div>
				</div>
	</div>
</div> -->

    <!-- <footer class="footer bg-white">
	<div class="footer-social">
		<div class="footer-container clearfix">
			<div class="social-list">
	 <a class="social segmentfault" target="blank" href="https://segmentfault.com/u/liberxue" title="è®¿é—® LiberXue_Twitter" data-hover="Segmentfault">Segmentfault</a>
    <a class="social github" target="blank" href="https://github.com/liberxue" title="è®¿é—® LiberXue_Twitter" data-hover="GitHub">GitHub</a>
    <a class="social twitter" target="blank" href="http://twitter.com/liberxue" title="è®¿é—® LiberXue_Twitter" data-hover="Twitter">Twitter</a>
     <a class="social stackoverflow" target="blank" href="https://stackoverflow.com/users/6902190/liberxue" title="è®¿é—® LiberXue_stackoverflow" data-hover="StackOverflow">StackOverflow</a>
          <a class="social oschina" target="blank" href="https://my.oschina.net/bolanzw" title="è®¿é—® LiberXue_Oschina" data-hover="Oschina">Oschina</a>
     <a class="social rss" target="blank" href="/feed.xml"title="è®¿é—® LiberXue_RSS" data-hover="RSS">RSS</a>
	</div>
		</div>
	</div>
	<div class="footer-meta">
        <div class="footer-container">
            <div class="meta-item meta-copyright">
                <div class="meta-copyright-info">
                    <a href="/" class="info-logo">
                         <img src="http://localhost:2333/style/images/logo-liberxue.png"   title="è®¿é—® LiberXue_blog" data-hover="LiberXue_blog" alt="LiberXue_blog" /> </a>
                    <div class="info-text">
                        <p>Theme is <a href="http://www.liberxue.com/2017/08/03/Jekyllthemes.html" title="è®¿é—® Jekyll liberxueä¸»é¢˜"  data-hover="Jekyll liberxue"target="_blank">Jekyll liberxue</a> by <a href="http://www.liberxue.com/about" target="_blank">liberxue</a></p>
                        <p>Powered by <a href="http://localhost:2333/tags/#Jekyll" title="Jekyll" data-hover="Jekyll" target="_blank" rel="nofollow">Jekyll</a></p>
                        <p>&copy; 2017 <a href="/feed.xml"  title="è®¿é—® liberxue blog RSS" data-hover="liberxue blog RSS">liberxue blog RSS</a></p>
                        <p>æ€»è®¡æ–‡ç« ï¼šç¯‡</p>
                      <p>æœ¬blogå·²å¼€æºç‚¹å‡»Fork</p><iframe src="http://ghbtns.com/github-btn.html?user=liberxue&repo=liberxue.github.io&type=fork&count=true" allowtransparency="true" frameborder="0" scrolling="0" width="95" height="20"></iframe>
                    </div>
                </div>
            </div>
            <div class="meta-item meta-posts">
                <h3 class="meta-title">ç½®é¡¶æ–‡ç« </h3>
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
            </div>
            <div class="meta-item meta-comments">
                <h3 class="meta-title">æœ€æ–°æ–‡ç« </h3>
  
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
</div>
		</div>
    </div>
</footer> -->
<script src="//cdn.bootcss.com/jquery/2.2.2/jquery.min.js"></script>
<script src="//cdn.bootcss.com/bootstrap-3-typeahead/4.0.2/bootstrap3-typeahead.js"></script>
<script async src="/search/js/520.js"></script>
<script async src="/search/js/gtag.js"></script>
<script async src="/search/live2d/autoload.js"></script>
<!-- <script src="/search/js/canvas.js"></script> -->

<script>
    $(function () {
        setTimeout(function () {
            $('code').removeClass('hljs');
            $('code').removeClass('language');
        }, 90);
    });
    (function () {
        var bp = document.createElement('script');
        var curProtocol = window.location.protocol.split(':')[0];
        if (curProtocol === 'https') {
            bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
        } else {
            bp.src = 'http://push.zhanzhang.baidu.com/push.js';
        }
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(bp, s);
    })();
</script>

    <!--liberxueconnnet-menu-->
    <div id="directory-content" class="directory-content">
        <div id="directory"></div>
    </div>
    <!--liberxueconnnet-menu-->
    <script>
      const directoryContainer = document.getElementById('directory')
      const postTitle = document.getElementsByClassName('post-title')[0]
      var postDirectoryBuild = function () {
        var postChildren = function children(childNodes, reg) {
          var result = [],
              isReg = typeof reg === 'object',
              isStr = typeof reg === 'string',
              node, i, len;
          for (i = 0, len = childNodes.length; i < len; i++) {
            node = childNodes[i];
            if ((node.nodeType === 1 || node.nodeType === 9) &&
              (!reg ||
                  isReg && reg.test(node.tagName.toLowerCase()) ||
                  isStr && node.tagName.toLowerCase() === reg)) {
                result.push(node);
              }
            }
            return result;
          },
          createPostDirectory = function (article, directory, isDirNum) {
            var contentArr = [],
                titleId = [],
                levelArr, root, level,
                currentList, list, li, link, i, len;
            levelArr = (function (article, contentArr, titleId) {
                  var titleElem = postChildren(article.childNodes, /^h\d$/),
                      levelArr = [],
                      lastNum = 1,
                      lastRevNum = 1,
                      count = 0,
                      guid = 1,
                      id = 'directory' + (Math.random() + '').replace(/\D/, ''),
                      lastRevNum, num, elem;
                  while (titleElem.length) {
                      elem = titleElem.shift();
                      contentArr.push(elem.innerHTML);
                      num = +elem.tagName.match(/\d/)[0];
                      if (num > lastNum) {
                          levelArr.push(1);
                          lastRevNum += 1;
                      } else if (num === lastRevNum ||
                          num > lastRevNum && num <= lastNum) {
                          levelArr.push(0);
                          lastRevNum = lastRevNum;
                      } else if (num < lastRevNum) {
                          levelArr.push(num - lastRevNum);
                          lastRevNum = num;
                      }
                      count += levelArr[levelArr.length - 1];
                      lastNum = num;
                      elem.id = elem.id || (id + guid++);
                      titleId.push(elem.id);
                  }
                  if (count !== 0 && levelArr[0] === 1) levelArr[0] = 0;

                  return levelArr;
              })(article, contentArr, titleId);
              currentList = root = document.createElement('ul');
              dirNum = [0];
              for (i = 0, len = levelArr.length; i < len; i++) {
                  level = levelArr[i];
                  if (level === 1) {
                      list = document.createElement('ul');
                      if (!currentList.lastElementChild) {
                          currentList.appendChild(document.createElement('li'));
                      }
                      currentList.lastElementChild.appendChild(list);
                      currentList = list;
                      dirNum.push(0);
                  } else if (level < 0) {
                      level *= 2;
                      while (level++) {
                          if (level % 2) dirNum.pop();
                          currentList = currentList.parentNode;
                      }
                  }
                  dirNum[dirNum.length - 1]++;
                  li = document.createElement('li');
                  link = document.createElement('a');
                  link.name = '#' + titleId[i];
                  link.href = 'Javascript:;'
                  link.className = "post-aside-anchor"
                  link.title = 'è®¿é—®' + titleId[i];
                  link.innerHTML = !isDirNum ? contentArr[i] :
                      dirNum.join('.') + ' ' + contentArr[i];
                  li.appendChild(link);
                  currentList.appendChild(li);
              }
            directory.appendChild(root);
          };
        createPostDirectory(document.getElementById('post-content'), directoryContainer, true);
      };
      postDirectoryBuild();
    </script>
    <script>
      // gtag('config', GA_TRACKING_ID, {
      //   'page_title' : 'Blog',
      //   'page_path': window.location.pathname,
      //   'post_title': 'watttsdfasdf',
      // });

    </script>
    <script src="//cdn.bootcss.com/highlight.js/9.12.0/highlight.min.js"></script>
    <script>
        lang = hljs.initHighlightingOnLoad();
    </script>
</body>

</html>
