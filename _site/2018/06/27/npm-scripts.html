
<!DOCTYPE>
<html lang="zh-cn" data-scribe-reduced-action-queue="true">

<head>
    <meta content='NPM Scripts - Tate & Snow' name='title' />
    <meta content='NPM Scripts - Tate & Snow' name='og:title' />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.css">
    <script src="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.js"></script>
    <title>NPM Scripts - Tate & Snow</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<title>NPM Scripts - Tate & Snow</title>
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="NPM Scripts - Tate & Snow">
<meta name="twitter:keywords" content="NPM Scripts - Tate & Snow" property='og:description' />
<meta property="og:type" content="article">
<meta property="og:title" content="NPM Scripts - Tate & Snow">
<meta name="og:keywords" content="NPM Scripts - Tate & Snow|NPM ScriptsNPM Scriptspackage.jsonpackage.json æ–‡ä»¶å®šä¹‰äº†é¡¹ç›®æ‰€éœ€è¦çš„ä¾èµ–æ¨¡å—å’Œé…ç½®ä¿¡æ¯ã€‚å¯ä»¥é€šè¿‡npm initå‘½ä»¤æ¥åˆ›å»º package.json æ–‡ä»¶ï¼Œä½¿ç”¨å‚æ•° -f å¯è·³è¿‡æ­¤é—®ç­”ç¯..."
  property='og:description' />
<link rel="icon" type="image/png" href="http://localhost:4000/style/favicons/favicon.ico" />
<link href="http://localhost:4000/style/favicons/favicon.ico" rel="shortcut icon" type="image/png">
<link rel="canonical" href="http://localhost:4000/">
<link rel="alternate" type="application/rss+xml" title="Liberxue" href="http://localhost:4000/feed.xml">
<meta charset="UTF-8">
<link rel="manifest" href="/manifest.json">
<link rel="shortcut icon" href="http://localhost:4000/style/favicons/favicon.ico" type="image/x-icon">
<meta name="keywords" content="NPM ScriptsNPM Scriptspackage.jsonpackage.json æ–‡ä»¶å®šä¹‰äº†é¡¹ç›®æ‰€éœ€è¦çš„ä¾èµ–æ¨¡å—å’Œé…ç½®ä¿¡æ¯ã€‚å¯ä»¥é€šè¿‡npm initå‘½ä»¤æ¥åˆ›å»º package.json æ–‡ä»¶ï¼Œä½¿ç”¨å‚æ•° -f å¯è·³è¿‡æ­¤é—®ç­”ç¯..." property='og:description'
/>
<meta name="description" content="Tate & Snow's Github blog" />
<link href="https://cdn.bootcss.com/highlight.js/9.10.0/styles/xcode.min.css" rel="stylesheet">
<link href="http://localhost:4000/style/theme.css" rel="stylesheet"> 
<meta content='http://localhost:4000/2018/06/27/npm-scripts.html' property='og:url' />
<meta content="http://localhost:4000/2018/06/27/npm-scripts.html|NPM ScriptsNPM Scriptspackage.jsonpackage.json æ–‡ä»¶å®šä¹‰äº†é¡¹ç›®æ‰€éœ€è¦çš„ä¾èµ–æ¨¡å—å’Œé…ç½®ä¿¡æ¯ã€‚å¯ä»¥é€šè¿‡npm initå‘½ä»¤æ¥åˆ›å»º package.json æ–‡ä»¶ï¼Œä½¿ç”¨å‚æ•° -f å¯è·³è¿‡æ­¤é—®ç­”ç¯..." property='og:description'
/>
<meta content="article" property="og:type" /> 

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-136311746-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  window.GA_TRACKING_ID = 'UA-136311746-1'
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('set', {
    'country': 'US',
    'currency': 'USD',
    'description': 'fuck',
  });
  gtag('config', GA_TRACKING_ID, {
    'custom_map': {
      'dimension1': 'post_title',
    },
    'post_title': 'test',
  });
</script>
<meta content="" property="fb:app_id" />
<script>
  (function (d, s, id) {
    var js, fjs = d.getElementsByTagName(s)[0];
    if (d.getElementById(id)) return;
    js = d.createElement(s);
    js.id = id;
    js.src = "//connect.facebook.net/en_GB/all.js#xfbml=1&appId=";
    fjs.parentNode.insertBefore(js, fjs);
  }(document, 'script', 'facebook-jssdk'));
</script>

</head>

<body class="" gtools_scp_screen_capture_injected="true">
    <header id="header" class="header bg-white">
        <div class="navbar-container">
            <a href="Javascript:;" onclick="onClickLogo()" title="è®¿é—® Tate & Snow" class="navbar-logo">
                <img src="https://i.loli.net/2018/03/13/5aa74f5b4c2c7.png" alt="Tate & Snow"> </a>
            <!-- <a href="/?tate" title="è®¿é—® Tate & Snow" class="navbar-logo">Tate & Snow</a>   -->
            <div class="navbar-menu">
                
                <a href="Javascript:;" onclick="onClickMenu('é¦–é¡µ', '/')" title="è®¿é—® é¦–é¡µ" data-hover="é¦–é¡µ">é¦–é¡µ</a>
                
                <a href="Javascript:;" onclick="onClickMenu('å‰ç«¯', '/front')" title="è®¿é—® å‰ç«¯" data-hover="å‰ç«¯">å‰ç«¯</a>
                
                <a href="Javascript:;" onclick="onClickMenu('æ¡†æ¶', '/tool')" title="è®¿é—® æ¡†æ¶" data-hover="æ¡†æ¶">æ¡†æ¶</a>
                
                <a href="Javascript:;" onclick="onClickMenu('åç«¯', '/back')" title="è®¿é—® åç«¯" data-hover="åç«¯">åç«¯</a>
                
                <a href="Javascript:;" onclick="onClickMenu('æ ‡ç­¾', '/tags')" title="è®¿é—® æ ‡ç­¾" data-hover="æ ‡ç­¾">æ ‡ç­¾</a>
                
                <a href="Javascript:;" onclick="onClickMenu('å…³äº', '/README')" title="è®¿é—® å…³äº" data-hover="å…³äº">å…³äº</a>
                
            </div>
            <!-- <div class="navbar-menu">
                
                <a href="http://localhost:4000/">é¦–é¡µ</a>
                
                <a href="http://localhost:4000/front">å‰ç«¯</a>
                
                <a href="http://localhost:4000/tool">æ¡†æ¶</a>
                
                <a href="http://localhost:4000/back">åç«¯</a>
                
                <a href="http://localhost:4000/tags">æ ‡ç­¾</a>
                
                <a href="http://localhost:4000/README">å…³äº</a>
                
            </div> -->
            <div class="navbar-search" onclick="onClickSearch()">
                <span class="icon-search"></span>
                <form id="cb-search-btn" role="search">
                    <span class="search-box">
                        <input type="text" class="input" id="cb-search-content" required="true" placeholder="æ ‡é¢˜ æ ‡ç­¾..." maxlength="30" autocomplete="off">
                    </span>
                </form>
            </div>
            <div class="navbar-mobile-menu" onclick="">
                <span class="icon-menu cross">
                    <span class="middle"></span>
                </span>
                <ul>
                    
                    <li>
                        <a href="Javascript:;" onclick="onClickMenu('é¦–é¡µ', 'http://localhost:4000/')">é¦–é¡µ</a>
                    </li>
                    
                    <li>
                        <a href="Javascript:;" onclick="onClickMenu('å‰ç«¯', 'http://localhost:4000/front')">å‰ç«¯</a>
                    </li>
                    
                    <li>
                        <a href="Javascript:;" onclick="onClickMenu('æ¡†æ¶', 'http://localhost:4000/tool')">æ¡†æ¶</a>
                    </li>
                    
                    <li>
                        <a href="Javascript:;" onclick="onClickMenu('åç«¯', 'http://localhost:4000/back')">åç«¯</a>
                    </li>
                    
                    <li>
                        <a href="Javascript:;" onclick="onClickMenu('æ ‡ç­¾', 'http://localhost:4000/tags')">æ ‡ç­¾</a>
                    </li>
                    
                    <li>
                        <a href="Javascript:;" onclick="onClickMenu('å…³äº', 'http://localhost:4000/README')">å…³äº</a>
                    </li>
                    
                </ul>
            </div>
        </div>
    </header>
    <a href="#header" class="back-to-top" onclick="onClickTop('NPM Scripts')">â¤´Topâ¤´</a>
    <div class="post-header-thumb bg-white}">
        <div class="post-header-thumb-op"></div>
        <div class="post-header-thumb">
            <div class="post-header-thumb-container">
                <h1 class="post-title" itemprop="name headline">
                    NPM Scripts</h1>
                <div class="post-data">
                    <time datetime="2018-06-27 17:57:00" itemprop="datePublished">
                      å‘å¸ƒæ—¶é—´ï¼š2018-06-27 17:57:00
                      &nbsp;&nbsp;&nbsp;
                      
                        ä¿®æ”¹æ—¶é—´ï¼š2019-06-14 14:01:00
                      
                    </time>
                    <a onclick="onClickCategory('å‰ç«¯')" href="Javascript:;" title="è®¿é—® å‰ç«¯" data-hover="åšå®¢åˆ†ç±»: å‰ç«¯">åšå®¢åˆ†ç±»: å‰ç«¯</a>
                    <!-- <a href="#read"> é˜…è¯»æ¬¡æ•°: comments</a>  -->
                </div>
                <div class="post-tags">
                       
                    <a href="Javascript:;" onclick="onClickTag('NPM')" title="è®¿é—®NPM" data-hover="NPM">
                        NPM
                        <span>(1)</span>
                        
                    </a>
                       
                </div>
            </div>
        </div>
    </div>
    <article class="main-content post-page" itemscope itemtype="http://schema.org/Article">
        <div class="post-header">
            <h1 class="post-title" itemprop="name headline">
                NPM Scripts</h1>
            <div class="post-data">
                <time datetime="2018-06-27 17:57:00" itemprop="datePublished">2018-06-27 17:57:00</time>
            </div>
        </div>
        <div id="post-content" class="post-content" itemprop="articleBody">
            <p class="post-tags">
                   
                <a href="Javascript:;" onclick="onClickTag('NPM')" title="è®¿é—®NPM" data-hover="NPM">
                    NPM
                    <span>(1)</span>
                    </a>
                   
            </p>
            <h1 id="npm-scripts">NPM Scripts</h1>

<h2 id="npm-scripts-1">NPM Scripts</h2>

<h3 id="packagejson">package.json</h3>

<p><strong>package.json</strong> æ–‡ä»¶å®šä¹‰äº†é¡¹ç›®æ‰€éœ€è¦çš„ä¾èµ–æ¨¡å—å’Œé…ç½®ä¿¡æ¯ã€‚å¯ä»¥é€šè¿‡<code>npm init</code>å‘½ä»¤æ¥åˆ›å»º package.json æ–‡ä»¶ï¼Œä½¿ç”¨å‚æ•° <strong>-f</strong> å¯è·³è¿‡æ­¤é—®ç­”ç¯èŠ‚:</p>

<pre><code class="language-SHELL">npm init

# è·³è¿‡é—®ç­”ç¯èŠ‚ï¼Œå¿«é€Ÿåˆ›å»º
npm init -f
</code></pre>

<p>å½“ç„¶ä¹Ÿå¯ä»¥åœ¨åˆå§‹åŒ–å‰é€šè¿‡<code>npm config set</code>å‘½ä»¤å»ä¿®æ”¹é»˜è®¤é…ç½®ï¼Œä¹‹åé€šè¿‡åˆå§‹åŒ–æ—¶éƒ½ä¼šå¥—ç”¨æ­¤é…ç½®é¡¹:</p>

<pre><code class="language-SHELL">npm config set init.author.name "tate"
npm config set init.author.email "smd.tate@gmail.com"
npm config set init.license "MIT"
</code></pre>

<p>åˆ›å»ºçš„ package.json æ–‡ä»¶å¤§è‡´å¦‚ä¸‹:</p>

<pre><code class="language-JSON">{
  "name": "npm_scripts",
  "version": "1.0.0",
  "description": "tate",
  "main": "index.js",
  "scripts": {
    "test": "echo \"Error: no test specified\" &amp;&amp; exit 1"
  },
  "author": "tate &lt;smd.tate@gmail.com&gt;",
  "license": "MIT"
}
</code></pre>

<h3 id="è„šæœ¬å‘½ä»¤-scripts">è„šæœ¬å‘½ä»¤ scripts</h3>

<p>package.json æ–‡ä»¶é‡Œçš„ scripts å±æ€§ä¸‹å¯ä»¥è‡ªå®šä¹‰æ‰§è¡Œå‘½ä»¤ï¼Œå¯ä»¥é€šè¿‡å‘½ä»¤<code>npm run</code>è¿›è¡ŒæŸ¥çœ‹:</p>

<pre><code class="language-JSON">"scripts": {
  "call:tate": "echo tate",
  "call:snow": "echo snow",
}
</code></pre>

<p>å¯ä»¥é€šè¿‡ç¬¦å· <strong>&amp;&amp;</strong> å’Œ <strong>&amp;</strong> å®ç°ä¸²è¡Œå’Œå¹¶è¡Œè„šæœ¬:</p>

<pre><code class="language-JSON">// ä¸²è¡Œè„šæœ¬ &amp;&amp;
"test": "npm run call:tate &amp;&amp; npm run call:snow &amp;&amp; ..."

// å¹¶è¡Œè„šæœ¬ &amp;
"test": "npm run call:tate &amp; npm run call:snow &amp; ..."
</code></pre>

<p>è¿è¡Œçš„è„šæœ¬æ¯”è¾ƒå¤šçš„è¯å¯ä»¥é‡‡ç”¨ <strong><a href="https://www.npmjs.com/package/npm-run-all">npm-run-all</a></strong> å®ç°æ›´è½»é‡å’Œç®€æ´çš„å¤šå‘½ä»¤è¿è¡Œ:</p>

<pre><code class="language-JSON">// ä¸²è¡Œè„šæœ¬
"test": "npm-run-all call:tate call:snow ..."
// ä¼˜åŒ–
"test": "npm-run-all call:*"

// å¹¶è¡Œè„šæœ¬ --parallel
"test": "npm-run-all call:* --parallel"
</code></pre>

<h3 id="ä¼ é€’å‚æ•°-">ä¼ é€’å‚æ•° â€“</h3>

<p>â€œ<strong>â€“</strong>â€ åˆ†éš”ç¬¦ç”¨æ¥ç»™å®é™…è¿è¡Œçš„æŒ‡ä»¤ä¼ é€’é¢å¤–çš„å‚æ•°ï¼Œä¸¾ä¸ªæ —å­ ğŸŒ°:</p>

<pre><code class="language-JSON">// å‡è®¾è¦ä¼ å…¥ä¸€ä¸ª watch å‚æ•°
"call:tate": "echo tate",
"call:tate:watch": "echo tate --watch",

// ä¼˜åŒ–ã€‚é€šè¿‡ -- åˆ†éš”ç¬¦ä¼ å‚æ•°
// å®é™…æ‰§è¡Œçš„å³æ˜¯ echo tate --watch
"call:tate:watch": "npm run call:tate -- --watch",
</code></pre>

<h3 id="é’©å­-hooks">é’©å­ hooks</h3>

<p>å†…ç½®çš„é’©å­å¯åˆ†ä¸º <strong>pre</strong> å’Œ <strong>post</strong> é’©å­è„šæœ¬ï¼Œå¦‚ä¸‹:</p>

<pre><code class="language-JSON">"test": "echo tate",
"pretest": "echo pre-tate",
"posttest": "echo post-tate"
</code></pre>

<p>å½“æ‰§è¡Œå‘½ä»¤<code>npm test</code>æ—¶ï¼Œå®é™…æ‰§è¡Œäº† â€œpretest ==&gt; test ==&gt; posttestâ€ã€‚è‡ªå®šä¹‰å‘½ä»¤ä¹Ÿé€‚ç”¨ã€‚é…åˆ git hooks å¯ä»¥åœ¨æäº¤ä»£ç å‰åè¿›è¡Œä¸€äº›æ ¡éªŒè¾“å‡ºï¼Œè¿™é‡Œæ¨èä½¿ç”¨ <a href="https://www.npmjs.com/package/husky">husky</a>ã€‚</p>

<pre><code class="language-JSON">"precommit": "npm test",
"prepush": "npm test"
</code></pre>

<p>åœ¨æ‰§è¡Œ<code>git commit</code>å‘½ä»¤æ—¶ï¼Œprecommit é’©å­ä¼šè‡ªåŠ¨ç”Ÿæ•ˆã€‚</p>

<h3 id="å˜é‡-npm_package">å˜é‡ $npm_package</h3>

<p>é€šè¿‡å‘½ä»¤<code>npm run env</code>å³å¯æŸ¥çœ‹æ‰€æœ‰å˜é‡åˆ—è¡¨:</p>

<pre><code class="language-SHELL">npm run env | grep npm_package | sort
</code></pre>

<p>è¦æƒ³åœ¨ scripts å†…ä½¿ç”¨å˜é‡ï¼Œä¸åŒç¯å¢ƒä¸‹æœ‰ä¸¤ç§è®¿é—®æ–¹å¼ï¼Œæ¯”å¦‚è®¿é—®é¡¹ç›®åç§° name:</p>

<pre><code class="language-JSON">// The following only works on Mac OS X/Linux (bash)
"bash-script": "echo Hello $npm_package_name",
// The following only works on a Windows machine
"win-script": "echo Hello %npm_package_name%"
</code></pre>

<p>è·¨å¹³å°ä½¿ç”¨çš„è¯å¯ä»¥ä½¿ç”¨ <a href="https://www.npmjs.com/package/cross-var">cross-var</a> æˆ–æ›´è½»é‡çš„ cross-var-no-babel:</p>

<pre><code class="language-JSON">// å•å‘½ä»¤å†™æ³•
"script": "cross-var echo Hello $npm_package_name"
// å¤šå‘½ä»¤å†™æ³•
"build:css": "cross-var \"node-sass src/index.scss | postcss -c .postcssrc.json | cssmin &gt; public/$npm_package_version/index.min.css\"",
</code></pre>

<h3 id="è·¨å¹³å°å…¼å®¹">è·¨å¹³å°å…¼å®¹</h3>

<p>é™¤äº†ä¸Šè¿°çš„å˜é‡ï¼Œè¿˜æœ‰æ–‡ä»¶ç³»ç»Ÿçš„æ“ä½œä¹Ÿéœ€è¦è€ƒè™‘è·¨å¹³å°å…¼å®¹ï¼Œæ¯”å¦‚:</p>

<ul>
  <li>rimraf æˆ– del-cli: ç”¨æ¥åˆ é™¤æ–‡ä»¶å’Œç›®å½•ï¼Œå®ç°ç±»ä¼¼äº <code>rm -rf</code> çš„åŠŸèƒ½ï¼›</li>
  <li>cpr: ç”¨äºæ‹·è´ã€å¤åˆ¶æ–‡ä»¶å’Œç›®å½•ï¼Œå®ç°ç±»ä¼¼äº <code>cp -r</code> çš„åŠŸèƒ½ï¼›</li>
  <li>make-dir-cli: ç”¨äºåˆ›å»ºç›®å½•ï¼Œå®ç°ç±»ä¼¼äº <code>mkdir -p</code> çš„åŠŸèƒ½</li>
</ul>

<pre><code class="language-JSON">"cover:cleanup": "rm -rf coverage &amp;&amp; rm -rf .nyc_output",
// è·¨å¹³å°è½¬æ¢
"cover:cleanup": "rimraf coverage &amp;&amp; rimraf .nyc_output"
</code></pre>

<p>è®¾ç½®ç¯å¢ƒå˜é‡æ—¶å¯ä»¥é‡‡ç”¨ <a href="https://www.npmjs.com/package/cross-env"><strong>cross-env</strong></a>:</p>

<pre><code class="language-JSON">"test": "NODE_ENV=test mocha tests/",
// è·¨å¹³å°è½¬æ¢
"test": "cross-env NODE_ENV=test mocha tests/",
</code></pre>

<p>ä½†æ˜¯ cross-env å¹¶ä¸èƒ½è§£å†³å¤§å‹é¡¹ç›®ä¸­è‡ªå®šä¹‰ç¯å¢ƒå˜é‡çš„æŒä¹…åŒ–é—®é¢˜ï¼Œè¿™é‡Œå†æ¨èä¸€ä¸ª <a href="https://github.com/toddbluhm/env-cmd"><strong>env-cmd</strong></a>ï¼Œå…¶ç¼ºç‚¹æ˜¯ä¸æ”¯æŒåœ¨å‘½ä»¤è¡Œä¸­è‡ªå®šä¹‰ç¯å¢ƒå˜é‡:</p>

<pre><code class="language-TEXT"># æ–‡ä»¶ ./test/.env
ENV1=THANKS
ENV2=FOR ALL
ENV3=THE FISH
</code></pre>

<pre><code class="language-JSON">{
  "scripts": {
    "test": "env-cmd ./test/.env mocha -R spec"
  }
}
</code></pre>

<pre><code class="language-SHELL"># å‘½ä»¤è¡Œ
./node_modules/.bin/env-cmd ./test/.env node index.js
</code></pre>

<p>å¯¹äºæ›´å¤æ‚çš„ç¯å¢ƒï¼Œæˆ‘ä»¬åœ¨é…ç½®æ–‡ä»¶ <code class="highlighter-rouge">.env-cmdrc</code> ä¸­å®šä¹‰ç¯å¢ƒå˜é‡:</p>

<pre><code class="language-JSON">{
  "dev": {
    "ENV1": "Thanks",
    "ENV2": "For All"
  },
  "test": {
    "ENV1": "No Thanks",
    "ENV3": "!"
  },
  "prod": {
    "ENV1": "The Fish"
  }
}
</code></pre>

<pre><code class="language-JSON">{
  "scripts": {
    "test": "env-cmd dev mocha -R spec"
  }
}
</code></pre>

<pre><code class="language-SHELL"># å‘½ä»¤è¡ŒåŒæ—¶ä¼ è¾“å¤šä¸ªé…ç½®
./node_modules/.bin/env-cmd test,production node index.js
</code></pre>

<h3 id="ç‰ˆæœ¬å·">ç‰ˆæœ¬å·</h3>

<p>è¿™é‡Œå¯¹ç‰ˆæœ¬å·åšä¸€äº›è§£é‡Šï¼Œä¸»è¦æ ¼å¼ä¸º <code class="highlighter-rouge">major.minor.patch</code> ï¼Œå³<code class="highlighter-rouge">ä¸»ç‰ˆæœ¬å·.æ¬¡ç‰ˆæœ¬å·.ä¿®è¡¥ç‰ˆæœ¬å·</code>ï¼Œè¯­ä¹‰åŒ–è§„èŒƒå¯ä»¥<a href="https://semver.org/lang/zh-CN/">å‚è€ƒè¿™é‡Œ</a>:</p>

<ul>
  <li>æ³¢æµªç¬¦å·(<strong>~</strong>) - ä¼šæ›´æ–°åˆ°å½“å‰ minor version(ä¸­é—´æ•°å­—)ä¸­æœ€æ–°çš„ç‰ˆæœ¬ï¼Œä¾‹å¦‚æ›´æ–° ~1.10.0ï¼Œè¿™ä¸ªåº“ä¼šå»åŒ¹é…æ›´æ–°åˆ° 1.10.x çš„æœ€æ–°ç‰ˆæœ¬</li>
  <li>æ’å…¥ç¬¦å·(<strong>^</strong>) - ä¼šæ›´æ–°åˆ°å½“å‰ major version(é¦–ä½æ•°å­—)ä¸­æœ€æ–°çš„ç‰ˆæœ¬ï¼Œä¾‹å¦‚æ›´æ–° ^1.10.0ï¼Œè¿™ä¸ªåº“ä¼šå»åŒ¹é…æ›´æ–°åˆ° 1.x.x çš„æœ€æ–°ç‰ˆæœ¬</li>
  <li>ä¸å¸¦ç¬¦å· - åŒ¹é…å…·ä½“ç‰ˆæœ¬å·</li>
</ul>

<table>
  <thead>
    <tr>
      <th style="text-align: left">åºå·</th>
      <th style="text-align: left">æè¿°</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left"><strong>major</strong></td>
      <td style="text-align: left">è¿›è¡Œä¸å‘ä¸‹å…¼å®¹çš„ä¿®æ”¹æ—¶ï¼Œé€’å¢ä¸»ç‰ˆæœ¬å·</td>
    </tr>
    <tr>
      <td style="text-align: left"><strong>minor</strong></td>
      <td style="text-align: left">ä¿æŒå‘ä¸‹å…¼å®¹,æ–°å¢ç‰¹æ€§æ—¶ï¼Œé€’å¢æ¬¡ç‰ˆæœ¬å·</td>
    </tr>
    <tr>
      <td style="text-align: left"><strong>patch</strong></td>
      <td style="text-align: left">ä¿æŒå‘ä¸‹å…¼å®¹,ä¿®å¤é—®é¢˜ä½†ä¸å½±å“ç‰¹æ€§æ—¶ï¼Œé€’å¢ä¿®è®¢å·</td>
    </tr>
  </tbody>
</table>

<pre><code class="language-JSON">"dependencies": {
  "async": "1.2.1",
  "chokidar": "^1.0.0",
  "vizion": "latest", # å½“å‰å‘å¸ƒç‰ˆæœ¬
  "babel": "^5.x",
  "pm2-logs": "~0.1.1",
  "ikt": "git+http://ikt.pm2.io/ikt.git#master", # Git URL å½¢å¼çš„ä¾èµ–
  "punt": "*",
  "express": "&gt;=3.0.0",
  "connect": "1.30.2 - 2.30.2",
}
</code></pre>

<h2 id="scripty">scripty</h2>

<p>å½“è„šæœ¬å‘½ä»¤æ¯”è¾ƒå¤šçš„æ—¶å€™ï¼Œå¯ä»¥é€šè¿‡ <a href="https://github.com/testdouble/scripty">scripty</a> å¯ä»¥ä»å°† scripts å‰¥ç¦»åˆ°å•ç‹¬æ–‡ä»¶ä¸­ç®¡ç†ï¼Œè¿˜æ˜¯çœ‹æœ€åˆçš„æ —å­:</p>

<pre><code class="language-SHELL">"call:tate": "echo tate",
"call:snow": "echo snow",
</code></pre>

<p>å¯¹åº”æ ¹ç›®å½•ä¸‹åˆ›å»ºè„šæœ¬æ–‡ä»¶ï¼Œæ³¨æ„åœ¨æ‰§è¡Œè„šæœ¬æ—¶å¿…é¡»æ‹¥æœ‰å¯æ‰§è¡Œæƒé™:</p>

<pre><code class="language-SHELL">touch scripts/call/tate.sh # å†…å®¹ä¸º echo 'tate in scripty'
touch scripts/call/snow.sh

# æ·»åŠ å¯æ‰§è¡Œæƒé™
chmod -R a+x scripts/**/*.sh
</code></pre>

<p>ç„¶åå°† scripts åšä¿®æ”¹:</p>

<pre><code class="language-SHELL">"call:tate": "scripty",
"call:snow": "scripty",
</code></pre>

<p>æ‰§è¡Œå‘½ä»¤<code>npm run call:tate</code>åï¼Œä¼šæ‰“å°å¦‚ä¸‹ä¿¡æ¯:</p>

<pre><code class="language-SHELL">&gt; npm_scripts@1.0.0 call:tate /Users/tate/Desktop/lazyload-test
&gt; scripty

Executing "/Users/tate/Desktop/lazyload-test/scripts/call/tate.sh":

&gt; echo 'tate in scripty'
</code></pre>

<blockquote>
  <p>å½“ç„¶ä¹Ÿå¯ä»¥ç›´æ¥é€šè¿‡ node æ¥ç®¡ç†ï¼Œå°† shell è„šæœ¬æ”¹ä¸º node è„šæœ¬å¹¶æ‰§è¡Œï¼Œ<a href="https://www.npmjs.com/package/shelljs">shelljs</a> å¯ä»¥åœ¨ node ä¸­ä½¿ç”¨ shell å‘½ä»¤ã€‚</p>
</blockquote>

<h2 id="æ„å»ºæµæ°´çº¿">æ„å»ºæµæ°´çº¿</h2>

<p>ç”±äºç›®å‰æ²¡æœ‰å®æˆ˜ï¼Œå…³äºå¦‚ä½•æ„å»ºæµæ°´çº¿å¯ç›´æ¥<a href="https://juejin.im/book/5a1212bc51882531ea64df07/section/5a1214e3f265da432b4a6ad2">å‚è€ƒå°å†Œè¿™é‡Œ</a>ã€‚</p>

<h2 id="yarn--npm">yarn &amp; npm</h2>

<p><strong>åŒ…ç®¡ç†å™¨</strong>: ä»£ç é€šè¿‡åŒ…(package)æˆ–è€…ç§°ä¸ºæ¨¡å—(module)çš„æ–¹å¼æ¥å…±äº«ã€‚ä¸€ä¸ªåŒ…é‡ŒåŒ…å«æ‰€æœ‰éœ€è¦å…±äº«çš„ä»£ç ï¼Œä»¥åŠæè¿°åŒ…ä¿¡æ¯çš„æ–‡ä»¶ï¼Œç§°ä¸º package.jsonã€‚å’Œ NPM 5 çš„ <code>package-lock.json</code>é”æ–‡ä»¶ç±»ä¼¼ï¼Œé€šè¿‡<code>yarn.lock</code>è®°å½•æ¯ä¸€ä¸ªä¾èµ–é¡¹çš„ç¡®åˆ‡ç‰ˆæœ¬ä¿¡æ¯ã€‚</p>

<table>
  <thead>
    <tr>
      <th style="text-align: left">npm å‘½ä»¤</th>
      <th style="text-align: left">yarn å‘½ä»¤</th>
      <th style="text-align: left">åŠŸèƒ½æè¿°</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left">npm i</td>
      <td style="text-align: left">yarn (install)</td>
      <td style="text-align: left">æ ¹æ® package.json å®‰è£…æ‰€æœ‰ä¾èµ–</td>
    </tr>
    <tr>
      <td style="text-align: left">npm i (â€“save/-S) [package]</td>
      <td style="text-align: left">yarn add [package]</td>
      <td style="text-align: left">æ·»åŠ ä¾èµ–åŒ…è‡³ dependencies</td>
    </tr>
    <tr>
      <td style="text-align: left">npm i [â€“save-dev/-D] [package]</td>
      <td style="text-align: left">yarn add [â€“dev/-D] [package]</td>
      <td style="text-align: left">æ·»åŠ ä¾èµ–åŒ…è‡³ devDependencies</td>
    </tr>
    <tr>
      <td style="text-align: left">npm i [â€“global/-g]</td>
      <td style="text-align: left">yarn global add</td>
      <td style="text-align: left">å…¨å±€å®‰è£…ä¾èµ–åŒ…</td>
    </tr>
    <tr>
      <td style="text-align: left">npm uninstall [package]</td>
      <td style="text-align: left">yarn remove [package]</td>
      <td style="text-align: left">ç§»é™¤ä¾èµ–åŒ…</td>
    </tr>
    <tr>
      <td style="text-align: left">npm update</td>
      <td style="text-align: left">yarn upgrade</td>
      <td style="text-align: left">å‡çº§ä¾èµ–åŒ…</td>
    </tr>
    <tr>
      <td style="text-align: left">npm init</td>
      <td style="text-align: left">yarn init</td>
      <td style="text-align: left">äº’åŠ¨å¼åˆ›å»º package.json æ–‡ä»¶</td>
    </tr>
    <tr>
      <td style="text-align: left">npm run</td>
      <td style="text-align: left">yarn run</td>
      <td style="text-align: left">è¿è¡Œ package.json ä¸­é¢„å®šä¹‰çš„è„šæœ¬</td>
    </tr>
  </tbody>
</table>

<p>yarn åœ¨ mac çš„ä¸¤ç§å®‰è£…æ–¹å¼:</p>

<pre><code class="language-SHELL"># é€šè¿‡ npm å®‰è£…
npm install --global yarn

# é€šè¿‡ homebrew å®‰è£…
brew install yarn
</code></pre>

<p>æ›´æ–°æ–¹å¼:</p>

<pre><code class="language-SHELL"># é€šè¿‡ Homebrew æ›´æ–°
brew upgrade yarn

# é€šè¿‡ yarn æ›´æ–°
yarn global add yarn
</code></pre>

<p>é‚£ä¹ˆå†ç®€å•å¯¹æ¯”ä¸‹ <code class="highlighter-rouge">npm install</code> å’Œ <code class="highlighter-rouge">update</code> çš„åŒºåˆ«ï¼Œå³å¯¹äºå·²ç»å®‰è£…çš„åŒ…ï¼Œæ²¡æœ‰æ˜ç¡®ç‰ˆæœ¬å·çš„ï¼Œå‰è€…ä¼šå¿½ç•¥:</p>

<pre><code class="language-TEXT">{
  "name":          "my-project",
  "version":       "1.0",                             // install   update
  "dependencies":  {                                  // ------------------
    "already-installed-versionless-module":  "*",     // ignores   "1.0" -&gt; "1.1"
    "already-installed-semver-module":       "^1.4.3" // ignores   "1.4.3" -&gt; "1.5.2"
    "already-installed-versioned-module":    "3.4.1"  // ignores   ignores
    "not-yet-installed-versionless-module":  "*",     // installs  installs
    "not-yet-installed-semver-module":       "^4.2.1" // installs  installs
    "not-yet-installed-versioned-module":    "2.7.8"  // installs  installs
  }
}
</code></pre>

<p>å¦å¤–å¯¹äºå®‰è£… <code class="highlighter-rouge">devDependecies</code> ä¸­çš„ä¾èµ–è¿˜æœ‰ä¸€äº›åŒºåˆ«:</p>

<ul>
  <li>npm install é»˜è®¤ä¼šå®‰è£…ï¼Œé™¤éæ·»åŠ  <code class="highlighter-rouge">--production</code> å‚æ•°</li>
  <li>npm update ä¸ä¼šé»˜è®¤å®‰è£…ï¼Œé™¤éæ·»åŠ  <code class="highlighter-rouge">--dev</code> å‚æ•°</li>
</ul>

<h2 id="npx">npx</h2>

<p><a href="https://github.com/zkat/npx"><strong>npx</strong></a> æ˜¯ <a href="https://github.com/npm/npm/releases/tag/v5.2.0">npm@5.2.0</a> å¼•å…¥çš„ä¸€ä¸ªå‘½ä»¤ï¼Œé‚£ä¹ˆå®ƒæ˜¯ç”¨æ¥å¹²å˜›çš„å‘¢ï¼Ÿé‡‡ç”¨å®˜æ–¹çš„è¯´æ³•å°±æ˜¯:</p>

<blockquote>
  <p>npx is a tool intended to help round out the experience of using packages from the npm registryâ€Šâ€”â€Šthe same way npm makes it super easy to install and manage dependencies hosted on the registry, npx makes it easy to use CLI tools and other executables hosted on the registry. It greatly simplifies a number of things that, until now, required a bit of ceremony to do with plain npm</p>
</blockquote>

<h3 id="æŠ›å¼ƒ-run-script">æŠ›å¼ƒ run-script</h3>

<p>åœ¨è¿™ä¹‹å‰ï¼Œnpm ç”Ÿæ€è¶Šæ¥è¶Šå€¾å‘äºå°† devDependencies å®‰è£…åŒ…ä½œä¸ºé¡¹ç›®æœ¬åœ°(project-local)ä¾èµ–å®‰è£…ï¼Œè€Œä¸æ˜¯å…¨å±€å®‰è£…ï¼Œè¿™æ ·å°±æ›´åŠ æ–¹ä¾¿å»ç®¡ç†åƒ gulpã€webpack è¿™äº›å·¥å…·çš„ç‰ˆæœ¬ï¼Œæ¯”å¦‚ webpack æœ¬åœ°å®‰è£…æ—¶å°±æ¨èå±€éƒ¨å®‰è£…:</p>

<blockquote>
  <p>å¯¹äºå¤§å¤šæ•°é¡¹ç›®ï¼Œæˆ‘ä»¬å»ºè®®æœ¬åœ°å®‰è£…ã€‚è¿™å¯ä»¥åœ¨å¼•å…¥çªç ´å¼å˜æ›´(breaking change)ç‰ˆæœ¬æ—¶ï¼Œæ›´å®¹æ˜“åˆ†åˆ«å‡çº§é¡¹ç›®ã€‚é€šå¸¸ä¼šé€šè¿‡è¿è¡Œä¸€ä¸ªæˆ–å¤šä¸ª npm scripts ä»¥åœ¨æœ¬åœ° node_modules ç›®å½•ä¸­æŸ¥æ‰¾å®‰è£…çš„ webpackï¼Œæƒ³è¦è¿è¡Œæœ¬åœ°å®‰è£…çš„ webpackï¼Œä½ å¯ä»¥é€šè¿‡ node_modules/.bin/webpack æ¥è®¿é—®å®ƒçš„ bin ç‰ˆæœ¬ã€‚<a href="https://webpack.docschina.org/guides/installation/">è¯¦è§è¿™é‡Œ</a> ğŸ‘ˆ</p>
</blockquote>

<p>è¾£ä¹ˆæ­¤å‰è¦è¿™ä¹ˆåšçš„è¯ï¼Œæœ‰ä»¥ä¸‹ä¸¤ç§æ–¹æ³•:</p>

<p>1ã€åœ¨ run-script ä¸­ç”³æ˜ï¼Œå¹¶æ‰§è¡Œ <code class="highlighter-rouge">npm build</code></p>

<pre><code class="language-JSON">"scripts": {
  "build": "webpack --config webpack.config.js"
}
</code></pre>

<p>2ã€ç›´æ¥æ‰¾åˆ°é¡¹ç›®æœ¬åœ°çš„ä½ç½®å¹¶æ‰§è¡Œ</p>

<pre><code class="language-SHELL">./node_modules/.bin/webpack --config webpack.config.js
</code></pre>

<p>æŠ›å¼€ä»¥ä¸Šä¸¤ç§å†™æ³•è€Œä½¿ç”¨ npx çš„è¯ï¼Œåªç”¨è¾“å…¥ä¸‹é¢å‘½ä»¤å³å¯:</p>

<pre><code class="language-SHELL">npx webpack --config webpack.config.js
</code></pre>

<h3 id="executing-one-off-commands">Executing one-off commands</h3>

<p>npx å¯ä»¥è®©ä½ å»æ‰§è¡Œ npm åŒ…é‡Œçš„äºŒè¿›åˆ¶æ–‡ä»¶è€Œä¸ç”¨å»å…¨å±€å®‰è£…ä»–ä»¬ï¼Œå› æ­¤åˆ©ç”¨ npx è¿˜å¯ä»¥å®ç° Executing one-off commandsï¼Œå³æ‰§è¡Œä¸€æ¬¡æ€§å‘½ä»¤ã€‚npx is the last thing you need to globally install: &gt; <code class="highlighter-rouge">npm i -g npx</code> (this command also updates npx)ã€‚</p>

<p>ä¸‹é¢ä¸¾ä¸ª <code class="highlighter-rouge">create-react-app</code> æ —å­ï¼Œ<code class="highlighter-rouge">$ npx create-react-app my-cool-new-app</code> å®‰è£…äº†ä¸€ä¸ªä¸´æ—¶çš„åŒ…å¹¶è¿è¡Œ, æ²¡æœ‰æ±¡æŸ“å…¨å±€å®‰è£…è€Œä¸”å‘½ä»¤ç®€å•:</p>

<p><img src="https://cdn-images-1.medium.com/max/1600/1*OlIRsvVO5aK7ja9HmwXz_Q.gif" alt="create-react-app" /></p>

<p>ä¸‹åˆ—æ˜¯ä¸€äº›æ¯”è¾ƒæœ‰è¶£çš„åŒ…ï¼Œå¯ä»¥ç”¨ npx å°è¯•ä¸€ç•ª ğŸ˜œï¼Œæ›´å¤šå‘½ä»¤å¯ä»¥å‚è€ƒ <a href="https://github.com/junosuarez/awesome-npx">awesome-npx</a>:</p>

<pre><code class="language-TEXT">[~] npx cowsay Tate
npx: 10 å®‰è£…æˆåŠŸï¼Œç”¨æ—¶ 1.223 ç§’
 _____
&lt; Tate &gt;
 -----
        \   ^__^
         \  (oo)\_______
            (__)\       )\/\
                ||----w |
                ||     ||
</code></pre>

<pre><code class="language-TEXT">[~] npx happy-birthday -u snow
npx: 2 å®‰è£…æˆåŠŸï¼Œç”¨æ—¶ 0.776 ç§’

ğŸ‚
ãŠèª•ç”Ÿæ—¥ãŠã‚ã§ã¨ã†ã€snowï¼
ğŸ‰
</code></pre>

<p>npx è¿˜æ”¯æŒä¸€äº›å…¶ä»–çš„å‚æ•°:</p>

<p><img src="https://cdn-images-1.medium.com/max/1600/1*JqCC1irC-XxXAWiThpOUiw.gif" alt="npx-options" /></p>

<blockquote>
  <p><code class="highlighter-rouge">$ npx -p cowsay -p lolcatjs -c 'echo "$npm_package_name@$npm_package_version" | cowsay | lolcatjs'</code> installs both cowsay and lolcatjs, and gives the script access to a slew of <code class="highlighter-rouge">$npm_</code> variables from run scripts.</p>
</blockquote>

<h3 id="æ§åˆ¶-node-ç‰ˆæœ¬">æ§åˆ¶ node ç‰ˆæœ¬</h3>

<p>node ç‰ˆæœ¬çš„æ§åˆ¶ä¹‹å‰ä¸€èˆ¬éƒ½é‡‡ç”¨ <a href="https://github.com/nvm-sh/nvm"><strong>nvm</strong></a>ã€<a href="https://github.com/tj/n"><strong>n</strong></a> ç­‰ç‰ˆæœ¬ç®¡ç†å·¥å…·ï¼Œç°åœ¨çš„è¯ npx å°±èƒ½åšåˆ°:</p>

<pre><code class="language-SHELL">npx -p node@&lt;version&gt;
</code></pre>

<pre><code class="language-SHELL">[~] npx node@6 -v
v6.17.1
[~] npx -p node@7 -- node -v
v7.10.1
[~] node -v
v11.14.0
</code></pre>

<p>ä¸‹å›¾æ˜¯ n çš„ä½¿ç”¨ç¤ºä¾‹:</p>

<p><img src="https://camo.githubusercontent.com/e3c6ac1ad2a69e2e969597b69d794658cb64df88/687474703a2f2f6e696d69742e696f2f696d616765732f6e2f6e2e676966" alt="n" /></p>

<h2 id="å‚è€ƒé“¾æ¥">å‚è€ƒé“¾æ¥</h2>

<ol>
  <li><a href="https://juejin.im/book/5a1212bc51882531ea64df07/section/5a1212bcf265da431c6fe677">æ˜é‡‘å°å†Œ - ç”¨ npm script æ‰“é€ è¶…æºœçš„å‰ç«¯å·¥ä½œæµ</a> By ç‹ä»•å†›</li>
  <li><a href="http://www.ruanyifeng.com/blog/2016/10/npm_scripts.html">npm scripts ä½¿ç”¨æŒ‡å—</a> By é˜®ä¸€å³°</li>
  <li><a href="http://www.qcyoung.com/2016/02/28/%E4%BD%BF%E7%94%A8npm%20scripts%E6%9E%84%E5%BB%BA%E9%A1%B9%E7%9B%AE/#bei-jing">ä½¿ç”¨ npm scripts æ„å»ºé¡¹ç›®</a> By é’æ˜¥æ ·</li>
  <li><a href="https://yarnpkg.com/zh-Hans/docs">yarn å®˜ç½‘</a></li>
  <li><a href="https://jeffjade.com/2017/12/30/135-npm-vs-yarn-detial-memo/">Npm vs Yarn ä¹‹å¤‡å¿˜è¯¦å•</a> By æ™šæ™´å¹½è‰è½©è½©ä¸»</li>
  <li><a href="https://cloud.tencent.com/developer/article/1020507">npm5 æ–°ç‰ˆåŠŸèƒ½ç‰¹æ€§è§£æåŠä¸ yarn è¯„æµ‹å¯¹æ¯”</a> By é©¬é“–</li>
  <li><a href="https://github.com/ragingDream/blog/issues/32">Package.json ä¸­åº“çš„ç‰ˆæœ¬å·è¯¦è§£</a> By ragingDream</li>
  <li><a href="https://stackoverflow.com/questions/12478679/npm-install-vs-update-whats-the-difference">npm install vs. update - whatâ€™s the difference? - stackoverflow</a></li>
  <li><a href="https://medium.com/@maybekatz/introducing-npx-an-npm-package-runner-55f7d4bd282b">Introducing npx: an npm package runner</a> By Kat MarchÃ¡n</li>
</ol>
 
<div id="gitalk-container"></div>
<script>
    var gitalk = new Gitalk({
      enable: true,
      clientID: '020f142489f80c92b097',
      clientSecret: '1fa083372b44031cf1b8249251515c4e3d54c69d',
      repo: 'tate-young.github.io',
      owner: 'Tate-Young',
      admin: ['Tate-Young'],
      id: location.pathname,      // Ensure uniqueness and length less than 50
      distractionFreeMode: false  // Facebook-like distraction free mode
    })

    gitalk.render('gitalk-container')
</script>
<!-- disqus -->
<!-- <div id="disqus_thread"></div>
<script>
    /**
     *  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
     *  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables
     */

    var disqus_config = function () {
        this.page.url = 'https://tate-young.github.io/2018/06/27/npm-scripts.html';
        this.page.identifier = '/2018/06/27/npm-scripts';
        this.page.title = 'NPM Scripts';
    };

    (function () { // REQUIRED CONFIGURATION VARIABLE: EDIT THE SHORTNAME BELOW
        var d = document,
            s = d.createElement('script');

        s.src = '//tate.disqus.com/embed.js'; // IMPORTANT: Replace EXAMPLE with your forum shortname!

        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the
    <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a>
</noscript> -->


            <!-- <p class="post-info">
			æœ¬æ–‡ç”± <a href="/">liberxue</a> åˆ›ä½œï¼Œé‡‡ç”¨ <a href="https://creativecommons.org/licenses/by/4.0/" target="_blank" rel="external nofollow">çŸ¥è¯†å…±äº«ç½²å4.0</a> å›½é™…è®¸å¯åè®®è¿›è¡Œè®¸å¯<br>æœ¬ç«™æ–‡ç« é™¤æ³¨æ˜è½¬è½½/å‡ºå¤„å¤–ï¼Œå‡ä¸ºæœ¬ç«™åŸåˆ›æˆ–ç¿»è¯‘ï¼Œè½¬è½½å‰è¯·åŠ¡å¿…ç½²å<br>æœ€åç¼–è¾‘æ—¶é—´ä¸º:2018-06-27 17:57:00</p> -->
        </div>
    </article>

    <!-- <div class="related-post-lists">
	<div class="post-lists">
		<div class="post-lists-body">
					<div class="post-list-item">
				<div class="post-list-item-container">
					<div class="item-label">
						<div class="item-title"><a href="induction.html">å½’çº³çš„éšæƒ³</a></div>
						<div class="item-meta clearfix">
														<div class="item-meta-ico bg-ico-image" style="background: url('../usr/themes/pinghsu/images/bg-ico.png') no-repeat;background-size: 40px auto;"></div>
	                        							<div class="item-meta-cat"><a href="../category/thoughts/index.html">Thoughts</a></div>
						</div>
					</div>
				</div>
			</div>
				</div>
	</div>
</div> -->

    <!-- <footer class="footer bg-white">
	<div class="footer-social">
		<div class="footer-container clearfix">
			<div class="social-list">
	 <a class="social segmentfault" target="blank" href="https://segmentfault.com/u/liberxue" title="è®¿é—® LiberXue_Twitter" data-hover="Segmentfault">Segmentfault</a>
    <a class="social github" target="blank" href="https://github.com/liberxue" title="è®¿é—® LiberXue_Twitter" data-hover="GitHub">GitHub</a>
    <a class="social twitter" target="blank" href="http://twitter.com/liberxue" title="è®¿é—® LiberXue_Twitter" data-hover="Twitter">Twitter</a>
     <a class="social stackoverflow" target="blank" href="https://stackoverflow.com/users/6902190/liberxue" title="è®¿é—® LiberXue_stackoverflow" data-hover="StackOverflow">StackOverflow</a>
          <a class="social oschina" target="blank" href="https://my.oschina.net/bolanzw" title="è®¿é—® LiberXue_Oschina" data-hover="Oschina">Oschina</a>
     <a class="social rss" target="blank" href="/feed.xml"title="è®¿é—® LiberXue_RSS" data-hover="RSS">RSS</a>
	</div>
		</div>
	</div>
	<div class="footer-meta">
        <div class="footer-container">
            <div class="meta-item meta-copyright">
                <div class="meta-copyright-info">
                    <a href="/" class="info-logo">
                         <img src="http://localhost:4000/style/images/logo-liberxue.png"   title="è®¿é—® LiberXue_blog" data-hover="LiberXue_blog" alt="LiberXue_blog" /> </a>
                    <div class="info-text">
                        <p>Theme is <a href="http://www.liberxue.com/2017/08/03/Jekyllthemes.html" title="è®¿é—® Jekyll liberxueä¸»é¢˜"  data-hover="Jekyll liberxue"target="_blank">Jekyll liberxue</a> by <a href="http://www.liberxue.com/about" target="_blank">liberxue</a></p>
                        <p>Powered by <a href="http://localhost:4000/tags/#Jekyll" title="Jekyll" data-hover="Jekyll" target="_blank" rel="nofollow">Jekyll</a></p>
                        <p>&copy; 2017 <a href="/feed.xml"  title="è®¿é—® liberxue blog RSS" data-hover="liberxue blog RSS">liberxue blog RSS</a></p>
                        <p>æ€»è®¡æ–‡ç« ï¼šç¯‡</p>
                      <p>æœ¬blogå·²å¼€æºç‚¹å‡»Fork</p><iframe src="http://ghbtns.com/github-btn.html?user=liberxue&repo=liberxue.github.io&type=fork&count=true" allowtransparency="true" frameborder="0" scrolling="0" width="95" height="20"></iframe>
                    </div>
                </div>
            </div>
            <div class="meta-item meta-posts">
                <h3 class="meta-title">ç½®é¡¶æ–‡ç« </h3>
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
            </div>
            <div class="meta-item meta-comments">
                <h3 class="meta-title">æœ€æ–°æ–‡ç« </h3>
  
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
</div>
		</div>
    </div>
</footer> -->
<script src="//cdn.bootcss.com/jquery/2.2.2/jquery.min.js"></script>
<script src="//cdn.bootcss.com/bootstrap-3-typeahead/4.0.2/bootstrap3-typeahead.js"></script>
<script async src="/search/js/520.js"></script>
<script async src="/search/js/gtag.js"></script>
<!-- <script src="/search/js/canvas.js"></script> -->

<script>
    $(function () {
        setTimeout(function () {
            $('code').removeClass('hljs');
            $('code').removeClass('language');
        }, 90);
    });
    (function () {
        var bp = document.createElement('script');
        var curProtocol = window.location.protocol.split(':')[0];
        if (curProtocol === 'https') {
            bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
        } else {
            bp.src = 'http://push.zhanzhang.baidu.com/push.js';
        }
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(bp, s);
    })();
</script>

    <!--liberxueconnnet-menu-->
    <div id="directory-content" class="directory-content">
        <div id="directory"></div>
    </div>
    <!--liberxueconnnet-menu-->
    <script>
      const directoryContainer = document.getElementById('directory')
      const postTitle = document.getElementsByClassName('post-title')[0]
      var postDirectoryBuild = function () {
        var postChildren = function children(childNodes, reg) {
          var result = [],
              isReg = typeof reg === 'object',
              isStr = typeof reg === 'string',
              node, i, len;
          for (i = 0, len = childNodes.length; i < len; i++) {
            node = childNodes[i];
            if ((node.nodeType === 1 || node.nodeType === 9) &&
              (!reg ||
                  isReg && reg.test(node.tagName.toLowerCase()) ||
                  isStr && node.tagName.toLowerCase() === reg)) {
                result.push(node);
              }
            }
            return result;
          },
          createPostDirectory = function (article, directory, isDirNum) {
            var contentArr = [],
                titleId = [],
                levelArr, root, level,
                currentList, list, li, link, i, len;
            levelArr = (function (article, contentArr, titleId) {
                  var titleElem = postChildren(article.childNodes, /^h\d$/),
                      levelArr = [],
                      lastNum = 1,
                      lastRevNum = 1,
                      count = 0,
                      guid = 1,
                      id = 'directory' + (Math.random() + '').replace(/\D/, ''),
                      lastRevNum, num, elem;
                  while (titleElem.length) {
                      elem = titleElem.shift();
                      contentArr.push(elem.innerHTML);
                      num = +elem.tagName.match(/\d/)[0];
                      if (num > lastNum) {
                          levelArr.push(1);
                          lastRevNum += 1;
                      } else if (num === lastRevNum ||
                          num > lastRevNum && num <= lastNum) {
                          levelArr.push(0);
                          lastRevNum = lastRevNum;
                      } else if (num < lastRevNum) {
                          levelArr.push(num - lastRevNum);
                          lastRevNum = num;
                      }
                      count += levelArr[levelArr.length - 1];
                      lastNum = num;
                      elem.id = elem.id || (id + guid++);
                      titleId.push(elem.id);
                  }
                  if (count !== 0 && levelArr[0] === 1) levelArr[0] = 0;

                  return levelArr;
              })(article, contentArr, titleId);
              currentList = root = document.createElement('ul');
              dirNum = [0];
              for (i = 0, len = levelArr.length; i < len; i++) {
                  level = levelArr[i];
                  if (level === 1) {
                      list = document.createElement('ul');
                      if (!currentList.lastElementChild) {
                          currentList.appendChild(document.createElement('li'));
                      }
                      currentList.lastElementChild.appendChild(list);
                      currentList = list;
                      dirNum.push(0);
                  } else if (level < 0) {
                      level *= 2;
                      while (level++) {
                          if (level % 2) dirNum.pop();
                          currentList = currentList.parentNode;
                      }
                  }
                  dirNum[dirNum.length - 1]++;
                  li = document.createElement('li');
                  link = document.createElement('a');
                  link.name = '#' + titleId[i];
                  link.href = 'Javascript:;'
                  link.title = 'è®¿é—®' + titleId[i];
                  link.innerHTML = !isDirNum ? contentArr[i] :
                      dirNum.join('.') + ' ' + contentArr[i];
                  li.appendChild(link);
                  currentList.appendChild(li);
              }
            directory.appendChild(root);
          };
        createPostDirectory(document.getElementById('post-content'), directoryContainer, true);
      };
      postDirectoryBuild();
    </script>
    <script>
      // gtag('config', GA_TRACKING_ID, {
      //   'page_title' : 'Blog',
      //   'page_path': window.location.pathname,
      //   'post_title': 'watttsdfasdf',
      // });

    </script>
    <script src="//cdn.bootcss.com/highlight.js/9.12.0/highlight.min.js"></script>
    <script>
        lang = hljs.initHighlightingOnLoad();
    </script>
</body>

</html>
