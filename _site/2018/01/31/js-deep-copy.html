
<!DOCTYPE>
<html lang="zh-cn" data-scribe-reduced-action-queue="true">

<head>
    <meta content='浅拷贝和深拷贝 - Tate & Snow' name='title' />
    <meta content='浅拷贝和深拷贝 - Tate & Snow' name='og:title' />
    <title>浅拷贝和深拷贝 - Tate & Snow</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<title>浅拷贝和深拷贝 - Tate & Snow</title>
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="浅拷贝和深拷贝 - Tate & Snow">
<meta name="twitter:keywords" content="浅拷贝和深拷贝 - Tate & Snow" property='og:description' />
<meta property="og:type" content="article">
<meta property="og:title" content="浅拷贝和深拷贝 - Tate & Snow">
<meta name="og:keywords" content="浅拷贝和深拷贝 - Tate & Snow|浅拷贝和深拷贝什么是浅拷贝和深拷贝数据类型存储位置            数据类型      基本类型      引用类型                  举个栗子      Undefined、Null、Boolean、Numbe..."
  property='og:description' />
<link rel="icon" type="image/png" href="http://localhost:4000/style/favicons/favicon.ico" />
<link href="http://localhost:4000/style/favicons/favicon.ico" rel="shortcut icon" type="image/png">
<link rel="canonical" href="http://localhost:4000/">
<link rel="alternate" type="application/rss+xml" title="Liberxue" href="http://localhost:4000/feed.xml">
<meta charset="UTF-8">
<link rel="manifest" href="/manifest.json">
<link rel="shortcut icon" href="http://localhost:4000/style/favicons/favicon.ico" type="image/x-icon">
<meta name="keywords" content="浅拷贝和深拷贝什么是浅拷贝和深拷贝数据类型存储位置            数据类型      基本类型      引用类型                  举个栗子      Undefined、Null、Boolean、Numbe..." property='og:description'
/>
<meta name="description" content="nothing is more practicla than a good theory" />
<link href="https://cdn.bootcss.com/highlight.js/9.10.0/styles/xcode.min.css" rel="stylesheet">
<link href="http://localhost:4000/style/theme.css" rel="stylesheet"> 
<meta content='http://localhost:4000/2018/01/31/js-deep-copy.html' property='og:url' />
<meta content="http://localhost:4000/2018/01/31/js-deep-copy.html|浅拷贝和深拷贝什么是浅拷贝和深拷贝数据类型存储位置            数据类型      基本类型      引用类型                  举个栗子      Undefined、Null、Boolean、Numbe..." property='og:description'
/>
<meta content="article" property="og:type" />  
<script>
  (function (i, s, o, g, r, a, m) {
    i['GoogleAnalyticsObject'] = r;
    i[r] = i[r] || function () {
      (i[r].q = i[r].q || []).push(arguments)
    }, i[r].l = 1 * new Date();
    a = s.createElement(o),
      m = s.getElementsByTagName(o)[0];
    a.async = 1;
    a.src = g;
    m.parentNode.insertBefore(a, m)
  })(window, document, 'script', 'https://www.google-analytics.com/analytics.js', 'ga');
  ga('create', 'UA-101222464-1', 'auto');
  ga('send', 'pageview');
</script>
 
</head>

<body class="" gtools_scp_screen_capture_injected="true">
    <header id="header" class="header bg-white">
        <div class="navbar-container">
            <a href="/?tate" title="访问 Tate & Snow" class="navbar-logo">
                <img src="http://localhost:4000/style/images/tate.png" alt="Tate & Snow"> </a>
            <!-- <a href="/?tate" title="访问 Tate & Snow" class="navbar-logo">Tate & Snow</a>   -->
            <div class="navbar-menu">
                
                <a href="/?tate" title="访问 首页" data-hover="首页">首页</a>
                
                <a href="/front?tate" title="访问 前端" data-hover="前端">前端</a>
                
                <a href="/tool?tate" title="访问 框架" data-hover="框架">框架</a>
                
                <a href="/back?tate" title="访问 后端" data-hover="后端">后端</a>
                
                <a href="/tags?tate" title="访问 标签" data-hover="标签">标签</a>
                
                <a href="/README?tate" title="访问 关于" data-hover="关于">关于</a>
                
            </div>
            <!-- <div class="navbar-menu">
                
                <a href="http://localhost:4000/">首页</a>
                
                <a href="http://localhost:4000/front">前端</a>
                
                <a href="http://localhost:4000/tool">框架</a>
                
                <a href="http://localhost:4000/back">后端</a>
                
                <a href="http://localhost:4000/tags">标签</a>
                
                <a href="http://localhost:4000/README">关于</a>
                
            </div> -->
            <div class="navbar-search" onclick="">
                <span class="icon-search"></span>
                <form id="cb-search-btn" role="search">
                    <span class="search-box">
                        <input type="text" class="input" id="cb-search-content" required="true" placeholder="标题 标签..." maxlength="30" autocomplete="off">
                    </span>
                </form>
            </div>
            <div class="navbar-mobile-menu" onclick="">
                <span class="icon-menu cross">
                    <span class="middle"></span>
                </span>
                <ul>
                    
                    <li>
                        <a href="http://localhost:4000/">首页</a>
                    </li>
                    
                    <li>
                        <a href="http://localhost:4000/front">前端</a>
                    </li>
                    
                    <li>
                        <a href="http://localhost:4000/tool">框架</a>
                    </li>
                    
                    <li>
                        <a href="http://localhost:4000/back">后端</a>
                    </li>
                    
                    <li>
                        <a href="http://localhost:4000/tags">标签</a>
                    </li>
                    
                    <li>
                        <a href="http://localhost:4000/README">关于</a>
                    </li>
                    
                </ul>
            </div>
        </div>
    </header>
    <a href="#header" class="back-to-top">⤴Top⤴</a>
    <div class="post-header-thumb bg-white}">
        <div class="post-header-thumb-op"></div>
        <div class="post-header-thumb">
            <div class="post-header-thumb-container">
                <h1 class="post-title" itemprop="name headline">
                    浅拷贝和深拷贝</h1>
                <div class="post-data">
                    <time datetime="2018-01-31 17:15:00" itemprop="datePublished">发布时间：2018-01-31 17:15:00</time>
                    <a href="/tags#前端" title="访问 前端" data-hover="博客分类: 前端">博客分类: 前端</a>
                    <!-- <a href="#read"> 阅读次数: comments</a>  -->
                </div>
                <div class="post-tags">
                       
                    <a href="/tags#JavaScript" title="访问JavaScript" data-hover="JavaScript">
                        JavaScript
                        <span>(14)</span>
                        
                    </a>
                       
                </div>
            </div>
        </div>
    </div>
    <article class="main-content post-page" itemscope itemtype="http://schema.org/Article">
        <div class="post-header">
            <h1 class="post-title" itemprop="name headline">
                浅拷贝和深拷贝</h1>
            <div class="post-data">
                <time datetime="2018-01-31 17:15:00" itemprop="datePublished">2018-01-31 17:15:00</time>
            </div>
        </div>
        <div id="post-content" class="post-content" itemprop="articleBody">
            <p class="post-tags">
                   
                <a href="/tags#JavaScript" title="访问JavaScript" data-hover="JavaScript">
                    JavaScript
                    <span>(14)</span>
                    </a>
                   
            </p>
            <h1 id="浅拷贝和深拷贝">浅拷贝和深拷贝</h1>

<h2 id="什么是浅拷贝和深拷贝">什么是浅拷贝和深拷贝</h2>

<h3 id="数据类型存储位置">数据类型存储位置</h3>

<table>
  <thead>
    <tr>
      <th style="text-align: left">数据类型</th>
      <th style="text-align: left">基本类型</th>
      <th style="text-align: left">引用类型</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left">举个栗子</td>
      <td style="text-align: left">Undefined、Null、Boolean、Number、String、Symbol</td>
      <td style="text-align: left">Function、Array、Object、String、Number等</td>
    </tr>
    <tr>
      <td style="text-align: left">存储位置</td>
      <td style="text-align: left">保存在栈区</td>
      <td style="text-align: left">引用存放在栈区，实际对象保存在堆区</td>
    </tr>
    <tr>
      <td style="text-align: left">访问方式</td>
      <td style="text-align: left">存放在栈中的简单数据段，可按值访问</td>
      <td style="text-align: left">首先从栈中获得该对象的地址指针，然后再从堆中取得所需的数据</td>
    </tr>
  </tbody>
</table>

<pre><code class="language-TEXT">Primitive values are data that are stored on the stack.
Primitive value is stored directly in the location that the variable accesses.
Reference values are objects that are stored in the heap.
Reference value stored in the variable location is a pointer to a location in memory where the object is stored.
</code></pre>

<h3 id="什么是栈内存和堆内存">什么是栈内存和堆内存</h3>

<p>在 JS 中，每一个数据都需要一个内存空间。内存空间又被分为两种，栈内存(stack)与堆内存(heap)。</p>

<p><strong>栈内存</strong>主要存储基本类型和对象的引用，内存空间是在程序运行前静态分配的，其优势是存取速度比堆要快，但缺点是存在栈中的数据大小与生存期必须是确定的，缺乏灵活性。</p>

<p><strong>堆内存</strong>用于存储引用类型，内存空间是在程序运行时动态分配的，因此存取速度较慢，动态分配的内存在被程序员明确释放或被垃圾回收之前一直有效，没有一个固定的生存期。</p>

<blockquote>
  <p>从数据结构层面来讲，栈和队列可以指串列形式的<strong><a href="https://segmentfault.com/a/1190000004305771">数据结构</a></strong>。堆则指一种<strong><a href="https://zh.wikipedia.org/wiki/%E5%A0%86_(%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84)">树形数据结构</a></strong>。</p>
</blockquote>

<h3 id="栈内存和堆内存的区别">栈内存和堆内存的区别</h3>

<div class="language-js highlighter-rouge"><pre class="highlight"><code><span class="c1">// 内存地址指系统 RAM 中的特定位置，通常以十六进制的数字表示</span>
<span class="kd">var</span> <span class="nx">a1</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>   <span class="c1">// 栈内存</span>
<span class="kd">var</span> <span class="nx">a2</span> <span class="o">=</span> <span class="s1">'this is string'</span><span class="p">;</span> <span class="c1">// 栈内存</span>
<span class="kd">var</span> <span class="nx">a3</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span> <span class="c1">// 栈内存</span>

<span class="kd">var</span> <span class="nx">b</span> <span class="o">=</span> <span class="p">{</span> <span class="na">m</span><span class="p">:</span> <span class="mi">20</span> <span class="p">};</span> <span class="c1">// 变量b存在于栈内存中，{m: 20} 作为对象存在于堆内存中</span>
<span class="kd">var</span> <span class="nx">c</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">];</span> <span class="c1">// 变量c存在于栈内存中，[1, 2, 3] 作为对象存在于堆内存中</span>
</code></pre>
</div>

<p><img src="https://user-gold-cdn.xitu.io/2017/2/9/7c13147ecfecd8a6ce7f0b5a9782dd30?imageslim" alt="栈内存和堆内存" /></p>

<h3 id="深拷贝和浅拷贝的区别">深拷贝和浅拷贝的区别</h3>

<p>由于基本类型都是直接操作保存在变量中的实际值，故针对引用类型</p>

<table>
  <tbody>
    <tr>
      <td>浅拷贝</td>
      <td>拷贝的是对象的引用</td>
    </tr>
    <tr>
      <td>深拷贝</td>
      <td>拷贝的是对象实际的值，开辟新的内存地址</td>
    </tr>
  </tbody>
</table>

<h2 id="浅拷贝shallow-copy">浅拷贝(shallow copy)</h2>

<h3 id="浅拷贝-diy">浅拷贝 DIY</h3>

<div class="language-js highlighter-rouge"><pre class="highlight"><code><span class="c1">// 仅参考</span>
<span class="kd">function</span> <span class="nx">shallowCopy</span><span class="p">(</span><span class="nx">source</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">source</span> <span class="o">||</span> <span class="k">typeof</span> <span class="nx">source</span> <span class="o">!==</span> <span class="s1">'object'</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="s1">'error arguments'</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="kd">var</span> <span class="nx">targetObj</span> <span class="o">=</span> <span class="nx">source</span><span class="p">.</span><span class="nx">constructor</span> <span class="o">===</span> <span class="nb">Array</span> <span class="p">?</span> <span class="p">[]</span> <span class="p">:</span> <span class="p">{};</span>
    <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">keys</span> <span class="k">in</span> <span class="nx">source</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">source</span><span class="p">.</span><span class="nx">hasOwnProperty</span><span class="p">(</span><span class="nx">keys</span><span class="p">))</span> <span class="p">{</span>
            <span class="nx">targetObj</span><span class="p">[</span><span class="nx">keys</span><span class="p">]</span> <span class="o">=</span> <span class="nx">source</span><span class="p">[</span><span class="nx">keys</span><span class="p">];</span>
        <span class="p">}</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="nx">targetObj</span><span class="p">;</span>
<span class="p">}</span>
</code></pre>
</div>

<h3 id="第一种浅拷贝">第一种浅拷贝</h3>

<p>拷贝对象的引用</p>

<div class="language-js highlighter-rouge"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">p1</span> <span class="o">=</span> <span class="p">[</span><span class="s1">'Tate'</span><span class="p">,</span> <span class="p">{</span><span class="na">age</span><span class="p">:</span> <span class="mi">18</span><span class="p">}];</span>
<span class="kd">var</span> <span class="nx">p2</span> <span class="o">=</span> <span class="nx">p1</span><span class="p">;</span> <span class="c1">// 赋值，指针实际指向同一个对象</span>

<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">p1</span> <span class="o">===</span> <span class="nx">p2</span><span class="p">);</span> <span class="c1">// true</span>
<span class="nx">p2</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'Snow'</span><span class="p">;</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">p1</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span> <span class="c1">// "Snow"</span>
<span class="nx">p2</span><span class="p">[</span><span class="mi">1</span><span class="p">].</span><span class="nx">age</span> <span class="o">=</span> <span class="mi">26</span><span class="p">;</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">p1</span><span class="p">[</span><span class="mi">1</span><span class="p">].</span><span class="nx">age</span><span class="p">);</span> <span class="c1">// 26</span>
</code></pre>
</div>

<h3 id="第二种浅拷贝">第二种浅拷贝</h3>

<p>构造新的对象，并对源对象进行拷贝，但是对其内部的引用类型值，拷贝的是其引用</p>

<div class="language-js highlighter-rouge"><pre class="highlight"><code><span class="c1">// Array的slice()和concat()方法和Object.assign()、$.extend({}, obj)方法类似</span>
<span class="c1">// $.extend(true, {}, obj)为深拷贝</span>
<span class="kd">var</span> <span class="nx">p1</span> <span class="o">=</span> <span class="p">[</span><span class="s1">'Tate'</span><span class="p">,</span> <span class="p">{</span><span class="na">age</span><span class="p">:</span> <span class="mi">18</span><span class="p">}];</span>
<span class="kd">var</span> <span class="nx">p2</span> <span class="o">=</span> <span class="nx">p1</span><span class="p">.</span><span class="nx">slice</span><span class="p">();</span>
<span class="c1">// var p2 = [...p1]; ES6 使用扩展运算符...</span>

<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">p1</span> <span class="o">===</span> <span class="nx">p2</span><span class="p">);</span> <span class="c1">// false</span>
<span class="nx">p2</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'Snow'</span><span class="p">;</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">p1</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span> <span class="c1">// "Tate"</span>
<span class="nx">p2</span><span class="p">[</span><span class="mi">1</span><span class="p">].</span><span class="nx">age</span> <span class="o">=</span> <span class="mi">26</span><span class="p">;</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">p1</span><span class="p">[</span><span class="mi">1</span><span class="p">].</span><span class="nx">age</span><span class="p">);</span> <span class="c1">// 26</span>
</code></pre>
</div>

<blockquote>
  <p>可参考下 <a href="https://github.com/v8/v8/blob/ad82a40509c5b5b4680d4299c8f08d6c6d31af3c/src/js/array.js">slice 源码</a>，可看出它类似”浅拷贝 DIY”，只对最外层属性做了赋值操作，并没有继续做递归进行深拷贝。</p>
</blockquote>

<h2 id="深拷贝deep-copy">深拷贝(deep copy)</h2>

<h3 id="深拷贝-diy">深拷贝 DIY</h3>

<div class="language-js highlighter-rouge"><pre class="highlight"><code><span class="c1">// 递归实现一个深拷贝</span>
<span class="kd">function</span> <span class="nx">deepCopy</span><span class="p">(</span><span class="nx">source</span><span class="p">){</span>
   <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">source</span> <span class="o">||</span> <span class="k">typeof</span> <span class="nx">source</span> <span class="o">!==</span> <span class="s1">'object'</span><span class="p">){</span>
     <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="s1">'error arguments'</span><span class="p">,</span> <span class="s1">'shallowClone'</span><span class="p">);</span>
   <span class="p">}</span>
   <span class="kd">var</span> <span class="nx">targetObj</span> <span class="o">=</span> <span class="nx">source</span><span class="p">.</span><span class="nx">constructor</span> <span class="o">===</span> <span class="nb">Array</span> <span class="p">?</span> <span class="p">[]</span> <span class="p">:</span> <span class="p">{};</span>
   <span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">keys</span> <span class="k">in</span> <span class="nx">source</span><span class="p">){</span>
      <span class="k">if</span><span class="p">(</span><span class="nx">source</span><span class="p">.</span><span class="nx">hasOwnProperty</span><span class="p">(</span><span class="nx">keys</span><span class="p">)){</span>
         <span class="k">if</span><span class="p">(</span><span class="nx">source</span><span class="p">[</span><span class="nx">keys</span><span class="p">]</span> <span class="o">&amp;&amp;</span> <span class="k">typeof</span> <span class="nx">source</span><span class="p">[</span><span class="nx">keys</span><span class="p">]</span> <span class="o">===</span> <span class="s1">'object'</span><span class="p">){</span>
           <span class="nx">targetObj</span><span class="p">[</span><span class="nx">keys</span><span class="p">]</span> <span class="o">=</span> <span class="nx">source</span><span class="p">[</span><span class="nx">keys</span><span class="p">].</span><span class="nx">constructor</span> <span class="o">===</span> <span class="nb">Array</span> <span class="p">?</span> <span class="p">[]</span> <span class="p">:</span> <span class="p">{};</span>
           <span class="nx">targetObj</span><span class="p">[</span><span class="nx">keys</span><span class="p">]</span> <span class="o">=</span> <span class="nx">deepCopy</span><span class="p">(</span><span class="nx">source</span><span class="p">[</span><span class="nx">keys</span><span class="p">]);</span>
         <span class="p">}</span><span class="k">else</span><span class="p">{</span>
           <span class="nx">targetObj</span><span class="p">[</span><span class="nx">keys</span><span class="p">]</span> <span class="o">=</span> <span class="nx">source</span><span class="p">[</span><span class="nx">keys</span><span class="p">];</span>
         <span class="p">}</span>
      <span class="p">}</span>
   <span class="p">}</span>
   <span class="k">return</span> <span class="nx">targetObj</span><span class="p">;</span>
<span class="p">}</span>
</code></pre>
</div>

<h3 id="深拷贝实现">深拷贝实现</h3>

<p>可用 JSON 对象中的 parse() 和 stringify() 实现深拷贝，不足之处从以下例子可见，源对象的方法在拷贝的过程中丢失了，这是因为 JSON 语法不支持函数，详见<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/JSON/stringify">链接3</a>。</p>

<div class="language-js highlighter-rouge"><pre class="highlight"><code><span class="c1">// 利用JSON序列化实现一个深拷贝</span>
<span class="kd">function</span> <span class="nx">deepCopy</span><span class="p">(</span><span class="nx">source</span><span class="p">){</span>
  <span class="k">return</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">source</span><span class="p">));</span>
<span class="p">}</span>
<span class="kd">var</span> <span class="nx">o1</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">arr</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span>
  <span class="na">age</span><span class="p">:</span> <span class="kc">undefined</span><span class="p">,</span>
  <span class="na">obj</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">name</span><span class="p">:</span> <span class="s1">'Tate'</span>
  <span class="p">},</span>
  <span class="na">func</span><span class="p">:</span> <span class="kd">function</span><span class="p">(){</span>
    <span class="k">return</span> <span class="mi">18</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">};</span>
<span class="kd">var</span> <span class="nx">o2</span> <span class="o">=</span> <span class="nx">deepCopy</span><span class="p">(</span><span class="nx">o1</span><span class="p">);</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">o2</span><span class="p">);</span> <span class="c1">// {"arr":[1,2],"obj":{"name":"Tate"}}</span>
</code></pre>
</div>

<blockquote>
  <p>也可用 $.extend(true, {}, obj) 实现深拷贝，<a href="https://github.com/jquery/jquery/blob/1472290917f17af05e98007136096784f9051fab/src/core.js#L121">源码可见</a></p>
</blockquote>

<h2 id="参考链接">参考链接</h2>

<ol>
  <li><a href="https://juejin.im/entry/589c29a9b123db16a3c18adf">前端基础进阶：详细图解 JavaScript 内存空间</a> By 这波能反杀</li>
  <li><a href="https://segmentfault.com/a/1190000008637489">JavaScript 中的浅拷贝和深拷贝</a> By Darko</li>
  <li><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/JSON/stringify">MDN - JSON.stringify()</a></li>
</ol>
 
<div id="disqus_thread"></div>
<script>
    /**
     *  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
     *  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables
     */

    var disqus_config = function () {
        this.page.url = 'https://tate-young.github.io/2018/01/31/js-deep-copy.html';
        this.page.identifier = '/2018/01/31/js-deep-copy';
        this.page.title = '浅拷贝和深拷贝';
    };

    (function () { // REQUIRED CONFIGURATION VARIABLE: EDIT THE SHORTNAME BELOW
        var d = document,
            s = d.createElement('script');

        s.src = '//tate.disqus.com/embed.js'; // IMPORTANT: Replace EXAMPLE with your forum shortname!

        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the
    <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a>
</noscript>

            <!-- <p class="post-info">
			本文由 <a href="/">liberxue</a> 创作，采用 <a href="https://creativecommons.org/licenses/by/4.0/" target="_blank" rel="external nofollow">知识共享署名4.0</a> 国际许可协议进行许可<br>本站文章除注明转载/出处外，均为本站原创或翻译，转载前请务必署名<br>最后编辑时间为:2018-01-31 17:15:00</p> -->
        </div>
    </article>

    <!-- <div class="related-post-lists">
	<div class="post-lists">
		<div class="post-lists-body">
					<div class="post-list-item">
				<div class="post-list-item-container">
					<div class="item-label">
						<div class="item-title"><a href="induction.html">归纳的随想</a></div>
						<div class="item-meta clearfix">
														<div class="item-meta-ico bg-ico-image" style="background: url('../usr/themes/pinghsu/images/bg-ico.png') no-repeat;background-size: 40px auto;"></div>
	                        							<div class="item-meta-cat"><a href="../category/thoughts/index.html">Thoughts</a></div>
						</div>
					</div>
				</div>
			</div>
				</div>
	</div>
</div> -->

    <!-- <footer class="footer bg-white">
	<div class="footer-social">
		<div class="footer-container clearfix">
			<div class="social-list">
	 <a class="social segmentfault" target="blank" href="https://segmentfault.com/u/liberxue" title="访问 LiberXue_Twitter" data-hover="Segmentfault">Segmentfault</a>
    <a class="social github" target="blank" href="https://github.com/liberxue" title="访问 LiberXue_Twitter" data-hover="GitHub">GitHub</a>
    <a class="social twitter" target="blank" href="http://twitter.com/liberxue" title="访问 LiberXue_Twitter" data-hover="Twitter">Twitter</a>
     <a class="social stackoverflow" target="blank" href="https://stackoverflow.com/users/6902190/liberxue" title="访问 LiberXue_stackoverflow" data-hover="StackOverflow">StackOverflow</a>
          <a class="social oschina" target="blank" href="https://my.oschina.net/bolanzw" title="访问 LiberXue_Oschina" data-hover="Oschina">Oschina</a>
     <a class="social rss" target="blank" href="/feed.xml"title="访问 LiberXue_RSS" data-hover="RSS">RSS</a>
	</div>
		</div>
	</div>
	<div class="footer-meta">
        <div class="footer-container">
            <div class="meta-item meta-copyright">
                <div class="meta-copyright-info">
                    <a href="/" class="info-logo">
                         <img src="http://localhost:4000/style/images/logo-liberxue.png"   title="访问 LiberXue_blog" data-hover="LiberXue_blog" alt="LiberXue_blog" /> </a>
                    <div class="info-text">
                        <p>Theme is <a href="http://www.liberxue.com/2017/08/03/Jekyllthemes.html" title="访问 Jekyll liberxue主题"  data-hover="Jekyll liberxue"target="_blank">Jekyll liberxue</a> by <a href="http://www.liberxue.com/about" target="_blank">liberxue</a></p>
                        <p>Powered by <a href="http://localhost:4000/tags/#Jekyll" title="Jekyll" data-hover="Jekyll" target="_blank" rel="nofollow">Jekyll</a></p>
                        <p>&copy; 2017 <a href="/feed.xml"  title="访问 liberxue blog RSS" data-hover="liberxue blog RSS">liberxue blog RSS</a></p>
                        <p>总计文章：篇</p>
                      <p>本blog已开源点击Fork</p><iframe src="http://ghbtns.com/github-btn.html?user=liberxue&repo=liberxue.github.io&type=fork&count=true" allowtransparency="true" frameborder="0" scrolling="0" width="95" height="20"></iframe>
                    </div>
                </div>
            </div>
            <div class="meta-item meta-posts">
                <h3 class="meta-title">置顶文章</h3>
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
            </div>
            <div class="meta-item meta-comments">
                <h3 class="meta-title">最新文章</h3>
          
      
            
      
            
      
            
      
            
      
            
      
            
      
            
      
            
      
            
      
            
      
            
      
            
      
            
      
    
</div>
		</div>
    </div>
</footer> -->
<script src="//cdn.bootcss.com/jquery/2.2.2/jquery.min.js"></script>
<script src="//cdn.bootcss.com/bootstrap-3-typeahead/4.0.2/bootstrap3-typeahead.js"></script>
<script src="/search/js/cb-search.js"></script>
<!-- <script src="/search/js/canvas.js"></script> -->

<script>
    $(function () {
        setTimeout(function () {
            $('code').removeClass('hljs');
            $('code').removeClass('language');
        }, 90);
    });
    (function () {
        var bp = document.createElement('script');
        var curProtocol = window.location.protocol.split(':')[0];
        if (curProtocol === 'https') {
            bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
        } else {
            bp.src = 'http://push.zhanzhang.baidu.com/push.js';
        }
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(bp, s);
    })();
</script>
    <!--liberxueconnnet-menu-->
    <div id="directory-content" class="directory-content">
        <div id="directory"></div>
    </div>
    <!--liberxueconnnet-menu-->
    <script>
        var postDirectoryBuild = function () {
            var postChildren = function children(childNodes, reg) {
                    var result = [],
                        isReg = typeof reg === 'object',
                        isStr = typeof reg === 'string',
                        node, i, len;
                    for (i = 0, len = childNodes.length; i < len; i++) {
                        node = childNodes[i];
                        if ((node.nodeType === 1 || node.nodeType === 9) &&
                            (!reg ||
                                isReg && reg.test(node.tagName.toLowerCase()) ||
                                isStr && node.tagName.toLowerCase() === reg)) {
                            result.push(node);
                        }
                    }
                    return result;
                },
                createPostDirectory = function (article, directory, isDirNum) {
                    var contentArr = [],
                        titleId = [],
                        levelArr, root, level,
                        currentList, list, li, link, i, len;
                    levelArr = (function (article, contentArr, titleId) {
                        var titleElem = postChildren(article.childNodes, /^h\d$/),
                            levelArr = [],
                            lastNum = 1,
                            lastRevNum = 1,
                            count = 0,
                            guid = 1,
                            id = 'directory' + (Math.random() + '').replace(/\D/, ''),
                            lastRevNum, num, elem;
                        while (titleElem.length) {
                            elem = titleElem.shift();
                            contentArr.push(elem.innerHTML);
                            num = +elem.tagName.match(/\d/)[0];
                            if (num > lastNum) {
                                levelArr.push(1);
                                lastRevNum += 1;
                            } else if (num === lastRevNum ||
                                num > lastRevNum && num <= lastNum) {
                                levelArr.push(0);
                                lastRevNum = lastRevNum;
                            } else if (num < lastRevNum) {
                                levelArr.push(num - lastRevNum);
                                lastRevNum = num;
                            }
                            count += levelArr[levelArr.length - 1];
                            lastNum = num;
                            elem.id = elem.id || (id + guid++);
                            titleId.push(elem.id);
                        }
                        if (count !== 0 && levelArr[0] === 1) levelArr[0] = 0;

                        return levelArr;
                    })(article, contentArr, titleId);
                    currentList = root = document.createElement('ul');
                    dirNum = [0];
                    for (i = 0, len = levelArr.length; i < len; i++) {
                        level = levelArr[i];
                        if (level === 1) {
                            list = document.createElement('ul');
                            if (!currentList.lastElementChild) {
                                currentList.appendChild(document.createElement('li'));
                            }
                            currentList.lastElementChild.appendChild(list);
                            currentList = list;
                            dirNum.push(0);
                        } else if (level < 0) {
                            level *= 2;
                            while (level++) {
                                if (level % 2) dirNum.pop();
                                currentList = currentList.parentNode;
                            }
                        }
                        dirNum[dirNum.length - 1]++;
                        li = document.createElement('li');
                        link = document.createElement('a');
                        link.href = '#' + titleId[i];
                        link.title = '访问' + titleId[i];
                        link.title = '访问' + titleId[i];
                        link.innerHTML = !isDirNum ? contentArr[i] :
                            dirNum.join('.') + ' ' + contentArr[i];
                        li.appendChild(link);
                        currentList.appendChild(li);
                    }
                    directory.appendChild(root);
                };
            createPostDirectory(document.getElementById('post-content'), document.getElementById('directory'), true);
        };
        postDirectoryBuild();
    </script>
    <script src="//cdn.bootcss.com/highlight.js/9.12.0/highlight.min.js"></script>
    <script>
        lang = hljs.initHighlightingOnLoad();
    </script>
</body>

</html>