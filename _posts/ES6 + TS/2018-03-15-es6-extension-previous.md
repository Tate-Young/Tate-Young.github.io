---
layout: blog
front: true
comments: True
flag: ES6
background: blue
category: å‰ç«¯
title:  å¯¹è±¡æ‰©å±•(ä¸Š)
date:   2018-03-15 16:00:00 GMT+0800 (CST)
background-image: https://ss3.bdstatic.com/70cFv8Sh_Q1YnxGkpoWK1HF6hhy/it/u=2447683882,2644927629&fm=27&gp=0.jpg
tags:
- ES6
---
# {{ page.title }}

## å­—ç¬¦ä¸²æ‰©å±•

ES6 ä¸­å­—ç¬¦ä¸²ä¸»è¦æ‰©å±•:

| æ‰©å±• | æè¿° |
|:--------------|:---------|
| Unicode è¡¨ç¤ºæ³• | <code>\u{20BB7}</code>codePointAt()ã€String.fromCodePoint() |
| æ–°å¢æ–¹æ³• | includes()ã€startsWith()ã€padStart()ã€repeat() ç­‰ |
| å­—ç¬¦ä¸²æ¨¡æ¿ | \`è¿™æ˜¯å€¼ ${value}\` |
| æ ‡ç­¾æ¨¡æ¿ | fn\`è¿™æ˜¯å‚æ•° ${param}\` |

### Unicode è¡¨ç¤ºæ³•

å…·ä½“å¯ä»¥å‚è€ƒ [Unicode ä¸€èŠ‚]( {{site.url}}/2018/03/08/http-unicode.html )ã€‚

### includes()

ES6 ä¹‹å‰åªæœ‰ indexOf æ–¹æ³•ï¼Œå¯ä»¥ç”¨æ¥ç¡®å®šä¸€ä¸ªå­—ç¬¦ä¸²æ˜¯å¦åŒ…å«åœ¨å¦ä¸€ä¸ªå­—ç¬¦ä¸²ä¸­ã€‚ES6 åˆæä¾›äº†ä¸‰ç§æ–°æ–¹æ³•ï¼Œè¿™ä¸‰ä¸ªæ–¹æ³•éƒ½æ”¯æŒç¬¬äºŒä¸ªå‚æ•°ï¼Œè¡¨ç¤ºå¼€å§‹æœç´¢çš„ä½ç½®:

* **includes()** - è¿”å›å¸ƒå°”å€¼ï¼Œè¡¨ç¤ºæ˜¯å¦æ‰¾åˆ°äº†å‚æ•°å­—ç¬¦ä¸²
* **startsWith()** - è¿”å›å¸ƒå°”å€¼ï¼Œè¡¨ç¤ºå‚æ•°å­—ç¬¦ä¸²æ˜¯å¦åœ¨åŸå­—ç¬¦ä¸²çš„å¤´éƒ¨
* **endsWith()** - è¿”å›å¸ƒå°”å€¼ï¼Œè¡¨ç¤ºå‚æ•°å­—ç¬¦ä¸²æ˜¯å¦åœ¨åŸå­—ç¬¦ä¸²çš„å°¾éƒ¨

```JS
const name = 'Tate';

// ES5
name.indexOf('a') !== -1; // true

// ES6
name.includes('a'); // true
name.startsWith('T'); // true
name.endsWith('e'); // true

name.includes('a', 2); // false
```

### padStart()

å­—ç¬¦ä¸²è¡¥å…¨é•¿åº¦çš„åŠŸèƒ½ï¼Œå³å¦‚æœæŸä¸ªå­—ç¬¦ä¸²ä¸å¤ŸæŒ‡å®šé•¿åº¦ï¼Œä¼šåœ¨å¤´éƒ¨æˆ–å°¾éƒ¨è¡¥å…¨ï¼Œå¦åˆ™è¿”å›åŸå­—ç¬¦ä¸²ã€‚ä¸€å…±æ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªå‚æ•°ç”¨æ¥æŒ‡å®šå­—ç¬¦ä¸²çš„æœ€å°é•¿åº¦ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯ç”¨æ¥è¡¥å…¨çš„å­—ç¬¦ä¸²:

* **padStart()** - å¤´éƒ¨è¡¥å…¨
* **padEnd()** - å°¾éƒ¨è¡¥å…¨

```JS
'a'.padStart(6, 'tate'); // 'tateta'
'a'.padEnd(3, '10'); // 'a10'

// åŸå­—ç¬¦ä¸²çš„é•¿åº¦ä¸å°äºæŒ‡å®šçš„æœ€å°é•¿åº¦ï¼Œåˆ™è¿”å›åŸå­—ç¬¦ä¸²
'ab'.padStart(1, 'tate'); // 'ab'
```

### repeat()

**repeat** æ–¹æ³•è¿”å›ä¸€ä¸ªæ–°å­—ç¬¦ä¸²ï¼Œè¡¨ç¤ºå°†åŸå­—ç¬¦ä¸²é‡å¤ n æ¬¡ã€‚

```JS
'a'.repeat(3); // 'aaa'

// å‚æ•°å¦‚æœæ˜¯å°æ•°ï¼Œä¼šè¢«å–æ•´
'a'.repeat(2.9); // 'aa'

// å¦‚æœrepeatçš„å‚æ•°æ˜¯è´Ÿæ•°æˆ–è€…Infinityï¼Œä¼šæŠ¥é”™
// å¦‚æœå‚æ•°æ˜¯ 0 åˆ°- 1 ä¹‹é—´çš„å°æ•°ï¼Œåˆ™ç­‰åŒäº 0ï¼Œå› ä¸ºä¼šå…ˆè¿›è¡Œå–æ•´
'a'.repeat(-1); // RangeError
'a'.repeat(-0.9); // ''

// å¦‚æœrepeatçš„å‚æ•°æ˜¯å­—ç¬¦ä¸²ï¼Œåˆ™ä¼šå…ˆè½¬æ¢æˆæ•°å­—
'a'.repeat(NaN); // ''
'a'.repeat('3'); // 'aaa'
```

### æ¨¡æ¿å­—ç¬¦ä¸² ``

**æ¨¡æ¿å­—ç¬¦ä¸²(template string)** æ˜¯å¢å¼ºç‰ˆçš„å­—ç¬¦ä¸²ï¼Œç”¨åå¼•å· **(`)** æ ‡è¯†ã€‚å®ƒå¯ä»¥å½“ä½œæ™®é€šå­—ç¬¦ä¸²ä½¿ç”¨ï¼Œä¹Ÿå¯ä»¥ç”¨æ¥å®šä¹‰å¤šè¡Œå­—ç¬¦ä¸²ï¼Œæˆ–è€…åœ¨å­—ç¬¦ä¸²ä¸­åµŒå…¥å˜é‡ã€‚

```JS
// ES5
$('#body').append('Welcome to <b>'
    + person.house
    + '</b> '
    + '.We are '
    + '<em>'
    + person.name
    + '</em> and glad to see you all here!'
);

// ES6
$('#body').append(
    `Welcome to <b>${person.house}</b>.We are <em>${person.name}</em> and glad to see you all here!`
);
```

### æ ‡ç­¾æ¨¡æ¿

**æ ‡ç­¾æ¨¡æ¿(tagged template)** ä¸­"æ ‡ç­¾"æŒ‡çš„å°±æ˜¯å‡½æ•°ï¼Œç´§è·Ÿåœ¨åé¢çš„æ¨¡æ¿å­—ç¬¦ä¸²å°±æ˜¯å®ƒçš„å‚æ•°ã€‚

```JS
function tag(stringArr, value1, value2){
  // ...
}
```

* tag å‡½æ•°çš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œè¯¥æ•°ç»„çš„æˆå‘˜æ˜¯æ¨¡æ¿å­—ç¬¦ä¸²ä¸­é‚£äº›æ²¡æœ‰å˜é‡æ›¿æ¢çš„éƒ¨åˆ†
* tag å‡½æ•°çš„å…¶ä»–å‚æ•°ï¼Œéƒ½æ˜¯æ¨¡æ¿å­—ç¬¦ä¸²å„ä¸ªå˜é‡è¢«æ›¿æ¢åçš„å€¼ï¼Œä»¥æ­¤ç±»æ¨

```JS
const t = 'tate', s = 'snow';

tag`Hi ${t} and ${s}`;
// stringArr - ["Hi ", " and ", "", raw: Array(3)]
// value1 - tate
// value2 - snow

// ç›¸å½“äºè°ƒç”¨
tag(['Hi ', ' and ', ''], 'tate', 'snow');

// å›½é™…åŒ–çš„ä½¿ç”¨æ¡ˆä¾‹
i18n`${boy} is getting along well with ${girl} and they are managing to get married!`
```

## æ•°å€¼æ‰©å±•

ES6 ä¸­æ•°å€¼ä¸»è¦æ‰©å±•:

| æ‰©å±• | æè¿° |
|:--------------|:---------|
| æ–°å¢æ–¹æ³• | Number.isFinite()ã€Number.isNaN()ã€Number.isInteger() |
| æŒ‡æ•°è¿ç®—ç¬¦ | <code>**</code> |

### Number.isNaN()

ES6 ä¸­æ–°å¢äº†æ•°æ®ç±»å‹çš„æ£€æµ‹:

* **Number.isFinite()** - æ£€æµ‹ä¸€ä¸ªæ•°å€¼æ˜¯å¦ä¸ºæœ‰é™çš„(finite)ï¼Œå³ä¸æ˜¯ Infinity
* **Number.isNaN()** - æ£€æµ‹ä¸€ä¸ªå€¼æ˜¯å¦ä¸º NaN
* **Number.isInteger()** - æ£€æµ‹ä¸€ä¸ªæ•°å€¼æ˜¯å¦ä¸ºæ•´æ•°

å‰ä¸¤ä¸ªåœ¨ ES5 ä¸­éƒ½æœ‰å¯¹åº”çš„ isFinite() å’Œ isNaN()ï¼Œä½†ä»–ä»¬åœ¨åˆ¤æ–­çš„æ—¶å€™éƒ½ä¼šå…ˆè½¬æ¢æˆæ•°å­—ç±»å‹ï¼Œå…·ä½“å‚ç…§[ç±»å‹æ£€æµ‹ä¸€èŠ‚]( {{site.url}}/2018/02/04/js-data-detection.html )ã€‚

```JS
isNaN([1, 2]); // true
Number.isNaN([1, 2]); // false
Number.isNaN(NaN); // true

isFinite('10'); // true
Number.isFinite('10'); // false
Number.isFinite(Infinity); // false
```

### Number.parseInt()

ES6 å°†å…¨å±€æ–¹æ³• parseInt() å’Œ parseFloat()ï¼Œç§»æ¤åˆ° Number å¯¹è±¡ä¸Šé¢ï¼Œè¡Œä¸ºå®Œå…¨ä¿æŒä¸å˜ã€‚

```JS
parseInt('2.333'); // 2
parseInt('110', 2); // 6

Number.parseInt('2.333'); // 2
Number.parseInt === parseInt; // true
```

### æŒ‡æ•°è¿ç®—ç¬¦ **

**æŒ‡æ•°è¿ç®—ç¬¦(\*\*)** å¯ä»¥ä¸ç­‰å·ç»“åˆï¼Œå½¢æˆä¸€ä¸ªæ–°çš„èµ‹å€¼è¿ç®—ç¬¦(**=)ï¼ŒæŒ‡æ•°è¿ç®—ç¬¦ç±»ä¼¼äº Math å¯¹è±¡çš„ pow æ–¹æ³•ã€‚

```JS
2 ** 2; // 4
Math.pow(2, 2); // 4

let a = 2;
a **= 2; // a = 4
```

## æ•°ç»„æ‰©å±•

ES6 ä¸­æ•°ç»„ä¸»è¦æ‰©å±•:

| æ‰©å±• | æè¿° |
|:--------------|:---------|
| æ‰©å±•è¿ç®—ç¬¦ | <code>...numbers</code> |
| æ–°å¢æ–¹æ³• | Array.from()ã€Array.of()ã€find()ã€fill()ã€includes() ç­‰ |
| ç©ºä½ä¼˜åŒ–| æ˜ç¡®å°†ç©ºä½è½¬ä¸º undefined |

### æ‰©å±•è¿ç®—ç¬¦ ...

**æ‰©å±•è¿ç®—ç¬¦(spread)** æ˜¯ä¸‰ä¸ªç‚¹(...)ï¼Œå³ rest å‚æ•°çš„é€†è¿ç®—ï¼Œå°†ä¸€ä¸ªæ•°ç»„è½¬ä¸ºç”¨é€—å·åˆ†éš”çš„å‚æ•°åºåˆ—ï¼Œå¯ä»¥ä»£æ›¿ apply æ–¹æ³•ã€‚ä»»ä½• Iterator æ¥å£çš„å¯¹è±¡ï¼Œéƒ½å¯ä»¥ç”¨æ‰©å±•è¿ç®—ç¬¦è½¬ä¸ºçœŸæ­£çš„æ•°ç»„ï¼Œå…¶è°ƒç”¨çš„å®é™…ä¸Šæ˜¯**éå†å™¨æ¥å£(Symbol.iterator)**ã€‚

```JS
console.log(...[1, 2, 3]); // 1, 2, 3
[...'hello']; // [ "h", "e", "l", "l", "o" ]

// ES5
Math.max.apply(null, [1, 3, 2])

// ES6
Math.max(...[1, 3, 2])

// ç­‰åŒäº
Math.max(1, 3, 2); // 3
```

å†ä¸¾ä¸ªæ —å­ ğŸŒ°:

```JS
// ES5
var arr1 = [1, 2, 3];
var arr2 = [4, 5, 6];
Array.prototype.push.apply(arr1, arr2);

// ES6
let arr1 = [1, 2, 3];
let arr2 = [4, 5, 6];
arr1.push(...arr2);
```

```JS
// åˆå¹¶æ•°ç»„
// ES5
[1, 2].concat(more)

// ES6
[1, 2, ...more]
```

æ‰©å±•è¿ç®—ç¬¦è¿›è¡Œå¤åˆ¶æ•°ç»„æ—¶ä¹Ÿæ˜¯æµ…æ‹·è´ï¼Œç±»ä¼¼äº concat()ï¼Œå¯å‚è€ƒ [æ·±æµ…æ‹·è´è¿™ä¸€èŠ‚]( {{site.url}}/2018/01/31/js-deep-copy.html#%E7%AC%AC%E4%BA%8C%E7%A7%8D%E6%B5%85%E6%8B%B7%E8%B4%9D )ã€‚

### Array.from()

**Array.from** æ–¹æ³•ç”¨äºå°†ä¸¤ç±»å¯¹è±¡è½¬ä¸ºçœŸæ­£çš„æ•°ç»„:

* ç±»ä¼¼æ•°ç»„çš„å¯¹è±¡(array-like object)
* å¯éå†(iterable)çš„å¯¹è±¡ï¼ŒåŒ…æ‹¬ ES6 æ–°å¢çš„æ•°æ®ç»“æ„ Set å’Œ Map

ç±»ä¼¼æ•°ç»„çš„å¯¹è±¡è½¬æ¢ç¤ºä¾‹:

```JS
let arrayLike = {
  '0': 'a',
  '1': 'b',
  '2': 'c',
  length: 3
};

// ES5
var arr1 = [].slice.call(arrayLike); // ['a', 'b', 'c']

// ES6
let arr2 = Array.from(arrayLike); // ['a', 'b', 'c']
```

å¯éå†å¯¹è±¡è½¬æ¢ç¤ºä¾‹:

```JS
Array.from('hello'); // ['h', 'e', 'l', 'l', 'o']

let tempSet = new Set(['a', 'b']);
Array.from(tempSet); // ['a', 'b']
```

Array.from è¿˜å¯ä»¥æ¥å—ç¬¬äºŒä¸ªå‚æ•°ï¼Œä½œç”¨ç±»ä¼¼äºæ•°ç»„çš„ map æ–¹æ³•ï¼Œç”¨æ¥å¯¹æ¯ä¸ªå…ƒç´ è¿›è¡Œå¤„ç†ï¼Œå°†å¤„ç†åçš„å€¼æ”¾å…¥è¿”å›çš„æ•°ç»„ã€‚

```JS
Array.from([1, , 2, 3], (n) => n ** 2 || 0); // [1, 0, 4, 9]

Array.from({ length: 2 }, () => 'tate'); // ['tate', 'tate']
```

### Array.of()

**Array.of** æ–¹æ³•ç”¨äºå°†ä¸€ç»„å€¼ï¼Œè½¬æ¢ä¸ºæ•°ç»„ã€‚

```JS
Array.of(1, 2, 3); // [1, 2, 3]

// ES5 çš„å®ç°
function ArrayOf(){
  return [].slice.call(arguments);
}
```

### find()

**find** æ–¹æ³•ï¼Œç”¨äºæ‰¾å‡ºç¬¬ä¸€ä¸ªç¬¦åˆæ¡ä»¶çš„æ•°ç»„æˆå‘˜ã€‚å®ƒçš„å‚æ•°æ˜¯ä¸€ä¸ªå›è°ƒå‡½æ•°ï¼Œæ‰€æœ‰æ•°ç»„æˆå‘˜ä¾æ¬¡æ‰§è¡Œè¯¥å›è°ƒå‡½æ•°ï¼Œç›´åˆ°æ‰¾å‡ºç¬¬ä¸€ä¸ªè¿”å›å€¼ä¸º true çš„æˆå‘˜ï¼Œç„¶åè¿”å›è¯¥æˆå‘˜ï¼Œå¦åˆ™è¿”å› undefinedã€‚**findIndex** æ–¹æ³•åˆ™è¿”å›ç¬¬ä¸€ä¸ªç¬¦åˆæ¡ä»¶çš„æ•°ç»„æˆå‘˜çš„ç´¢å¼•å€¼ã€‚

```JS
// å¯ä»¥æ¥æ”¶ä¸‰ä¸ªå‚æ•°ï¼Œä¾æ¬¡ä¸ºå½“å‰çš„å€¼ã€ç´¢å¼•å€¼å’ŒåŸæ•°ç»„
[1, 2, 3, 4].find(function(value, index, arr) {
  return value > 2;
}) // 3
```

### fill()

**fill** æ–¹æ³•ä½¿ç”¨ç»™å®šå€¼ï¼Œå¡«å……ä¸€ä¸ªæ•°ç»„ã€‚å¯ä»¥æ¥æ”¶ç¬¬äºŒä¸ªå’Œç¬¬ä¸‰ä¸ªå‚æ•°ï¼Œç”¨äºæŒ‡å®šå¡«å……çš„èµ·å§‹ä½ç½®å’Œç»“æŸä½ç½®ã€‚

```JS
new Array(3).fill(1); // [1, 1, 1]

['a', 'b', 'c'].fill('d', 1, 2); // ['a', 'd', 'c']
```

### entries()

ä»¥ä¸‹ä¸‰ä¸ªæ–¹æ³•å‡ç”¨äºéå†æ•°ç»„ã€‚å®ƒä»¬éƒ½è¿”å›ä¸€ä¸ªéå†å™¨å¯¹è±¡ï¼Œå¯ä»¥ç”¨ for...of å¾ªç¯è¿›è¡Œéå†æˆ–è€…è°ƒç”¨éå†å™¨å¯¹è±¡çš„ next æ–¹æ³•ï¼Œè¿›è¡Œéå†:

* **keys()** - å¯¹é”®åçš„éå†
* **values()** - å¯¹é”®å€¼çš„éå†ï¼Œéœ€è¦æµè§ˆå™¨æ”¯æŒ
* **entries()** - å¯¹é”®å€¼å¯¹çš„éå†

```JS
for (let [index, elem] of ['a', 'b'].entries()) {
  console.log(index, elem); // 0, 'a'  1, 'b'
}

let entries = ['a', 'b'].entries();
entries.next().value; // [0, 'a']
entries.next().value; // [1, 'b']
entries.next().value; // undefined
```

### includes()

**includes** æ–¹æ³•è¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œè¡¨ç¤ºæŸä¸ªæ•°ç»„æ˜¯å¦åŒ…å«ç»™å®šçš„å€¼ï¼Œä¸å­—ç¬¦ä¸²çš„ includes æ–¹æ³•ç±»ä¼¼ã€‚

```JS
[1, 2, 3].includes(2); // true
[1, 2, 3].includes(2, 2); // false

// ES5
// indexOf å†…éƒ¨ä½¿ç”¨ä¸¥æ ¼ç›¸ç­‰è¿ç®—ç¬¦ï¼ˆ===ï¼‰è¿›è¡Œåˆ¤æ–­ï¼Œå› æ­¤ NaN åˆ¤æ–­æœ‰è¯¯ NaN !== NaN
[NaN].indexOf(NaN); // -1

// ES6
[NaN].includes(NaN); // true
```

### æ•°ç»„ç©ºä½

ç©ºä½ä¸æ˜¯ undefinedï¼Œä¸€ä¸ªä½ç½®çš„å€¼ç­‰äº undefinedï¼Œä¾ç„¶æ˜¯æœ‰å€¼çš„ã€‚ç©ºä½æ˜¯æ²¡æœ‰ä»»ä½•å€¼ã€‚

```JS
Array(3) // [, , ,]

0 in [undefined, undefined] // true
0 in [, ,] // false
```

ES5 å¯¹ç©ºä½çš„å¤„ç†ï¼Œå¤§å¤šæ•°æƒ…å†µä¸‹ä¼šå¿½ç•¥ã€‚

* forEach()ã€filter()ã€reduce()ã€every() å’Œ some() éƒ½ä¼šè·³è¿‡ç©ºä½ã€‚
* map() ä¼šè·³è¿‡ç©ºä½ï¼Œä½†ä¼šä¿ç•™è¿™ä¸ªå€¼
* join() å’Œ toString() ä¼šå°†ç©ºä½è§†ä¸º undefinedï¼Œè€Œ undefined å’Œ null ä¼šè¢«å¤„ç†æˆç©ºå­—ç¬¦ä¸²ã€‚

```JS
// forEach æ–¹æ³•
[, 'a'].forEach((x, index) => console.log(index)); // 1

// map æ–¹æ³•
[, 'a'].map(x => 1); // [, 1]

// join æ–¹æ³•
[, 'a', undefined, null].join('-'); // "-a--"
```

ES6 åˆ™æ˜¯æ˜ç¡®å°†ç©ºä½è½¬ä¸º undefinedï¼Œfor of ä¹Ÿå¯ä»¥éå†ç©ºä½:

```JS
Array.from([, 'a']); // [undefined, 'a']
[...[, 'a']]; // [undefined, 'a']
```

## å‚è€ƒé“¾æ¥

1. [ECMAScript 6 å…¥é—¨](http://es6.ruanyifeng.com/#docs/string) By é˜®ä¸€å³°